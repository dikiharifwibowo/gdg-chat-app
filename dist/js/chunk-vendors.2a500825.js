(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(t,e,n){var r=n("b622"),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},"0366":function(t,e,n){var r=n("1c0b");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"06cf":function(t,e,n){var r=n("83ab"),i=n("d1e7"),o=n("5c6c"),a=n("fc6a"),s=n("c04e"),u=n("5135"),c=n("0cfb"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(n){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},"0cfb":function(t,e,n){var r=n("83ab"),i=n("d039"),o=n("cc12");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"159b":function(t,e,n){var r=n("da84"),i=n("fdbc"),o=n("17c2"),a=n("9112");for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(l){c.forEach=o}}},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,i=n("a640"),o=i("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"19aa":function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},"1be4":function(t,e,n){var r=n("d066");t.exports=r("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,n){var r=n("b622"),i=r("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(u){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(u){}return n}},"1cdc":function(t,e,n){var r=n("342f");t.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},2266:function(t,e,n){var r=n("825a"),i=n("e95a"),o=n("50c4"),a=n("0366"),s=n("35a1"),u=n("2a62"),c=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var l,h,f,d,p,v,g,y=n&&n.that,m=!(!n||!n.AS_ENTRIES),b=!(!n||!n.IS_ITERATOR),_=!(!n||!n.INTERRUPTED),w=a(e,y,1+m+_),I=function(t){return l&&u(l),new c(!0,t)},T=function(t){return m?(r(t),_?w(t[0],t[1],I):w(t[0],t[1])):_?w(t,I):w(t)};if(b)l=t;else{if(h=s(t),"function"!=typeof h)throw TypeError("Target is not iterable");if(i(h)){for(f=0,d=o(t.length);d>f;f++)if(p=T(t[f]),p&&p instanceof c)return p;return new c(!1)}l=h.call(t)}v=l.next;while(!(g=v.call(l)).done){try{p=T(g.value)}catch(E){throw u(l),E}if("object"==typeof p&&p&&p instanceof c)return p}return new c(!1)}},"23cb":function(t,e,n){var r=n("a691"),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},"23e7":function(t,e,n){var r=n("da84"),i=n("06cf").f,o=n("9112"),a=n("6eeb"),s=n("ce4e"),u=n("e893"),c=n("94ca");t.exports=function(t,e){var n,l,h,f,d,p,v=t.target,g=t.global,y=t.stat;if(l=g?r:y?r[v]||s(v,{}):(r[v]||{}).prototype,l)for(h in e){if(d=e[h],t.noTargetGet?(p=i(l,h),f=p&&p.value):f=l[h],n=c(g?h:v+(y?".":"#")+h,t.forced),!n&&void 0!==f){if(typeof d===typeof f)continue;u(d,f)}(t.sham||f&&f.sham)&&o(d,"sham",!0),a(l,h,d,t)}}},"241c":function(t,e,n){var r=n("ca84"),i=n("7839"),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},2591:function(t,e,n){"use strict";n.d(e,"a",(function(){return r["default"]}));var r=n("cc84"),i=(n("b7aa"),n("e947"),n("c68e"),n("a8e9")),o=n("abfd"),a=(n("c7b2"),n("945c"));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function s(t){t.prototype.loadBundle=a["r"],t.prototype.namedQuery=a["p"]}s(a["b"]);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},u(t,e)};function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function l(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;Object.create;var f=n("ffa6"),d={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},p=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return c(e,t),e}(Error);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function g(t,e,n){var r=v(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"===typeof s){if(!d[s])return new p("internal","internal");r=d[s],i=s}var u=a.message;"string"===typeof u&&(i=u),o=a.details,void 0!==o&&(o=n.decode(o))}}catch(c){}return"ok"===r?null:new p(r,i,o)}var y=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return l(this,void 0,void 0,(function(){var t;return h(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=e.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return l(this,void 0,void 0,(function(){var t,e;return h(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}(),m="type.googleapis.com/google.protobuf.Int64Value",b="type.googleapis.com/google.protobuf.UInt64Value";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var w=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"===typeof t||"object"===typeof t)return _(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case m:case b:var n=Number(t["value"]);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"===typeof t||"object"===typeof t?_(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new p("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}var T=function(){function t(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new w,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new y(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(u){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;if(null!==this.emulatorOrigin){var n=this.emulatorOrigin;return n+"/"+e+"/"+this.region+"/"+t}return null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return l(this,void 0,void 0,(function(){var r,i,o;return h(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:r=a.sent(),null!==r&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return l(this,void 0,void 0,(function(){var t,e;return h(this,(function(n){switch(n.label){case 0:return t=this.appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return e=n.sent(),[2,e.token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return l(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,f,d,v,y;return h(this,(function(h){switch(h.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return a=h.sent(),a.authToken&&(o["Authorization"]="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=I(s),c=u.timer,l=u.promise,[4,Promise.race([E(c,this.postJSON(r,i,o)),l,E(c,this.cancelAllRequests)])];case 2:if(f=h.sent(),!f)throw new p("cancelled","Firebase Functions instance was deleted.");if(d=g(f.status,f.json,this.serializer),d)throw d;if(!f.json)throw new p("internal","Response is not valid JSON object.");if(v=f.json.data,"undefined"===typeof v&&(v=f.json.result),"undefined"===typeof v)throw new p("internal","Response is missing data field.");return y=this.serializer.decode(v),[2,{data:y}]}}))}))},t}();function E(t,e){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S="functions";function O(t,e){var n={Functions:T};function r(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal"),s=t.getProvider("messaging");return new T(i,o,s,a,r,e)}t.INTERNAL.registerComponent(new f["Component"](S,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var C="@firebase/functions",k="0.6.9";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
O(r["default"],fetch.bind(self)),r["default"].registerVersion(C,k);var A=function(){return A=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},A.apply(this,arguments)};function N(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function x(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;function P(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function D(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create;var j,L=n("9dbb"),M="@firebase/installations",F="0.4.26",U=1e4,q="w:"+F,V="FIS_v2",B="https://firebaseinstallations.googleapis.com/v1",K=36e5,W="installations",H="Installations",G=(j={},j["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',j["not-registered"]="Firebase Installation is not registered.",j["installation-not-found"]="Firebase Installation not found.",j["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',j["app-offline"]="Could not process request. Application offline.",j["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",j),z=new i["ErrorFactory"](W,H,G);function $(t){return t instanceof i["FirebaseError"]&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t){var e=t.projectId;return B+"/projects/"+e+"/installations"}function Y(t){return{token:t.token,requestStatus:2,expiresIn:et(t.expiresIn),creationTime:Date.now()}}function X(t,e){return N(this,void 0,void 0,(function(){var n,r;return x(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,z.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function J(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Z(t,e){var n=e.refreshToken,r=J(t);return r.append("Authorization",nt(n)),r}function tt(t){return N(this,void 0,void 0,(function(){var e;return x(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),e.status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function et(t){return Number(t.replace("s","000"))}function nt(t){return V+" "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t,e){var n=e.fid;return N(this,void 0,void 0,(function(){var e,r,i,o,a,s,u;return x(this,(function(c){switch(c.label){case 0:return e=Q(t),r=J(t),i={fid:n,authVersion:V,appId:t.appId,sdkVersion:q},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,tt((function(){return fetch(e,o)}))];case 1:return a=c.sent(),a.ok?[4,a.json()]:[3,3];case 2:return s=c.sent(),u={fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Y(s.authToken)},[2,u];case 3:return[4,X("Create Installation",a)];case 4:throw c.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t){var e=btoa(String.fromCharCode.apply(String,D([],R(t))));return e.replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at=/^[cdef][\w-]{21}$/,st="";function ut(){try{var t=new Uint8Array(17),e=self.crypto||self.msCrypto;e.getRandomValues(t),t[0]=112+t[0]%16;var n=ct(t);return at.test(n)?n:st}catch(r){return st}}function ct(t){var e=ot(t);return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht=new Map;function ft(t,e){var n=lt(t);vt(n,e),gt(n,e)}function dt(t,e){mt();var n=lt(t),r=ht.get(n);r||(r=new Set,ht.set(n,r)),r.add(e)}function pt(t,e){var n=lt(t),r=ht.get(n);r&&(r.delete(e),0===r.size&&ht.delete(n),bt())}function vt(t,e){var n,r,i=ht.get(t);if(i)try{for(var o=P(i),a=o.next();!a.done;a=o.next()){var s=a.value;s(e)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function gt(t,e){var n=mt();n&&n.postMessage({key:t,fid:e}),bt()}var yt=null;function mt(){return!yt&&"BroadcastChannel"in self&&(yt=new BroadcastChannel("[Firebase] FID Change"),yt.onmessage=function(t){vt(t.data.key,t.data.fid)}),yt}function bt(){0===ht.size&&yt&&(yt.close(),yt=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t="firebase-installations-database",wt=1,It="firebase-installations-store",Tt=null;function Et(){return Tt||(Tt=Object(L["openDb"])(_t,wt,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(It)}}))),Tt}function St(t,e){return N(this,void 0,void 0,(function(){var n,r,i,o,a;return x(this,(function(s){switch(s.label){case 0:return n=lt(t),[4,Et()];case 1:return r=s.sent(),i=r.transaction(It,"readwrite"),o=i.objectStore(It),[4,o.get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||ft(t,e.fid),[2,e]}}))}))}function Ot(t){return N(this,void 0,void 0,(function(){var e,n,r;return x(this,(function(i){switch(i.label){case 0:return e=lt(t),[4,Et()];case 1:return n=i.sent(),r=n.transaction(It,"readwrite"),[4,r.objectStore(It).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Ct(t,e){return N(this,void 0,void 0,(function(){var n,r,i,o,a,s;return x(this,(function(u){switch(u.label){case 0:return n=lt(t),[4,Et()];case 1:return r=u.sent(),i=r.transaction(It,"readwrite"),o=i.objectStore(It),[4,o.get(n)];case 2:return a=u.sent(),s=e(a),void 0!==s?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||ft(t,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return N(this,void 0,void 0,(function(){var e,n,r;return x(this,(function(i){switch(i.label){case 0:return[4,Ct(t,(function(n){var r=At(n),i=Nt(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return n=i.sent(),n.fid!==st?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function At(t){var e=t||{fid:ut(),registrationStatus:0};return Dt(e)}function Nt(t,e){if(0===e.registrationStatus){if(!navigator.onLine){var n=Promise.reject(z.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=xt(t,r);return{installationEntry:r,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Pt(t)}:{installationEntry:e}}function xt(t,e){return N(this,void 0,void 0,(function(){var n,r;return x(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,rt(t,e)];case 1:return n=i.sent(),[2,St(t,n)];case 2:return r=i.sent(),$(r)&&409===r.customData.serverCode?[4,Ot(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,St(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}function Pt(t){return N(this,void 0,void 0,(function(){var e,n,r,i;return x(this,(function(o){switch(o.label){case 0:return[4,Rt(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,it(100)];case 3:return o.sent(),[4,Rt(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,kt(t)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,e]}}))}))}function Rt(t){return Ct(t,(function(t){if(!t)throw z.create("installation-not-found");return Dt(t)}))}function Dt(t){return jt(t)?{fid:t.fid,registrationStatus:0}:t}function jt(t){return 1===t.registrationStatus&&t.registrationTime+U<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return N(this,void 0,void 0,(function(){var t,i,o,a,s,u,c,l;return x(this,(function(h){switch(h.label){case 0:return t=Mt(n,e),i=Z(n,e),o=r.getImmediate({optional:!0}),o&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:q}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,tt((function(){return fetch(t,s)}))];case 1:return u=h.sent(),u.ok?[4,u.json()]:[3,3];case 2:return c=h.sent(),l=Y(c),[2,l];case 3:return[4,X("Generate Auth Token",u)];case 4:throw h.sent()}}))}))}function Mt(t,e){var n=e.fid;return Q(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t,e){return void 0===e&&(e=!1),N(this,void 0,void 0,(function(){var n,r,i,o;return x(this,(function(a){switch(a.label){case 0:return[4,Ct(t.appConfig,(function(r){if(!Bt(r))throw z.create("not-registered");var i=r.authToken;if(!e&&Kt(i))return r;if(1===i.requestStatus)return n=Ut(t,e),r;if(!navigator.onLine)throw z.create("app-offline");var o=Ht(r);return n=Vt(t,o),o}))];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return i=o,[2,i]}}))}))}function Ut(t,e){return N(this,void 0,void 0,(function(){var n,r;return x(this,(function(i){switch(i.label){case 0:return[4,qt(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,it(100)];case 3:return i.sent(),[4,qt(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,0===r.requestStatus?[2,Ft(t,e)]:[2,r]}}))}))}function qt(t){return Ct(t,(function(t){if(!Bt(t))throw z.create("not-registered");var e=t.authToken;return Gt(e)?A(A({},t),{authToken:{requestStatus:0}}):t}))}function Vt(t,e){return N(this,void 0,void 0,(function(){var n,r,i;return x(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Lt(t,e)];case 1:return n=o.sent(),i=A(A({},e),{authToken:n}),[4,St(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),!$(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Ot(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=A(A({},e),{authToken:{requestStatus:0}}),[4,St(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}function Bt(t){return void 0!==t&&2===t.registrationStatus}function Kt(t){return 2===t.requestStatus&&!Wt(t)}function Wt(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+K}function Ht(t){var e={requestStatus:1,requestTime:Date.now()};return A(A({},t),{authToken:e})}function Gt(t){return 1===t.requestStatus&&t.requestTime+U<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return N(this,void 0,void 0,(function(){var e,n,r;return x(this,(function(i){switch(i.label){case 0:return[4,kt(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,r=e.registrationPromise,r?r.catch(console.error):Ft(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t,e){return void 0===e&&(e=!1),N(this,void 0,void 0,(function(){var n;return x(this,(function(r){switch(r.label){case 0:return[4,Qt(t.appConfig)];case 1:return r.sent(),[4,Ft(t,e)];case 2:return n=r.sent(),[2,n.token]}}))}))}function Qt(t){return N(this,void 0,void 0,(function(){var e;return x(this,(function(n){switch(n.label){case 0:return[4,kt(t)];case 1:return e=n.sent().registrationPromise,e?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t,e){return N(this,void 0,void 0,(function(){var n,r,i,o;return x(this,(function(a){switch(a.label){case 0:return n=Xt(t,e),r=Z(t,e),i={method:"DELETE",headers:r},[4,tt((function(){return fetch(n,i)}))];case 1:return o=a.sent(),o.ok?[3,3]:[4,X("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function Xt(t,e){var n=e.fid;return Q(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t){return N(this,void 0,void 0,(function(){var e,n;return x(this,(function(r){switch(r.label){case 0:return e=t.appConfig,[4,Ct(e,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(n=r.sent(),!n)return[3,6];if(1!==n.registrationStatus)return[3,2];throw z.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw z.create("app-offline");case 3:return[4,Yt(e,n)];case 4:return r.sent(),[4,Ot(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t,e){var n=t.appConfig;return dt(n,e),function(){pt(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t){var e,n;if(!t||!t.options)throw ee("App Configuration");if(!t.name)throw ee("App Name");var r=["projectId","apiKey","appId"];try{for(var i=P(r),o=i.next();!o.done;o=i.next()){var a=o.value;if(!t.options[a])throw ee(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ee(t){return z.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t){var e="installations";t.INTERNAL.registerComponent(new f["Component"](e,(function(t){var e=t.getProvider("app").getImmediate(),n=te(e),r=t.getProvider("platform-logger"),i={appConfig:n,platformLoggerProvider:r},o={app:e,getId:function(){return zt(i)},getToken:function(t){return $t(i,t)},delete:function(){return Jt(i)},onIdChange:function(t){return Zt(i,t)}};return o}),"PUBLIC")),t.registerVersion(M,F)}ne(r["default"]);var re=function(){return re=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},re.apply(this,arguments)};function ie(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function oe(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;function ae(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function se(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function ue(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}var ce;Object.create;var le,he=(ce={},ce["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',ce["only-available-in-window"]="This method is available in a Window context.",ce["only-available-in-sw"]="This method is available in a service worker context.",ce["permission-default"]="The notification permission was not granted and dismissed instead.",ce["permission-blocked"]="The notification permission was not granted and blocked instead.",ce["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",ce["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",ce["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",ce["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",ce["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",ce["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",ce["token-update-no-token"]="FCM returned no token when updating the user to push.",ce["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",ce["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",ce["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",ce["invalid-vapid-key"]="The public VAPID key must be a string.",ce["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",ce),fe=new i["ErrorFactory"]("messaging","Messaging",he),de="/firebase-messaging-sw.js",pe="/firebase-cloud-messaging-push-scope",ve="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ge="https://fcmregistrations.googleapis.com/v1",ye="FCM_MSG",me="FirebaseMessaging: ",be="google.c.a.e",_e="google.c.a.c_id",we="google.c.a.ts",Ie="google.c.a.c_l",Te=1e3,Ee=3e3;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Se(t){var e=new Uint8Array(t),n=btoa(String.fromCharCode.apply(String,ue([],se(e))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oe(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["PUSH_RECEIVED"]="push-received",t["NOTIFICATION_CLICKED"]="notification-clicked"})(le||(le={}));var Ce="fcm_token_details_db",ke=5,Ae="fcm_token_object_Store";function Ne(t){return ie(this,void 0,void 0,(function(){var e,n,r,i,o=this;return oe(this,(function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=a.sent(),n=e.map((function(t){return t.name})),!n.includes(Ce))return[2,null];a.label=2;case 2:return r=null,[4,Object(L["openDb"])(Ce,ke,(function(e){return ie(o,void 0,void 0,(function(){var n,i,o,a;return oe(this,(function(s){switch(s.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains(Ae)?(n=e.transaction.objectStore(Ae),[4,n.index("fcmSenderId").get(t)]):[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===e.oldVersion){if(o=i,!o.auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:Se(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(o=i,r={token:o.fcmToken,createTime:o.createTime,subscriptionOptions:{auth:Se(o.auth),p256dh:Se(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:Se(o.vapidKey)}});return[2]}}))}))}))];case 3:return i=a.sent(),i.close(),[4,Object(L["deleteDb"])(Ce)];case 4:return a.sent(),[4,Object(L["deleteDb"])("fcm_vapid_details_db")];case 5:return a.sent(),[4,Object(L["deleteDb"])("undefined")];case 6:return a.sent(),[2,xe(r)?r:null]}}))}))}function xe(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe="firebase-messaging-database",Re=1,De="firebase-messaging-store",je=null;function Le(){return je||(je=Object(L["openDb"])(Pe,Re,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(De)}}))),je}function Me(t){return ie(this,void 0,void 0,(function(){var e,n,r,i;return oe(this,(function(o){switch(o.label){case 0:return e=qe(t),[4,Le()];case 1:return n=o.sent(),[4,n.transaction(De).objectStore(De).get(e)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,Ne(t.appConfig.senderId)];case 4:return i=o.sent(),i?[4,Fe(t,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}}))}))}function Fe(t,e){return ie(this,void 0,void 0,(function(){var n,r,i;return oe(this,(function(o){switch(o.label){case 0:return n=qe(t),[4,Le()];case 1:return r=o.sent(),i=r.transaction(De,"readwrite"),[4,i.objectStore(De).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function Ue(t){return ie(this,void 0,void 0,(function(){var e,n,r;return oe(this,(function(i){switch(i.label){case 0:return e=qe(t),[4,Le()];case 1:return n=i.sent(),r=n.transaction(De,"readwrite"),[4,r.objectStore(De).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function qe(t){var e=t.appConfig;return e.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return oe(this,(function(c){switch(c.label){case 0:return[4,He(t)];case 1:n=c.sent(),r=Ge(e),i={method:"POST",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(We(t.appConfig),i)];case 3:return a=c.sent(),[4,a.json()];case 4:return o=c.sent(),[3,6];case 5:throw s=c.sent(),fe.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,fe.create("token-subscribe-failed",{errorInfo:u});if(!o.token)throw fe.create("token-subscribe-no-token");return[2,o.token]}}))}))}function Be(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return oe(this,(function(c){switch(c.label){case 0:return[4,He(t)];case 1:n=c.sent(),r=Ge(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(We(t.appConfig)+"/"+e.token,i)];case 3:return a=c.sent(),[4,a.json()];case 4:return o=c.sent(),[3,6];case 5:throw s=c.sent(),fe.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,fe.create("token-update-failed",{errorInfo:u});if(!o.token)throw fe.create("token-update-no-token");return[2,o.token]}}))}))}function Ke(t,e){return ie(this,void 0,void 0,(function(){var n,r,i,o,a,s;return oe(this,(function(u){switch(u.label){case 0:return[4,He(t)];case 1:n=u.sent(),r={method:"DELETE",headers:n},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(We(t.appConfig)+"/"+e,r)];case 3:return i=u.sent(),[4,i.json()];case 4:if(o=u.sent(),o.error)throw a=o.error.message,fe.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw s=u.sent(),fe.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function We(t){var e=t.projectId;return ge+"/projects/"+e+"/registrations"}function He(t){var e=t.appConfig,n=t.installations;return ie(this,void 0,void 0,(function(){var t;return oe(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function Ge(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==ve&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze=6048e5;function $e(t,e,n){return ie(this,void 0,void 0,(function(){var r,i,o,a;return oe(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw fe.create("permission-blocked");return[4,Je(e,n)];case 1:return r=s.sent(),[4,Me(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Se(r.getKey("auth")),p256dh:Se(r.getKey("p256dh"))},i?[3,3]:[2,Xe(t,o)];case 3:if(Ze(i.subscriptionOptions,o))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,Ke(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,Xe(t,o)];case 8:return Date.now()>=i.createTime+ze?[2,Ye({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}}))}))}function Qe(t,e){return ie(this,void 0,void 0,(function(){var n,r;return oe(this,(function(i){switch(i.label){case 0:return[4,Me(t)];case 1:return n=i.sent(),n?[4,Ke(t,n.token)]:[3,4];case 2:return i.sent(),[4,Ue(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}}))}))}function Ye(t,e,n){return ie(this,void 0,void 0,(function(){var r,i,o;return oe(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,Be(e,t)];case 1:return r=a.sent(),i=re(re({},t),{token:r,createTime:Date.now()}),[4,Fe(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,Qe(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function Xe(t,e){return ie(this,void 0,void 0,(function(){var n,r;return oe(this,(function(i){switch(i.label){case 0:return[4,Ve(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Fe(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function Je(t,e){return ie(this,void 0,void 0,(function(){var n;return oe(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oe(e)})]}}))}))}function Ze(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){var e={from:t.from,collapseKey:t.collapse_key};return en(e,t),nn(e,t),rn(e,t),e}function en(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}function nn(t,e){e.data&&(t.data=e.data)}function rn(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){return"object"===typeof t&&!!t&&_e in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!==typeof t)throw fe.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return ie(this,void 0,void 0,(function(){var n;return oe(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Me(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:ve,r.label=2;case 2:return[2,$e(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Qe(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw fe.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw fe.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw fe.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw fe.create("only-available-in-window")},t.prototype.onMessage=function(){throw fe.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw fe.create("only-available-in-window")},t.prototype.onPush=function(t){return ie(this,void 0,void 0,(function(){var e,n,r,i;return oe(this,(function(o){switch(o.label){case 0:return e=cn(t),e?[4,dn()]:(console.debug(me+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return n=o.sent(),hn(n)?[2,fn(n,e)]:(r=!1,e.notification?[4,pn(un(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=tn(e),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,an(Te)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return ie(this,void 0,void 0,(function(){var r,i;return oe(this,(function(o){switch(o.label){case 0:return r=t.newSubscription,r?[3,2]:[4,Qe(this.firebaseDependencies,self.registration)];case 1:return o.sent(),[2];case 2:return[4,Me(this.firebaseDependencies)];case 3:return i=o.sent(),[4,Qe(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,$e(this.firebaseDependencies,self.registration,null!==(n=null===(e=null===i||void 0===i?void 0:i.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:ve)];case 5:return o.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return ie(this,void 0,void 0,(function(){var r,i,o,a,s;return oe(this,(function(u){switch(u.label){case 0:return r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n[ye],r?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),i=vn(r),i?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,ln(o)]):[2]):[2];case 1:return s=u.sent(),s?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,an(Ee)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=le.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},t}();function un(t){var e,n=re({},t.notification);return n.data=(e={},e[ye]=t,e),n}function cn(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}function ln(t){return ie(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return oe(this,(function(u){switch(u.label){case 0:return[4,dn()];case 1:e=u.sent();try{for(n=ae(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){a={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function hn(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}function fn(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=le.PUSH_RECEIVED;try{for(var i=ae(t),o=i.next();!o.done;o=i.next()){var a=o.value;a.postMessage(e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function dn(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function pn(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}function vn(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(on(t.data)?self.location.origin:null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return ie(this,void 0,void 0,(function(){var e,n;return oe(this,(function(r){switch(r.label){case 0:return e=t.data,e.isFirebaseMessaging?(this.onMessageCallback&&e.messageType===le.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(mn(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),n=e.data,on(n)&&"1"===n[be]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return ie(this,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw fe.create("permission-blocked");return[4,this.updateVapidKey(null===t||void 0===t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null===t||void 0===t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,$e(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return ie(this,void 0,void 0,(function(){return oe(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=ve),[2]}))}))},t.prototype.updateSwReg=function(t){return ie(this,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw fe.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return ie(this,void 0,void 0,(function(){var t,e;return oe(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(de,{scope:pe})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),fe.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return ie(this,void 0,void 0,(function(){return oe(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Qe(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return ie(this,void 0,void 0,(function(){var t;return oe(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if(t=e.sent(),"granted"===t)return[2];throw"denied"===t?fe.create("permission-blocked"):fe.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw fe.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw fe.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw fe.create("invalid-sw-registration");if(this.swRegistration)throw fe.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw fe.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw fe.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return ie(this,void 0,void 0,(function(){var n,r;return oe(this,(function(i){switch(i.label){case 0:return n=yn(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r=i.sent(),r.logEvent(n,{message_id:e[_e],message_name:e[Ie],message_time:e[we],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function yn(t){switch(t){case le.NOTIFICATION_CLICKED:return"notification_open";case le.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function mn(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t){var e,n;if(!t||!t.options)throw _n("App Configuration Object");if(!t.name)throw _n("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=t.options;try{for(var o=ae(r),a=o.next();!a.done;a=o.next()){var s=a.value;if(!i[s])throw _n(s)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function _n(t){return fe.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn="messaging";function In(t){var e=t.getProvider("app").getImmediate(),n=bn(e),r=t.getProvider("installations").getImmediate(),i=t.getProvider("analytics-internal"),o={app:e,appConfig:n,installations:r,analyticsProvider:i};if(!En())throw fe.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new sn(o):new gn(o)}var Tn={isSupported:En};function En(){return self&&"ServiceWorkerGlobalScope"in self?On():Sn()}function Sn(){return"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function On(){return"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */r["default"].INTERNAL.registerComponent(new f["Component"](wn,In,"PUBLIC").setServiceProps(Tn));var Cn=function(t,e){return Cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Cn(t,e)};function kn(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Cn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var An=function(){return An=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},An.apply(this,arguments)};function Nn(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function xn(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;function Pn(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Rn="firebasestorage.googleapis.com",Dn="storageBucket",jn=12e4,Ln=6e5,Mn=function(t){function e(n,r){var i=t.call(this,Fn(n),"Firebase Storage: "+r+" ("+Fn(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return kn(e,t),e.prototype._codeEquals=function(t){return Fn(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(i["FirebaseError"]);function Fn(t){return"storage/"+t}function Un(){var t="An unknown error occurred, please check the error payload for server response.";return new Mn("unknown",t)}function qn(t){return new Mn("object-not-found","Object '"+t+"' does not exist.")}function Vn(t){return new Mn("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Bn(){var t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mn("unauthenticated",t)}function Kn(){return new Mn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Wn(t){return new Mn("unauthorized","User does not have permission to access '"+t+"'.")}function Hn(){return new Mn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Gn(){return new Mn("canceled","User canceled the upload/download.")}function zn(t){return new Mn("invalid-url","Invalid URL '"+t+"'.")}function $n(t){return new Mn("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function Qn(){return new Mn("no-default-bucket","No default bucket found. Did you set the '"+Dn+"' property when initializing the app?")}function Yn(){return new Mn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Xn(){return new Mn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function Jn(){return new Mn("no-download-url","The given file does not have any download URLs.")}function Zn(t){return new Mn("invalid-argument",t)}function tr(){return new Mn("app-deleted","The Firebase app was deleted.")}function er(t){return new Mn("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nr(t,e){return new Mn("invalid-format","String does not match format '"+t+"': "+e)}function rr(t){throw new Mn("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ir={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},or=function(){function t(t,e){this.data=t,this.contentType=e||null}return t}();function ar(t,e){switch(t){case ir.RAW:return new or(sr(e));case ir.BASE64:case ir.BASE64URL:return new or(cr(t,e));case ir.DATA_URL:return new or(hr(e),fr(e))}throw Un()}function sr(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<t.length-1&&56320===(64512&t.charCodeAt(n+1));if(i){var o=r,a=t.charCodeAt(++n);r=65536|(1023&o)<<10|1023&a,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189)}else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ur(t){var e;try{e=decodeURIComponent(t)}catch(n){throw nr(ir.DATA_URL,"Malformed data URL.")}return sr(e)}function cr(t,e){switch(t){case ir.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r){var i=n?"-":"_";throw nr(t,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case ir.BASE64URL:var o=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(o||a){i=o?"+":"/";throw nr(t,"Invalid character '"+i+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}var s;try{s=atob(e)}catch(l){throw nr(t,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}var lr=function(){function t(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw nr(ir.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=dr(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}return t}();function hr(t){var e=new lr(t);return e.base64?cr(ir.BASE64,e.rest):ur(e.rest)}function fr(t){var e=new lr(t);return e.contentType}function dr(t,e){var n=t.length>=e.length;return!!n&&t.substring(t.length-e.length)===e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr,vr={STATE_CHANGED:"state_changed"},gr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yr(t){switch(t){case"running":case"pausing":case"canceling":return gr.RUNNING;case"paused":return gr.PAUSED;case"success":return gr.SUCCESS;case"canceled":return gr.CANCELED;case"error":return gr.ERROR;default:return gr.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["NO_ERROR"]=0]="NO_ERROR",t[t["NETWORK_ERROR"]=1]="NETWORK_ERROR",t[t["ABORT"]=2]="ABORT"})(pr||(pr={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mr=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=pr.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=pr.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=pr.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw rr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw rr("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw rr("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw rr("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),br=function(){function t(){}return t.prototype.createXhrIo=function(){return new mr},t}(),_r=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(i){return new t(e,"")}if(""===r.path)return r;throw $n(e)},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function o(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}var a="(/(.*))?$",s=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function c(t){t.path_=decodeURIComponent(t.path)}for(var l="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",d=new RegExp("^https?://"+h+"/"+l+"/b/"+i+"/o"+f,"i"),p={bucket:1,path:3},v=n===Rn?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp("^https?://"+v+"/"+i+"/"+g,"i"),m={bucket:1,path:2},b=[{regex:s,indices:u,postModify:o},{regex:d,indices:p,postModify:c},{regex:y,indices:m,postModify:c}],_=0;_<b.length;_++){var w=b[_],I=w.regex.exec(e);if(I){var T=I[w.indices.bucket],E=I[w.indices.path];E||(E=""),r=new t(T,E),w.postModify(r);break}}if(null==r)throw zn(e);return r},t}(),wr=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ir(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,s())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,Pn([null,t],e));else{var i,h=s()||o;if(h)c.call.apply(c,Pn([null,t],e));else r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i)}}var f=!1;function d(t){f||(f=!0,u||(null!==i?(t||(a=2),clearTimeout(i),l(0)):t||(a=1)))}return l(0),setTimeout((function(){o=!0,d(!0)}),n),d}function Tr(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t){return void 0!==t}function Sr(t){return"function"===typeof t}function Or(t){return"object"===typeof t&&!Array.isArray(t)}function Cr(t){return"string"===typeof t||t instanceof String}function kr(t){return Ar()&&t instanceof Blob}function Ar(){return"undefined"!==typeof Blob}function Nr(t,e,n,r){if(r<e)throw Zn("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Zn("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,e){var n=e.match(/^(\w+):\/\/.+/),r=null===n||void 0===n?void 0:n[1],i=e;return null==r&&(i="https://"+e),i+"/v0"+t}function Pr(t){var e=encodeURIComponent,n="?";for(var r in t)if(t.hasOwnProperty(r)){var i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){if(n)e(!1,new Dr(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null,n=n;var r=n.getErrorCode()===pr.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Dr(a,n))}else{var s=n.getErrorCode()===pr.ABORT;e(!1,new Dr(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}function n(e,n){var r=t.resolve_,i=t.reject_,o=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(o,o.getResponseText());Er(a)?r(a):r()}catch(u){i(u)}else if(null!==o){var s=Un();s.serverResponse=o.getResponseText(),t.errorCallback_?i(t.errorCallback_(o,s)):i(s)}else if(n.canceled){s=t.appDelete_?tr():Gn();i(s)}else{s=Hn();i(s)}}this.canceled_?n(!1,new Dr(!1,null,!0)):this.backoffId_=Ir(e,n,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&Tr(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=[408,429],r=-1!==n.indexOf(t),i=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||i},t}(),Dr=function(){function t(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}return t}();function jr(t,e){null!==e&&e.length>0&&(t["Authorization"]="Firebase "+e)}function Lr(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}function Mr(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Fr(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}function Ur(t,e,n,r,i,o){var a=Pr(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return Mr(u,e),jr(u,n),Lr(u,o),Fr(u,r),new Rr(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Vr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=qr();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Ar())return new Blob(t);throw new Mn("unsupported-environment","This browser doesn't seem to support creating Blobs")}function Br(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kr=function(){function t(t,e){var n=0,r="";kr(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(kr(this.data_)){var r=this.data_,i=Br(r,e,n);return null===i?null:new t(i)}var o=new Uint8Array(this.data_.buffer,e,n-e);return new t(o,!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Ar()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Vr.apply(null,r))}var i=e.map((function(t){return Cr(t)?ar(ir.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(t){var e;try{e=JSON.parse(t)}catch(n){return null}return Or(e)?e:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t){if(0===t.length)return null;var e=t.lastIndexOf("/");if(-1===e)return"";var n=t.slice(0,e);return n}function Gr(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function zr(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,e){return e}var Qr=function(){function t(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||$r}return t}(),Yr=null;function Xr(t){return!Cr(t)||t.length<2?t:zr(t)}function Jr(){if(Yr)return Yr;var t=[];function e(t,e){return Xr(e)}t.push(new Qr("bucket")),t.push(new Qr("generation")),t.push(new Qr("metageneration")),t.push(new Qr("name","fullPath",!0));var n=new Qr("name");function r(t,e){return void 0!==e?Number(e):e}n.xform=e,t.push(n);var i=new Qr("size");return i.xform=r,t.push(i),t.push(new Qr("timeCreated")),t.push(new Qr("updated")),t.push(new Qr("md5Hash",null,!0)),t.push(new Qr("cacheControl",null,!0)),t.push(new Qr("contentDisposition",null,!0)),t.push(new Qr("contentEncoding",null,!0)),t.push(new Qr("contentLanguage",null,!0)),t.push(new Qr("contentType",null,!0)),t.push(new Qr("metadata","customMetadata",!0)),Yr=t,Yr}function Zr(t,e){function n(){var n=t["bucket"],r=t["fullPath"],i=new _r(n,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function ti(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return Zr(r,t),r}function ei(t,e,n){var r=Wr(e);if(null===r)return null;var i=r;return ti(t,i,n)}function ni(t,e,n){var r=Wr(e);if(null===r)return null;if(!Cr(r["downloadTokens"]))return null;var i=r["downloadTokens"];if(0===i.length)return null;var o=encodeURIComponent,a=i.split(","),s=a.map((function(e){var r=t["bucket"],i=t["fullPath"],a="/b/"+o(r)+"/o/"+o(i),s=xr(a,n),u=Pr({alt:"media",token:e});return s+u}));return s[0]}function ri(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii="prefixes",oi="items";function ai(t,e,n){var r={prefixes:[],items:[],nextPageToken:n["nextPageToken"]};if(n[ii])for(var i=0,o=n[ii];i<o.length;i++){var a=o[i],s=a.replace(/\/$/,""),u=t._makeStorageReference(new _r(e,s));r.prefixes.push(u)}if(n[oi])for(var c=0,l=n[oi];c<l.length;c++){var h=l[c];u=t._makeStorageReference(new _r(e,h["name"]));r.items.push(u)}return r}function si(t,e,n){var r=Wr(n);if(null===r)return null;var i=r;return ai(t,e,i)}var ui=function(){function t(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(t){if(!t)throw Un()}function li(t,e){function n(n,r){var i=ei(t,r,e);return ci(null!==i),i}return n}function hi(t,e){function n(n,r){var i=si(t,e,r);return ci(null!==i),i}return n}function fi(t,e){function n(n,r){var i=ei(t,r,e);return ci(null!==i),ni(i,r,t.host)}return n}function di(t){function e(e,n){var r;return r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?Kn():Bn():402===e.getStatus()?Vn(t.bucket):403===e.getStatus()?Wn(t.path):n,r.serverResponse=n.serverResponse,r}return e}function pi(t){var e=di(t);function n(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=qn(t.path)),i.serverResponse=r.serverResponse,i}return n}function vi(t,e,n){var r=e.fullServerUrl(),i=xr(r,t.host),o="GET",a=t.maxOperationRetryTime,s=new ui(i,o,li(t,n),a);return s.errorHandler=pi(e),s}function gi(t,e,n,r,i){var o={};e.isRoot?o["prefix"]="":o["prefix"]=e.path+"/",n&&n.length>0&&(o["delimiter"]=n),r&&(o["pageToken"]=r),i&&(o["maxResults"]=i);var a=e.bucketOnlyServerUrl(),s=xr(a,t.host),u="GET",c=t.maxOperationRetryTime,l=new ui(s,u,hi(t,e.bucket),c);return l.urlParams=o,l.errorHandler=di(e),l}function yi(t,e,n){var r=e.fullServerUrl(),i=xr(r,t.host),o="GET",a=t.maxOperationRetryTime,s=new ui(i,o,fi(t,n),a);return s.errorHandler=pi(e),s}function mi(t,e,n,r){var i=e.fullServerUrl(),o=xr(i,t.host),a="PATCH",s=ri(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,l=new ui(o,a,li(t,r),c);return l.headers=u,l.body=s,l.errorHandler=pi(e),l}function bi(t,e){var n=e.fullServerUrl(),r=xr(n,t.host),i="DELETE",o=t.maxOperationRetryTime;function a(t,e){}var s=new ui(r,i,a,o);return s.successCodes=[200,204],s.errorHandler=pi(e),s}function _i(t,e){return t&&t["contentType"]||e&&e.type()||"application/octet-stream"}function wi(t,e,n){var r=Object.assign({},n);return r["fullPath"]=t.path,r["size"]=e.size(),r["contentType"]||(r["contentType"]=_i(null,e)),r}function Ii(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function s(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}var u=s();a["Content-Type"]="multipart/related; boundary="+u;var c=wi(e,r,i),l=ri(c,n),h="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+u+"\r\nContent-Type: "+c["contentType"]+"\r\n\r\n",f="\r\n--"+u+"--",d=Kr.getBlob(h,r,f);if(null===d)throw Yn();var p={name:c["fullPath"]},v=xr(o,t.host),g="POST",y=t.maxUploadRetryTime,m=new ui(v,g,li(t,n),y);return m.urlParams=p,m.headers=a,m.body=d.uploadData(),m.errorHandler=di(e),m}var Ti=function(){function t(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}return t}();function Ei(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(i){ci(!1)}var r=e||["active"];return ci(!!n&&-1!==r.indexOf(n)),n}function Si(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=wi(e,r,i),s={name:a["fullPath"]},u=xr(o,t.host),c="POST",l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a["contentType"],"Content-Type":"application/json; charset=utf-8"},h=ri(a,n),f=t.maxUploadRetryTime;function d(t){var e;Ei(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){ci(!1)}return ci(Cr(e)),e}var p=new ui(u,c,d,f);return p.urlParams=s,p.headers=l,p.body=h,p.errorHandler=di(e),p}function Oi(t,e,n,r){var i={"X-Goog-Upload-Command":"query"};function o(t){var e=Ei(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){ci(!1)}n||ci(!1);var i=Number(n);return ci(!isNaN(i)),new Ti(i,r.size(),"final"===e)}var a="POST",s=t.maxUploadRetryTime,u=new ui(n,a,o,s);return u.headers=i,u.errorHandler=di(e),u}var Ci=262144;function ki(t,e,n,r,i,o,a,s){var u=new Ti(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw Xn();var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d=l===c?"upload, finalize":"upload",p={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":u.current},v=r.slice(h,f);if(null===v)throw Yn();function g(t,n){var i,a=Ei(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?li(e,o)(t,n):null,new Ti(s,c,"final"===a,i)}var y="POST",m=e.maxUploadRetryTime,b=new ui(n,y,g,m);return b.headers=p,b.body=v.uploadData(),b.progressCallback=s||null,b.errorHandler=di(t),b}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai=function(){function t(t,e,n){var r=Sr(t)||null!=e||null!=n;if(r)this.next=t,this.error=e,this.complete=n;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xi=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Jr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused");break}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=Si(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=Oi(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Ci*this._chunkMultiplier,n=new Ti(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=ki(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(u){return t._error=u,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){var t=Ci*this._chunkMultiplier;t<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=vi(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=Ii(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":this._state=t,void 0!==this._request&&this._request.cancel();break;case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Gn(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=yr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Ai(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise();var e=this._observers.slice();e.forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(yr(this._state)){case gr.SUCCESS:Ni(this._resolve.bind(null,this.snapshot))();break;case gr.CANCELED:case gr.ERROR:var e=this._reject;Ni(e.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){var e=yr(this._state);switch(e){case gr.RUNNING:case gr.PAUSED:t.next&&Ni(t.next.bind(t,this.snapshot))();break;case gr.SUCCESS:t.complete&&Ni(t.complete.bind(t))();break;case gr.CANCELED:case gr.ERROR:t.error&&Ni(t.error.bind(t,this._error))();break;default:t.error&&Ni(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Pi=function(){function t(t,e){this._service=t,this._location=e instanceof _r?e:_r.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new _r(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return zr(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=Hr(this._location.path);if(null===e)return null;var n=new _r(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw er(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new xi(t,new Kr(e),n)}function Di(t){var e={prefixes:[],items:[]};return ji(t,e).then((function(){return e}))}function ji(t,e,n){return Nn(this,void 0,void 0,(function(){var r,i,o,a;return xn(this,(function(s){switch(s.label){case 0:return r={pageToken:n},[4,Li(t,r)];case 1:return i=s.sent(),(o=e.prefixes).push.apply(o,i.prefixes),(a=e.items).push.apply(a,i.items),null==i.nextPageToken?[3,3]:[4,ji(t,e,i.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Li(t,e){return Nn(this,void 0,void 0,(function(){var n,r;return xn(this,(function(i){switch(i.label){case 0:return null!=e&&"number"===typeof e.maxResults&&Nr("options.maxResults",1,1e3,e.maxResults),n=e||{},r=gi(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function Mi(t){return Nn(this,void 0,void 0,(function(){var e;return xn(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=vi(t.storage,t._location,Jr()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Fi(t,e){return Nn(this,void 0,void 0,(function(){var n;return xn(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=mi(t.storage,t._location,e,Jr()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function Ui(t){return Nn(this,void 0,void 0,(function(){var e;return xn(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=yi(t.storage,t._location,Jr()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw Jn();return t}))]}}))}))}function qi(t){return Nn(this,void 0,void 0,(function(){var e;return xn(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=bi(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Vi(t,e){var n=Gr(t._location.path,e),r=new _r(t._location.bucket,n);return new Pi(t.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t){return/^[A-Za-z]+:\/\//.test(t)}function Ki(t,e){return new Pi(t,e)}function Wi(t,e){if(t instanceof $i){var n=t;if(null==n._bucket)throw Qn();var r=new Pi(n,n._bucket);return null!=e?Wi(r,e):r}if(void 0!==e){if(e.includes(".."))throw Zn('`path` param cannot contain ".."');return Vi(t,e)}return t}function Hi(t,e){if(e&&Bi(e)){if(t instanceof $i)return Ki(t,e);throw Zn("To use ref(service, url), the first argument must be a Storage instance.")}return Wi(t,e)}function Gi(t,e){var n=null===e||void 0===e?void 0:e[Dn];return null==n?null:_r.makeFromBucketSpec(n,t)}function zi(t,e,n){t.host="http://"+e+":"+n}var $i=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Rn,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jn,this._maxUploadRetryTime=Ln,this._requests=new Set,this._bucket=null!=i?_r.makeFromBucketSpec(i,this._host):Gi(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=_r.makeFromBucketSpec(this._url,t):this._bucket=Gi(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Nr("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Nr("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Nn(this,void 0,void 0,(function(){var t,e;return xn(this,(function(n){switch(n.label){case 0:return t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:if(e=n.sent(),null!==e)return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return Nn(this,void 0,void 0,(function(){var t,e;return xn(this,(function(n){switch(n.label){case 0:return t=this._appCheckProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:return e=n.sent(),[2,e.token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Pi(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new wr(tr());var i=Ur(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return Nn(this,void 0,void 0,(function(){var e,n,r;return xn(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t,e,n){return t=Object(i["getModularInstance"])(t),Ri(t,e,n)}function Yi(t){return t=Object(i["getModularInstance"])(t),Mi(t)}function Xi(t,e){return t=Object(i["getModularInstance"])(t),Fi(t,e)}function Ji(t,e){return t=Object(i["getModularInstance"])(t),Li(t,e)}function Zi(t){return t=Object(i["getModularInstance"])(t),Di(t)}function to(t){return t=Object(i["getModularInstance"])(t),Ui(t)}function eo(t){return t=Object(i["getModularInstance"])(t),qi(t)}function no(t,e){return t=Object(i["getModularInstance"])(t),Hi(t,e)}function ro(t,e){return Vi(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var io=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),oo=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new io(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new io(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new io(t,i,i._ref))}:{next:e.next?function(t){return e.next(new io(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),ao=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new so(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new so(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),so=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=ro(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new oo(Qi(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=ir.RAW),this._throwIfRoot("putString");var r=ar(e,t),i=An({},n);return null==i["contentType"]&&null!=r.contentType&&(i["contentType"]=r.contentType),new oo(new xi(this._delegate,new Kr(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return Zi(this._delegate).then((function(e){return new ao(e,t.storage)}))},t.prototype.list=function(t){var e=this;return Ji(this._delegate,t||void 0).then((function(t){return new ao(t,e.storage)}))},t.prototype.getMetadata=function(){return Yi(this._delegate)},t.prototype.updateMetadata=function(t){return Xi(this._delegate,t)},t.prototype.getDownloadURL=function(){return to(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),eo(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw er(t)},t}(),uo=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Bi(t))throw Zn("ref() expected a child path but got a URL, use refFromURL instead.");return new so(no(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Bi(t))throw Zn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_r.makeFromUrl(t,this._delegate.host)}catch(e){throw Zn("refFromUrl() expected a valid full URL but got an invalid one.")}return new so(no(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){zi(this._delegate,t,e)},t}(),co="@firebase/storage",lo="0.5.2",ho="storage";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t,e){var n=e.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal"),s=new uo(i,new $i(i,o,a,new br,n,r["default"].SDK_VERSION));return s}function po(t){var e={TaskState:gr,TaskEvent:vr,StringFormat:ir,Storage:$i,Reference:so};t.INTERNAL.registerComponent(new f["Component"](ho,fo,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(co,lo)}po(r["default"]);var vo=function(){return vo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vo.apply(this,arguments)};Object.create;function go(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create;var yo,mo,bo,_o="@firebase/performance",wo="0.4.12",Io=wo,To="FB-PERF-TRACE-START",Eo="FB-PERF-TRACE-STOP",So="FB-PERF-TRACE-MEASURE",Oo="_wt_",Co="_fp",ko="_fcp",Ao="_fid",No="@firebase/performance/config",xo="@firebase/performance/configexpire",Po="performance",Ro="Performance",Do=(yo={},yo["trace started"]="Trace {$traceName} was started before.",yo["trace stopped"]="Trace {$traceName} is not running.",yo["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",yo["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",yo["no window"]="Window is not available.",yo["no app id"]="App id is not available.",yo["no project id"]="Project id is not available.",yo["no api key"]="Api key is not available.",yo["invalid cc log"]="Attempted to queue invalid cc event",yo["FB not default"]="Performance can only start when Firebase app instance is the default one.",yo["RC response not ok"]="RC response is not ok",yo["invalid attribute name"]="Attribute name {$attributeName} is invalid.",yo["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",yo["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",yo["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",yo),jo=new i["ErrorFactory"](Po,Ro,Do),Lo=new o["Logger"](Ro);Lo.logLevel=o["LogLevel"].INFO;var Mo,Fo=function(){function t(t){if(this.window=t,!t)throw jo.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(i["isIndexedDBAvailable"])()||(Lo.info("IndexedDB is not supported by current browswer"),!1):(Lo.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}}));n.observe({entryTypes:[t]})}},t.getInstance=function(){return void 0===mo&&(mo=new t(bo)),mo},t}();function Uo(t){bo=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t,e){var n=t.length-e.length;if(n<0||n>1)throw jo.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vo,Bo,Ko=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=qo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=qo("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw jo.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw jo.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw jo.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===Mo&&(Mo=new t),Mo},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(){var t=Ko.getInstance().installationsService.getId();return t.then((function(t){Vo=t})),t}function Ho(){return Vo}function Go(){var t=Ko.getInstance().installationsService.getToken();return t.then((function(t){})),t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["UNKNOWN"]=0]="UNKNOWN",t[t["VISIBLE"]=1]="VISIBLE",t[t["HIDDEN"]=2]="HIDDEN"})(Bo||(Bo={}));var zo=["firebase_","google_","ga_"],$o=new RegExp("^[a-zA-Z]\\w*$"),Qo=40,Yo=100;function Xo(){var t=Fo.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function Jo(){var t=Fo.getInstance().document,e=t.visibilityState;switch(e){case"visible":return Bo.VISIBLE;case"hidden":return Bo.HIDDEN;default:return Bo.UNKNOWN}}function Zo(){var t=Fo.getInstance().navigator,e=t.connection,n=e&&e.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function ta(t){if(0===t.length||t.length>Qo)return!1;var e=zo.some((function(e){return t.startsWith(e)}));return!e&&!!t.match($o)}function ea(t){return 0!==t.length&&t.length<=Yo}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var na="0.0.1",ra={loggingEnabled:!0},ia="FIREBASE_INSTALLATIONS_AUTH";function oa(t){var e=aa();return e?(la(e),Promise.resolve()):ca(t).then(la).then((function(t){return sa(t)}),(function(){}))}function aa(){var t=Fo.getInstance().localStorage;if(t){var e=t.getItem(xo);if(e&&ha(e)){var n=t.getItem(No);if(n)try{var r=JSON.parse(n);return r}catch(i){return}}}}function sa(t){var e=Fo.getInstance().localStorage;t&&e&&(e.setItem(No,JSON.stringify(t)),e.setItem(xo,String(Date.now()+60*Ko.getInstance().configTimeToLive*60*1e3)))}var ua="Could not fetch config, will use default configs";function ca(t){return Go().then((function(e){var n=Ko.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+Ko.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:ia+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:Ko.getInstance().getAppId(),app_version:Io,sdk_version:na})});return fetch(i).then((function(t){if(t.ok)return t.json();throw jo.create("RC response not ok")}))})).catch((function(){Lo.info(ua)}))}function la(t){if(!t)return t;var e=Ko.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=ra.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=fa(e.tracesSamplingRate),e.logNetworkAfterSampling=fa(e.networkRequestsSamplingRate),t}function ha(t){return Number(t)>Date.now()}function fa(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var da,pa=1;function va(){return pa=2,da=da||ya(),da}function ga(){return 3===pa}function ya(){return ma().then((function(){return Wo()})).then((function(t){return oa(t)})).then((function(){return ba()}),(function(){return ba()}))}function ma(){var t=Fo.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}function ba(){pa=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a,wa=1e4,Ia=5500,Ta=3,Ea=1e3,Sa=Ta,Oa=[],Ca=!1;function ka(){Ca||(Aa(Ia),Ca=!0)}function Aa(t){setTimeout((function(){if(0!==Sa)return Oa.length?void Na():Aa(wa)}),t)}function Na(){var t=Oa.splice(0,Ea),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ko.getInstance().logSource,log_event:e};xa(n,t).catch((function(){Oa=go(go([],t),Oa),Sa--,Lo.info("Tries left: "+Sa+"."),Aa(wa)}))}function xa(t,e){return Pa(t).then((function(t){return t.ok||Lo.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=wa;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(Oa=go(go([],e),Oa),Lo.info("Retry transport request later.")),Sa=Ta,Aa(r)}))}function Pa(t){var e=Ko.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function Ra(t){if(!t.eventTime||!t.message)throw jo.create("invalid cc log");Oa=go(go([],Oa),[t])}function Da(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);Ra({message:r,eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t,e){_a||(_a=Da(Ua)),_a(t,e)}function La(t){var e=Ko.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&Fo.getInstance().requiredApisAvailable()&&(t.isAuto&&Jo()!==Bo.VISIBLE||(ga()?Ma(t):va().then((function(){return Ma(t)}),(function(){return Ma(t)}))))}function Ma(t){if(Ho()){var e=Ko.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return ja(t,1)}),0)}}function Fa(t){var e=Ko.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return ja(t,0)}),0)}}function Ua(t,e){return 0===e?qa(t):Va(t)}function qa(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:Ba(),network_request_metric:e};return JSON.stringify(n)}function Va(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Ba(),trace_metric:e};return JSON.stringify(r)}function Ba(){return{google_app_id:Ko.getInstance().getAppId(),app_instance_id:Ho(),web_app_info:{sdk_version:Io,page_url:Fo.getInstance().getUrl(),service_worker_status:Xo(),visibility_state:Jo(),effective_connection_type:Zo()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ka=100,Wa="_",Ha=[Co,ko,Ao];function Ga(t,e){return!(0===t.length||t.length>Ka)&&(e&&e.startsWith(Oo)&&Ha.indexOf(t)>-1||!t.startsWith(Wa))}function za(t){var e=Math.floor(t);return e<t&&Lo.info("Metric value should be an Integer, setting the value as : "+e+"."),e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $a=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=Fo.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=To+"-"+this.randomId+"-"+this.name,this.traceStopMark=Eo+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||So+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw jo.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw jo.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),La(this)},t.prototype.record=function(t,e,n){if(t<=0)throw jo.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw jo.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=vo({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}La(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!Ga(t,this.name))throw jo.create("invalid custom metric name",{customMetricName:t});this.counters[t]=za(e)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=ta(t),r=ea(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw jo.create("invalid attribute name",{attributeName:t});if(!r)throw jo.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return vo({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=Fo.getInstance().getUrl();if(i){var o=new t(Oo+i,!0),a=Math.floor(1e3*Fo.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));var s="first-paint",u="first-contentful-paint";if(n){var c=n.find((function(t){return t.name===s}));c&&c.startTime&&o.putMetric(Co,Math.floor(1e3*c.startTime));var l=n.find((function(t){return t.name===u}));l&&l.startTime&&o.putMetric(ko,Math.floor(1e3*l.startTime)),r&&o.putMetric(Ao,Math.floor(1e3*r))}La(o)}},t.createUserTimingTrace=function(e){var n=new t(e,!1,e);La(n)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){var e=t;if(e&&void 0!==e.responseStart){var n=Fo.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime)),a=e.name&&e.name.split("?")[0],s={url:a,responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};Fa(s)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ya=5e3;function Xa(){Ho()&&(setTimeout((function(){return Za()}),0),setTimeout((function(){return Ja()}),0),setTimeout((function(){return ts()}),0))}function Ja(){for(var t=Fo.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){var i=r[n];Qa(i)}t.setupObserver("resource",Qa)}function Za(){var t=Fo.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){$a.createOobTrace(e,n),r=void 0}),Ya);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),$a.createOobTrace(e,n,t))}))}else $a.createOobTrace(e,n)}function ts(){for(var t=Fo.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){var i=r[n];es(i)}t.setupObserver("measure",es)}function es(t){var e=t.name;e.substring(0,So.length)!==So&&$a.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ns=function(){function t(t){this.app=t,Fo.getInstance().requiredApisAvailable()&&Object(i["validateIndexedDBOpenable"])().then((function(t){t&&(ka(),va().then(Xa,Xa))})).catch((function(t){Lo.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new $a(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return Ko.getInstance().instrumentationEnabled},set:function(t){Ko.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return Ko.getInstance().dataCollectionEnabled},set:function(t){Ko.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}(),rs="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t){var e=function(t,e){if(t.name!==rs)throw jo.create("FB not default");if("undefined"===typeof window)throw jo.create("no window");return Uo(window),Ko.getInstance().firebaseAppInstance=t,Ko.getInstance().installationsService=e,new ns(t)};t.INTERNAL.registerComponent(new f["Component"]("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion(_o,wo)}is(r["default"]);var os=function(){return os=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},os.apply(this,arguments)};function as(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function ss(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;Object.create;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var us,cs,ls="firebase_id",hs="origin",fs=6e4,ds="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ps="https://www.googletagmanager.com/gtag/js";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vs(t,e,n,r,i){return as(this,void 0,void 0,(function(){var o,a;return ss(this,(function(s){switch(s.label){case 0:return i&&i.global?(t(us.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=os(os({},r),{send_to:o}),t(us.EVENT,n,a),s.label=3;case 3:return[2]}}))}))}function gs(t,e,n,r){return as(this,void 0,void 0,(function(){var i;return ss(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(us.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(us.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))}function ys(t,e,n,r){return as(this,void 0,void 0,(function(){var i;return ss(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(us.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(us.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))}function ms(t,e,n,r){return as(this,void 0,void 0,(function(){var i,o,a,s,u;return ss(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(us.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(us.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))}function bs(t,e){return as(this,void 0,void 0,(function(){var n;return ss(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t["EVENT"]="event",t["SET"]="set",t["CONFIG"]="config"})(us||(us={})),function(t){t["ADD_SHIPPING_INFO"]="add_shipping_info",t["ADD_PAYMENT_INFO"]="add_payment_info",t["ADD_TO_CART"]="add_to_cart",t["ADD_TO_WISHLIST"]="add_to_wishlist",t["BEGIN_CHECKOUT"]="begin_checkout",t["CHECKOUT_PROGRESS"]="checkout_progress",t["EXCEPTION"]="exception",t["GENERATE_LEAD"]="generate_lead",t["LOGIN"]="login",t["PAGE_VIEW"]="page_view",t["PURCHASE"]="purchase",t["REFUND"]="refund",t["REMOVE_FROM_CART"]="remove_from_cart",t["SCREEN_VIEW"]="screen_view",t["SEARCH"]="search",t["SELECT_CONTENT"]="select_content",t["SELECT_ITEM"]="select_item",t["SELECT_PROMOTION"]="select_promotion",t["SET_CHECKOUT_OPTION"]="set_checkout_option",t["SHARE"]="share",t["SIGN_UP"]="sign_up",t["TIMING_COMPLETE"]="timing_complete",t["VIEW_CART"]="view_cart",t["VIEW_ITEM"]="view_item",t["VIEW_ITEM_LIST"]="view_item_list",t["VIEW_PROMOTION"]="view_promotion",t["VIEW_SEARCH_RESULTS"]="view_search_results"}(cs||(cs={}));var _s,ws=new o["Logger"]("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t,e){var n=document.createElement("script");n.src=ps+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}function Ts(t){var e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function Es(t,e,n,r,i,o){return as(this,void 0,void 0,(function(){var a,s,u,c;return ss(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),u=s.find((function(t){return t.measurementId===i})),u?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),ws.error(c),[3,8];case 8:return t(us.CONFIG,i,o),[2]}}))}))}function Ss(t,e,n,r,i){return as(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f,d;return ss(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i["send_to"]?(a=i["send_to"],Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=p.sent(),u=function(t){var n=s.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length;c++)if(h=l[c],f=u(h),"break"===f)break;p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(us.EVENT,r,i||{}),[3,5];case 4:return d=p.sent(),ws.error(d),[3,5];case 5:return[2]}}))}))}function Os(t,e,n,r){function i(i,o,a){return as(this,void 0,void 0,(function(){var s;return ss(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==us.EVENT?[3,2]:[4,Ss(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==us.CONFIG?[3,4]:[4,Es(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(us.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),ws.error(s),[3,7];case 7:return[2]}}))}))}return i}function Cs(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=Os(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function ks(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(ps))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var As=(_s={},_s["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",_s["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",_s["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",_s["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",_s["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",_s["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",_s["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",_s["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',_s["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',_s),Ns=new i["ErrorFactory"]("analytics","Analytics",As),xs=30,Ps=1e3,Rs=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=Ps),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}(),Ds=new Rs;function js(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Ls(t){var e;return as(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return ss(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:js(r)},o=ds.replace("{app-id}",n),[4,fetch(o,i)];case 1:if(a=c.sent(),200===a.status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw Ns.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function Ms(t,e,n){return void 0===e&&(e=Ds),as(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return ss(this,(function(l){if(r=t.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw Ns.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw Ns.create("no-api-key")}return s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Vs,setTimeout((function(){return as(c,void 0,void 0,(function(){return ss(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:fs),[2,Fs({appId:i,apiKey:o,measurementId:a},s,u,e)]}))}))}function Fs(t,e,n,r){var o=e.throttleEndTimeMillis,a=e.backoffCount;return void 0===r&&(r=Ds),as(this,void 0,void 0,(function(){var e,s,u,c,l,h,f;return ss(this,(function(d){switch(d.label){case 0:e=t.appId,s=t.measurementId,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Us(n,o)];case 2:return d.sent(),[3,4];case 3:if(u=d.sent(),s)return ws.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:e,measurementId:s}];throw u;case 4:return d.trys.push([4,6,,7]),[4,Ls(t)];case 5:return c=d.sent(),r.deleteThrottleMetadata(e),[2,c];case 6:if(l=d.sent(),!qs(l)){if(r.deleteThrottleMetadata(e),s)return ws.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:e,measurementId:s}];throw l}return h=503===Number(l.customData.httpStatus)?Object(i["calculateBackoffMillis"])(a,r.intervalMillis,xs):Object(i["calculateBackoffMillis"])(a,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:a+1},r.setThrottleMetadata(e,f),ws.debug("Calling attemptFetch again in "+h+" millis"),[2,Fs(t,f,n,r)];case 7:return[2]}}))}))}function Us(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Ns.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function qs(t){if(!(t instanceof i["FirebaseError"])||!t.customData)return!1;var e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}var Vs=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(){return as(this,void 0,void 0,(function(){var t;return ss(this,(function(e){switch(e.label){case 0:return Object(i["isIndexedDBAvailable"])()?[3,1]:(ws.warn(Ns.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(i["validateIndexedDBOpenable"])()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),ws.warn(Ns.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}function Ks(t,e,n,r,i,o){return as(this,void 0,void 0,(function(){var a,s,u,c,l,h,f;return ss(this,(function(d){switch(d.label){case 0:return a=Ms(t),a.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&ws.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return ws.error(t)})),e.push(a),s=Bs().then((function(t){return t?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=d.sent(),c=u[0],l=u[1],ks()||Is(o,c.measurementId),i("js",new Date),f={},f[hs]="firebase",f.update=!0,h=f,null!=l&&(h[ls]=l),i(us.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ws,Hs,Gs={},zs=[],$s={},Qs="dataLayer",Ys="gtag",Xs=!1;function Js(t){if(Xs)throw Ns.create("already-initialized");t.dataLayerName&&(Qs=t.dataLayerName),t.gtagName&&(Ys=t.gtagName)}function Zs(){var t=[];if(Object(i["isBrowserExtension"])()&&t.push("This is a browser extension environment."),Object(i["areCookiesEnabled"])()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=Ns.create("invalid-analytics-context",{errorInfo:e});ws.warn(n.message)}}function tu(t,e){Zs();var n=t.options.appId;if(!n)throw Ns.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Ns.create("no-api-key");ws.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Gs[n])throw Ns.create("already-exists",{id:n});if(!Xs){Ts(Qs);var r=Cs(Gs,zs,$s,Qs,Ys),i=r.wrappedGtag,o=r.gtagCore;Hs=i,Ws=o,Xs=!0}Gs[n]=Ks(t,zs,$s,e,Ws,Qs);var a={app:t,logEvent:function(t,e,r){vs(Hs,Gs[n],t,e,r).catch((function(t){return ws.error(t)}))},setCurrentScreen:function(t,e){gs(Hs,Gs[n],t,e).catch((function(t){return ws.error(t)}))},setUserId:function(t,e){ys(Hs,Gs[n],t,e).catch((function(t){return ws.error(t)}))},setUserProperties:function(t,e){ms(Hs,Gs[n],t,e).catch((function(t){return ws.error(t)}))},setAnalyticsCollectionEnabled:function(t){bs(Gs[n],t).catch((function(t){return ws.error(t)}))},INTERNAL:{delete:function(){return delete Gs[n],Promise.resolve()}}};return a}var eu="@firebase/analytics",nu="0.6.10",ru="analytics";function iu(t){function e(t){try{var e=t.getProvider(ru).getImmediate();return{logEvent:e.logEvent}}catch(n){throw Ns.create("interop-component-reg-failed",{reason:n})}}t.INTERNAL.registerComponent(new f["Component"](ru,(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return tu(e,n)}),"PUBLIC").setServiceProps({settings:Js,EventName:cs,isSupported:ou})),t.INTERNAL.registerComponent(new f["Component"]("analytics-internal",e,"PRIVATE")),t.registerVersion(eu,nu)}function ou(){return as(this,void 0,void 0,(function(){var t;return ss(this,(function(e){switch(e.label){case 0:if(Object(i["isBrowserExtension"])())return[2,!1];if(!Object(i["areCookiesEnabled"])())return[2,!1];if(!Object(i["isIndexedDBAvailable"])())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Object(i["validateIndexedDBOpenable"])()];case 2:return t=e.sent(),[2,t];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */iu(r["default"]);var au=function(){return au=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},au.apply(this,arguments)};function su(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function uu(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;Object.create;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cu,lu=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return su(this,void 0,void 0,(function(){var e,n,r,i,o;return uu(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],r=e[1],r&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),hu=(cu={},cu["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",cu["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",cu["registration-api-key"]="Undefined API key. Check Firebase app initialization.",cu["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",cu["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",cu["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",cu["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",cu["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",cu["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",cu["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',cu["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',cu["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",cu["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",cu),fu=new i["ErrorFactory"]("remoteconfig","Remote Config",hu);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e){return t instanceof i["FirebaseError"]&&-1!==t.code.indexOf(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){return void 0===t&&(t=navigator),t.languages&&t.languages[0]||t.language}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vu=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return su(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,g,y,m,b;return uu(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:pu()},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return _.sent(),[4,c];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),d="fetch-client-network","AbortError"===f.name&&(d="fetch-timeout"),fu.create(d,{originalErrorMessage:f.message});case 6:if(p=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];m=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return m=_.sent(),[3,10];case 9:throw b=_.sent(),fu.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=m["entries"],y=m["state"],_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?p=500:"NO_CHANGE"===y?p=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(g={}),304!==p&&200!==p)throw fu.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:v,config:g}]}}))}))},t}(),gu=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),yu=!1,mu="",bu=0,_u=["1","true","t","yes","y","on"],wu=function(){function t(t,e){void 0===e&&(e=mu),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"===this._source?yu:_u.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return bu;var t=Number(this._value);return isNaN(t)&&(t=bu),t},t.prototype.getSource=function(){return this._source},t}(),Iu=6e4,Tu=432e5,Eu=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:Iu,minimumFetchIntervalMillis:Tu},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=o["LogLevel"].DEBUG;break;case"silent":this._logger.logLevel=o["LogLevel"].SILENT;break;default:this._logger.logLevel=o["LogLevel"].ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return su(this,void 0,void 0,(function(){var t,e,n;return uu(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return su(this,void 0,void 0,(function(){var t,e,n,r=this;return uu(this,(function(i){switch(i.label){case 0:t=new gu,setTimeout((function(){return su(r,void 0,void 0,(function(){return uu(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=du(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return su(this,void 0,void 0,(function(){return uu(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return Su(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new wu("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new wu("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new wu("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(au(au({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t,e){var n=t.target.error||void 0;return fu.create(e,{originalErrorMessage:n&&n.message})}var Cu="app_namespace_store",ku="firebase_remote_config",Au=1;function Nu(){return new Promise((function(t,e){var n=indexedDB.open(ku,Au);n.onerror=function(t){e(Ou(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(Cu,{keyPath:"compositeKey"})}}}))}var xu=function(){function t(t,e,n,r){void 0===r&&(r=Nu()),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return su(this,void 0,void 0,(function(){var e,n=this;return uu(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([Cu],"readonly"),a=o.objectStore(Cu),s=n.createCompositeKey(t);try{var u=a.get(s);u.onerror=function(t){i(Ou(t,"storage-get"))},u.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(c){i(fu.create("storage-get",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.set=function(t,e){return su(this,void 0,void 0,(function(){var n,r=this;return uu(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([Cu],"readwrite"),s=a.objectStore(Cu),u=r.createCompositeKey(t);try{var c=s.put({compositeKey:u,value:e});c.onerror=function(t){o(Ou(t,"storage-set"))},c.onsuccess=function(){i()}}catch(l){o(fu.create("storage-set",{originalErrorMessage:l&&l.message}))}}))]}}))}))},t.prototype.delete=function(t){return su(this,void 0,void 0,(function(){var e,n=this;return uu(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([Cu],"readwrite"),a=o.objectStore(Cu),s=n.createCompositeKey(t);try{var u=a.delete(s);u.onerror=function(t){i(Ou(t,"storage-delete"))},u.onsuccess=function(){r()}}catch(c){i(fu.create("storage-delete",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),Pu=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return su(this,void 0,void 0,(function(){var t,e,n,r,i,o;return uu(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return r=a.sent(),r&&(this.lastFetchStatus=r),[4,e];case 2:return i=a.sent(),i&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return o=a.sent(),o&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ru(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(fu.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}function Du(t){if(!(t instanceof i["FirebaseError"])||!t.customData)return!1;var e=Number(t.customData["httpStatus"]);return 429===e||500===e||503===e||504===e}var ju=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return su(this,void 0,void 0,(function(){var e;return uu(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return su(this,void 0,void 0,(function(){var e,o,a;return uu(this,(function(s){switch(s.label){case 0:return[4,Ru(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(o=s.sent(),!Du(o))throw o;return a={throttleEndTimeMillis:Date.now()+Object(i["calculateBackoffMillis"])(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(a)];case 6:return s.sent(),[2,this.attemptFetch(t,a)];case 7:return[2]}}))}))},t}(),Lu="@firebase/remote-config",Mu="0.1.37";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Fu(t){function e(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),a=e.getProvider("installations").getImmediate();if("undefined"===typeof window)throw fu.create("registration-window");var s=i.options,u=s.projectId,c=s.apiKey,l=s.appId;if(!u)throw fu.create("registration-project-id");if(!c)throw fu.create("registration-api-key");if(!l)throw fu.create("registration-app-id");r=r||"firebase";var h=new xu(l,i.name,r),f=new Pu(h),d=new o["Logger"](Lu);d.logLevel=o["LogLevel"].ERROR;var p=new vu(a,t.SDK_VERSION,r,u,c,l),v=new ju(p,h),g=new lu(v,h,f,d),y=new Eu(i,g,f,h,d);return y.ensureInitialized(),y}t.INTERNAL.registerComponent(new f["Component"]("remoteConfig",e,"PUBLIC").setMultipleInstances(!0)),t.registerVersion(Lu,Mu)}Fu(r["default"]);n("5fcf");var Uu="firebase",qu="8.6.3";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r["default"].registerVersion(Uu,qu,"app");var Vu="firebase",Bu="8.6.3";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),r["default"].registerVersion(Vu,Bu)},2626:function(t,e,n){"use strict";var r=n("d066"),i=n("9bf2"),o=n("b622"),a=n("83ab"),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},2877:function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){var u,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=u):i&&(u=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,u):[u]}return{exports:t,options:c}}n.d(e,"a",(function(){return r}))},"2a62":function(t,e,n){var r=n("825a");t.exports=function(t){var e=t["return"];if(void 0!==e)return r(e.call(t)).value}},"2b0e":function(t,e,n){"use strict";(function(t){
/*!
 * Vue.js v2.6.12
 * (c) 2014-2020 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(t){return void 0===t||null===t}function i(t){return void 0!==t&&null!==t}function o(t){return!0===t}function a(t){return!1===t}function s(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function u(t){return null!==t&&"object"===typeof t}var c=Object.prototype.toString;function l(t){return"[object Object]"===c.call(t)}function h(t){return"[object RegExp]"===c.call(t)}function f(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function d(t){return i(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function p(t){return null==t?"":Array.isArray(t)||l(t)&&t.toString===c?JSON.stringify(t,null,2):String(t)}function v(t){var e=parseFloat(t);return isNaN(e)?t:e}function g(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}g("slot,component",!0);var y=g("key,ref,slot,slot-scope,is");function m(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function _(t,e){return b.call(t,e)}function w(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}var I=/-(\w)/g,T=w((function(t){return t.replace(I,(function(t,e){return e?e.toUpperCase():""}))})),E=w((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),S=/\B([A-Z])/g,O=w((function(t){return t.replace(S,"-$1").toLowerCase()}));function C(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function k(t,e){return t.bind(e)}var A=Function.prototype.bind?k:C;function N(t,e){e=e||0;var n=t.length-e,r=new Array(n);while(n--)r[n]=t[n+e];return r}function x(t,e){for(var n in e)t[n]=e[n];return t}function P(t){for(var e={},n=0;n<t.length;n++)t[n]&&x(e,t[n]);return e}function R(t,e,n){}var D=function(t,e,n){return!1},j=function(t){return t};function L(t,e){if(t===e)return!0;var n=u(t),r=u(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every((function(t,n){return L(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||o)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every((function(n){return L(t[n],e[n])}))}catch(c){return!1}}function M(t,e){for(var n=0;n<t.length;n++)if(L(t[n],e))return n;return-1}function F(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var U="data-server-rendered",q=["component","directive","filter"],V=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],B={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:D,isReservedAttr:D,isUnknownElement:D,getTagNamespace:R,parsePlatformTagName:j,mustUseProp:D,async:!0,_lifecycleHooks:V},K=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function W(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function H(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var G=new RegExp("[^"+K.source+".$_\\d]");function z(t){if(!G.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var $,Q="__proto__"in{},Y="undefined"!==typeof window,X="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=X&&WXEnvironment.platform.toLowerCase(),Z=Y&&window.navigator.userAgent.toLowerCase(),tt=Z&&/msie|trident/.test(Z),et=Z&&Z.indexOf("msie 9.0")>0,nt=Z&&Z.indexOf("edge/")>0,rt=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===J),it=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),ot={}.watch,at=!1;if(Y)try{var st={};Object.defineProperty(st,"passive",{get:function(){at=!0}}),window.addEventListener("test-passive",null,st)}catch(Ta){}var ut=function(){return void 0===$&&($=!Y&&!X&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),$},ct=Y&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function lt(t){return"function"===typeof t&&/native code/.test(t.toString())}var ht,ft="undefined"!==typeof Symbol&&lt(Symbol)&&"undefined"!==typeof Reflect&&lt(Reflect.ownKeys);ht="undefined"!==typeof Set&&lt(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var dt=R,pt=0,vt=function(){this.id=pt++,this.subs=[]};vt.prototype.addSub=function(t){this.subs.push(t)},vt.prototype.removeSub=function(t){m(this.subs,t)},vt.prototype.depend=function(){vt.target&&vt.target.addDep(this)},vt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},vt.target=null;var gt=[];function yt(t){gt.push(t),vt.target=t}function mt(){gt.pop(),vt.target=gt[gt.length-1]}var bt=function(t,e,n,r,i,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},_t={child:{configurable:!0}};_t.child.get=function(){return this.componentInstance},Object.defineProperties(bt.prototype,_t);var wt=function(t){void 0===t&&(t="");var e=new bt;return e.text=t,e.isComment=!0,e};function It(t){return new bt(void 0,void 0,void 0,String(t))}function Tt(t){var e=new bt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var Et=Array.prototype,St=Object.create(Et),Ot=["push","pop","shift","unshift","splice","sort","reverse"];Ot.forEach((function(t){var e=Et[t];H(St,t,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o}))}));var Ct=Object.getOwnPropertyNames(St),kt=!0;function At(t){kt=t}var Nt=function(t){this.value=t,this.dep=new vt,this.vmCount=0,H(t,"__ob__",this),Array.isArray(t)?(Q?xt(t,St):Pt(t,St,Ct),this.observeArray(t)):this.walk(t)};function xt(t,e){t.__proto__=e}function Pt(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];H(t,o,e[o])}}function Rt(t,e){var n;if(u(t)&&!(t instanceof bt))return _(t,"__ob__")&&t.__ob__ instanceof Nt?n=t.__ob__:kt&&!ut()&&(Array.isArray(t)||l(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Nt(t)),e&&n&&n.vmCount++,n}function Dt(t,e,n,r,i){var o=new vt,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set;s&&!u||2!==arguments.length||(n=t[e]);var c=!i&&Rt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return vt.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&Mt(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!==e&&r!==r||s&&!u||(u?u.call(t,e):n=e,c=!i&&Rt(e),o.notify())}})}}function jt(t,e,n){if(Array.isArray(t)&&f(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(Dt(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function Lt(t,e){if(Array.isArray(t)&&f(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||_(t,e)&&(delete t[e],n&&n.dep.notify())}}function Mt(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Mt(e)}Nt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Dt(t,e[n])},Nt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Rt(t[e])};var Ft=B.optionMergeStrategies;function Ut(t,e){if(!e)return t;for(var n,r,i,o=ft?Reflect.ownKeys(e):Object.keys(e),a=0;a<o.length;a++)n=o[a],"__ob__"!==n&&(r=t[n],i=e[n],_(t,n)?r!==i&&l(r)&&l(i)&&Ut(r,i):jt(t,n,i));return t}function qt(t,e,n){return n?function(){var r="function"===typeof e?e.call(n,n):e,i="function"===typeof t?t.call(n,n):t;return r?Ut(r,i):i}:e?t?function(){return Ut("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function Vt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?Bt(n):n}function Bt(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function Kt(t,e,n,r){var i=Object.create(t||null);return e?x(i,e):i}Ft.data=function(t,e,n){return n?qt(t,e,n):e&&"function"!==typeof e?t:qt(t,e)},V.forEach((function(t){Ft[t]=Vt})),q.forEach((function(t){Ft[t+"s"]=Kt})),Ft.watch=function(t,e,n,r){if(t===ot&&(t=void 0),e===ot&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};for(var o in x(i,t),e){var a=i[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},Ft.props=Ft.methods=Ft.inject=Ft.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return x(i,t),e&&x(i,e),i},Ft.provide=qt;var Wt=function(t,e){return void 0===e?t:e};function Ht(t,e){var n=t.props;if(n){var r,i,o,a={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=T(i),a[o]={type:null})}else if(l(n))for(var s in n)i=n[s],o=T(s),a[o]=l(i)?i:{type:i};else 0;t.props=a}}function Gt(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(l(n))for(var o in n){var a=n[o];r[o]=l(a)?x({from:o},a):{from:a}}else 0}}function zt(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"===typeof r&&(e[n]={bind:r,update:r})}}function $t(t,e,n){if("function"===typeof e&&(e=e.options),Ht(e,n),Gt(e,n),zt(e),!e._base&&(e.extends&&(t=$t(t,e.extends,n)),e.mixins))for(var r=0,i=e.mixins.length;r<i;r++)t=$t(t,e.mixins[r],n);var o,a={};for(o in t)s(o);for(o in e)_(t,o)||s(o);function s(r){var i=Ft[r]||Wt;a[r]=i(t[r],e[r],n,r)}return a}function Qt(t,e,n,r){if("string"===typeof n){var i=t[e];if(_(i,n))return i[n];var o=T(n);if(_(i,o))return i[o];var a=E(o);if(_(i,a))return i[a];var s=i[n]||i[o]||i[a];return s}}function Yt(t,e,n,r){var i=e[t],o=!_(n,t),a=n[t],s=te(Boolean,i.type);if(s>-1)if(o&&!_(i,"default"))a=!1;else if(""===a||a===O(t)){var u=te(String,i.type);(u<0||s<u)&&(a=!0)}if(void 0===a){a=Xt(r,i,t);var c=kt;At(!0),Rt(a),At(c)}return a}function Xt(t,e,n){if(_(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"===typeof r&&"Function"!==Jt(e.type)?r.call(t):r}}function Jt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Zt(t,e){return Jt(t)===Jt(e)}function te(t,e){if(!Array.isArray(e))return Zt(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(Zt(e[n],t))return n;return-1}function ee(t,e,n){yt();try{if(e){var r=e;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=!1===i[o].call(r,t,e,n);if(a)return}catch(Ta){re(Ta,r,"errorCaptured hook")}}}re(t,e,n)}finally{mt()}}function ne(t,e,n,r,i){var o;try{o=n?t.apply(e,n):t.call(e),o&&!o._isVue&&d(o)&&!o._handled&&(o.catch((function(t){return ee(t,r,i+" (Promise/async)")})),o._handled=!0)}catch(Ta){ee(Ta,r,i)}return o}function re(t,e,n){if(B.errorHandler)try{return B.errorHandler.call(null,t,e,n)}catch(Ta){Ta!==t&&ie(Ta,null,"config.errorHandler")}ie(t,e,n)}function ie(t,e,n){if(!Y&&!X||"undefined"===typeof console)throw t;console.error(t)}var oe,ae=!1,se=[],ue=!1;function ce(){ue=!1;var t=se.slice(0);se.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&lt(Promise)){var le=Promise.resolve();oe=function(){le.then(ce),rt&&setTimeout(R)},ae=!0}else if(tt||"undefined"===typeof MutationObserver||!lt(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())oe="undefined"!==typeof setImmediate&&lt(setImmediate)?function(){setImmediate(ce)}:function(){setTimeout(ce,0)};else{var he=1,fe=new MutationObserver(ce),de=document.createTextNode(String(he));fe.observe(de,{characterData:!0}),oe=function(){he=(he+1)%2,de.data=String(he)},ae=!0}function pe(t,e){var n;if(se.push((function(){if(t)try{t.call(e)}catch(Ta){ee(Ta,e,"nextTick")}else n&&n(e)})),ue||(ue=!0,oe()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){n=t}))}var ve=new ht;function ge(t){ye(t,ve),ve.clear()}function ye(t,e){var n,r,i=Array.isArray(t);if(!(!i&&!u(t)||Object.isFrozen(t)||t instanceof bt)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(i){n=t.length;while(n--)ye(t[n],e)}else{r=Object.keys(t),n=r.length;while(n--)ye(t[r[n]],e)}}}var me=w((function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}));function be(t,e){function n(){var t=arguments,r=n.fns;if(!Array.isArray(r))return ne(r,null,arguments,e,"v-on handler");for(var i=r.slice(),o=0;o<i.length;o++)ne(i[o],null,t,e,"v-on handler")}return n.fns=t,n}function _e(t,e,n,i,a,s){var u,c,l,h;for(u in t)c=t[u],l=e[u],h=me(u),r(c)||(r(l)?(r(c.fns)&&(c=t[u]=be(c,s)),o(h.once)&&(c=t[u]=a(h.name,c,h.capture)),n(h.name,c,h.capture,h.passive,h.params)):c!==l&&(l.fns=c,t[u]=l));for(u in e)r(t[u])&&(h=me(u),i(h.name,e[u],h.capture))}function we(t,e,n){var a;t instanceof bt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function u(){n.apply(this,arguments),m(a.fns,u)}r(s)?a=be([u]):i(s.fns)&&o(s.merged)?(a=s,a.fns.push(u)):a=be([s,u]),a.merged=!0,t[e]=a}function Ie(t,e,n){var o=e.options.props;if(!r(o)){var a={},s=t.attrs,u=t.props;if(i(s)||i(u))for(var c in o){var l=O(c);Te(a,u,c,l,!0)||Te(a,s,c,l,!1)}return a}}function Te(t,e,n,r,o){if(i(e)){if(_(e,n))return t[n]=e[n],o||delete e[n],!0;if(_(e,r))return t[n]=e[r],o||delete e[r],!0}return!1}function Ee(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Se(t){return s(t)?[It(t)]:Array.isArray(t)?Ce(t):void 0}function Oe(t){return i(t)&&i(t.text)&&a(t.isComment)}function Ce(t,e){var n,a,u,c,l=[];for(n=0;n<t.length;n++)a=t[n],r(a)||"boolean"===typeof a||(u=l.length-1,c=l[u],Array.isArray(a)?a.length>0&&(a=Ce(a,(e||"")+"_"+n),Oe(a[0])&&Oe(c)&&(l[u]=It(c.text+a[0].text),a.shift()),l.push.apply(l,a)):s(a)?Oe(c)?l[u]=It(c.text+a):""!==a&&l.push(It(a)):Oe(a)&&Oe(c)?l[u]=It(c.text+a.text):(o(t._isVList)&&i(a.tag)&&r(a.key)&&i(e)&&(a.key="__vlist"+e+"_"+n+"__"),l.push(a)));return l}function ke(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function Ae(t){var e=Ne(t.$options.inject,t);e&&(At(!1),Object.keys(e).forEach((function(n){Dt(t,n,e[n])})),At(!0))}function Ne(t,e){if(t){for(var n=Object.create(null),r=ft?Reflect.ownKeys(t):Object.keys(t),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=t[o].from,s=e;while(s){if(s._provided&&_(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[o]){var u=t[o].default;n[o]="function"===typeof u?u.call(e):u}else 0}}return n}}function xe(t,e){if(!t||!t.length)return{};for(var n={},r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(Pe)&&delete n[c];return n}function Pe(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Re(t,e,r){var i,o=Object.keys(e).length>0,a=t?!!t.$stable:!o,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(a&&r&&r!==n&&s===r.$key&&!o&&!r.$hasNormal)return r;for(var u in i={},t)t[u]&&"$"!==u[0]&&(i[u]=De(e,u,t[u]))}else i={};for(var c in e)c in i||(i[c]=je(e,c));return t&&Object.isExtensible(t)&&(t._normalized=i),H(i,"$stable",a),H(i,"$key",s),H(i,"$hasNormal",o),i}function De(t,e,n){var r=function(){var t=arguments.length?n.apply(null,arguments):n({});return t=t&&"object"===typeof t&&!Array.isArray(t)?[t]:Se(t),t&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function je(t,e){return function(){return t[e]}}function Le(t,e){var n,r,o,a,s;if(Array.isArray(t)||"string"===typeof t)for(n=new Array(t.length),r=0,o=t.length;r<o;r++)n[r]=e(t[r],r);else if("number"===typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(u(t))if(ft&&t[Symbol.iterator]){n=[];var c=t[Symbol.iterator](),l=c.next();while(!l.done)n.push(e(l.value,n.length)),l=c.next()}else for(a=Object.keys(t),n=new Array(a.length),r=0,o=a.length;r<o;r++)s=a[r],n[r]=e(t[s],s,r);return i(n)||(n=[]),n._isVList=!0,n}function Me(t,e,n,r){var i,o=this.$scopedSlots[t];o?(n=n||{},r&&(n=x(x({},r),n)),i=o(n)||e):i=this.$slots[t]||e;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function Fe(t){return Qt(this.$options,"filters",t,!0)||j}function Ue(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function qe(t,e,n,r,i){var o=B.keyCodes[e]||n;return i&&r&&!B.keyCodes[e]?Ue(i,r):o?Ue(o,t):r?O(r)!==e:void 0}function Ve(t,e,n,r,i){if(n)if(u(n)){var o;Array.isArray(n)&&(n=P(n));var a=function(a){if("class"===a||"style"===a||y(a))o=t;else{var s=t.attrs&&t.attrs.type;o=r||B.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var u=T(a),c=O(a);if(!(u in o)&&!(c in o)&&(o[a]=n[a],i)){var l=t.on||(t.on={});l["update:"+a]=function(t){n[a]=t}}};for(var s in n)a(s)}else;return t}function Be(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e||(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),We(r,"__static__"+t,!1)),r}function Ke(t,e,n){return We(t,"__once__"+e+(n?"_"+n:""),!0),t}function We(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!==typeof t[r]&&He(t[r],e+"_"+r,n);else He(t,e,n)}function He(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Ge(t,e){if(e)if(l(e)){var n=t.on=t.on?x({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}else;return t}function ze(t,e,n,r){e=e||{$stable:!n};for(var i=0;i<t.length;i++){var o=t[i];Array.isArray(o)?ze(o,e,n):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return r&&(e.$key=r),e}function $e(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"===typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Qe(t,e){return"string"===typeof t?e+t:t}function Ye(t){t._o=Ke,t._n=v,t._s=p,t._l=Le,t._t=Me,t._q=L,t._i=M,t._m=Be,t._f=Fe,t._k=qe,t._b=Ve,t._v=It,t._e=wt,t._u=ze,t._g=Ge,t._d=$e,t._p=Qe}function Xe(t,e,r,i,a){var s,u=this,c=a.options;_(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var l=o(c._compiled),h=!l;this.data=t,this.props=e,this.children=r,this.parent=i,this.listeners=t.on||n,this.injections=Ne(c.inject,i),this.slots=function(){return u.$slots||Re(t.scopedSlots,u.$slots=xe(r,i)),u.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Re(t.scopedSlots,this.slots())}}),l&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=Re(t.scopedSlots,this.$slots)),c._scopeId?this._c=function(t,e,n,r){var o=hn(s,t,e,n,r,h);return o&&!Array.isArray(o)&&(o.fnScopeId=c._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return hn(s,t,e,n,r,h)}}function Je(t,e,r,o,a){var s=t.options,u={},c=s.props;if(i(c))for(var l in c)u[l]=Yt(l,c,e||n);else i(r.attrs)&&tn(u,r.attrs),i(r.props)&&tn(u,r.props);var h=new Xe(r,u,a,o,t),f=s.render.call(null,h._c,h);if(f instanceof bt)return Ze(f,r,h.parent,s,h);if(Array.isArray(f)){for(var d=Se(f)||[],p=new Array(d.length),v=0;v<d.length;v++)p[v]=Ze(d[v],r,h.parent,s,h);return p}}function Ze(t,e,n,r,i){var o=Tt(t);return o.fnContext=n,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function tn(t,e){for(var n in e)t[T(n)]=e[n]}Ye(Xe.prototype);var en={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;en.prepatch(n,n)}else{var r=t.componentInstance=on(t,Nn);r.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;jn(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Un(n,"mounted")),t.data.keepAlive&&(e._isMounted?Jn(n):Mn(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Fn(e,!0):e.$destroy())}},nn=Object.keys(en);function rn(t,e,n,a,s){if(!r(t)){var c=n.$options._base;if(u(t)&&(t=c.extend(t)),"function"===typeof t){var l;if(r(t.cid)&&(l=t,t=wn(l,c),void 0===t))return _n(l,e,n,a,s);e=e||{},wr(t),i(e.model)&&un(t.options,e);var h=Ie(e,t,s);if(o(t.options.functional))return Je(t,h,e,n,a);var f=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var d=e.slot;e={},d&&(e.slot=d)}an(e);var p=t.options.name||s,v=new bt("vue-component-"+t.cid+(p?"-"+p:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:h,listeners:f,tag:s,children:a},l);return v}}}function on(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new t.componentOptions.Ctor(n)}function an(t){for(var e=t.hook||(t.hook={}),n=0;n<nn.length;n++){var r=nn[n],i=e[r],o=en[r];i===o||i&&i._merged||(e[r]=i?sn(o,i):o)}}function sn(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}function un(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),a=o[r],s=e.model.callback;i(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[r]=[s].concat(a)):o[r]=s}var cn=1,ln=2;function hn(t,e,n,r,i,a){return(Array.isArray(n)||s(n))&&(i=r,r=n,n=void 0),o(a)&&(i=ln),fn(t,e,n,r,i)}function fn(t,e,n,r,o){if(i(n)&&i(n.__ob__))return wt();if(i(n)&&i(n.is)&&(e=n.is),!e)return wt();var a,s,u;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===ln?r=Se(r):o===cn&&(r=Ee(r)),"string"===typeof e)?(s=t.$vnode&&t.$vnode.ns||B.getTagNamespace(e),a=B.isReservedTag(e)?new bt(B.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!i(u=Qt(t.$options,"components",e))?new bt(e,n,r,void 0,void 0,t):rn(u,n,t,r,e)):a=rn(e,n,t,r);return Array.isArray(a)?a:i(a)?(i(s)&&dn(a,s),i(n)&&pn(n),a):wt()}function dn(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),i(t.children))for(var a=0,s=t.children.length;a<s;a++){var u=t.children[a];i(u.tag)&&(r(u.ns)||o(n)&&"svg"!==u.tag)&&dn(u,e,n)}}function pn(t){u(t.style)&&ge(t.style),u(t.class)&&ge(t.class)}function vn(t){t._vnode=null,t._staticTrees=null;var e=t.$options,r=t.$vnode=e._parentVnode,i=r&&r.context;t.$slots=xe(e._renderChildren,i),t.$scopedSlots=n,t._c=function(e,n,r,i){return hn(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return hn(t,e,n,r,i,!0)};var o=r&&r.data;Dt(t,"$attrs",o&&o.attrs||n,null,!0),Dt(t,"$listeners",e._parentListeners||n,null,!0)}var gn,yn=null;function mn(t){Ye(t.prototype),t.prototype.$nextTick=function(t){return pe(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,i=n._parentVnode;i&&(e.$scopedSlots=Re(i.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=i;try{yn=e,t=r.call(e._renderProxy,e.$createElement)}catch(Ta){ee(Ta,e,"render"),t=e._vnode}finally{yn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof bt||(t=wt()),t.parent=i,t}}function bn(t,e){return(t.__esModule||ft&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function _n(t,e,n,r,i){var o=wt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}function wn(t,e){if(o(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;var n=yn;if(n&&i(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),o(t.loading)&&i(t.loadingComp))return t.loadingComp;if(n&&!i(t.owners)){var a=t.owners=[n],s=!0,c=null,l=null;n.$on("hook:destroyed",(function(){return m(a,n)}));var h=function(t){for(var e=0,n=a.length;e<n;e++)a[e].$forceUpdate();t&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},f=F((function(n){t.resolved=bn(n,e),s?a.length=0:h(!0)})),p=F((function(e){i(t.errorComp)&&(t.error=!0,h(!0))})),v=t(f,p);return u(v)&&(d(v)?r(t.resolved)&&v.then(f,p):d(v.component)&&(v.component.then(f,p),i(v.error)&&(t.errorComp=bn(v.error,e)),i(v.loading)&&(t.loadingComp=bn(v.loading,e),0===v.delay?t.loading=!0:c=setTimeout((function(){c=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,h(!1))}),v.delay||200)),i(v.timeout)&&(l=setTimeout((function(){l=null,r(t.resolved)&&p(null)}),v.timeout)))),s=!1,t.loading?t.loadingComp:t.resolved}}function In(t){return t.isComment&&t.asyncFactory}function Tn(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||In(n)))return n}}function En(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&kn(t,e)}function Sn(t,e){gn.$on(t,e)}function On(t,e){gn.$off(t,e)}function Cn(t,e){var n=gn;return function r(){var i=e.apply(null,arguments);null!==i&&n.$off(t,r)}}function kn(t,e,n){gn=t,_e(e,n||{},Sn,On,Cn,t),gn=void 0}function An(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)r.$on(t[i],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)n.$off(t[r],e);return n}var o,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;var s=a.length;while(s--)if(o=a[s],o===e||o.fn===e){a.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?N(n):n;for(var r=N(arguments,1),i='event handler for "'+t+'"',o=0,a=n.length;o<a;o++)ne(n[o],e,r,e,i)}return e}}var Nn=null;function xn(t){var e=Nn;return Nn=t,function(){Nn=e}}function Pn(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function Rn(t){t.prototype._update=function(t,e){var n=this,r=n.$el,i=n._vnode,o=xn(n);n._vnode=t,n.$el=i?n.__patch__(i,t):n.__patch__(n.$el,t,e,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Un(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||m(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;while(n--)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Un(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Dn(t,e,n){var r;return t.$el=e,t.$options.render||(t.$options.render=wt),Un(t,"beforeMount"),r=function(){t._update(t._render(),n)},new nr(t,r,R,{before:function(){t._isMounted&&!t._isDestroyed&&Un(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Un(t,"mounted")),t}function jn(t,e,r,i,o){var a=i.data.scopedSlots,s=t.$scopedSlots,u=!!(a&&!a.$stable||s!==n&&!s.$stable||a&&t.$scopedSlots.$key!==a.$key),c=!!(o||t.$options._renderChildren||u);if(t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o,t.$attrs=i.data.attrs||n,t.$listeners=r||n,e&&t.$options.props){At(!1);for(var l=t._props,h=t.$options._propKeys||[],f=0;f<h.length;f++){var d=h[f],p=t.$options.props;l[d]=Yt(d,p,e,t)}At(!0),t.$options.propsData=e}r=r||n;var v=t.$options._parentListeners;t.$options._parentListeners=r,kn(t,r,v),c&&(t.$slots=xe(o,i.context),t.$forceUpdate())}function Ln(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Mn(t,e){if(e){if(t._directInactive=!1,Ln(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Mn(t.$children[n]);Un(t,"activated")}}function Fn(t,e){if((!e||(t._directInactive=!0,!Ln(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Fn(t.$children[n]);Un(t,"deactivated")}}function Un(t,e){yt();var n=t.$options[e],r=e+" hook";if(n)for(var i=0,o=n.length;i<o;i++)ne(n[i],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),mt()}var qn=[],Vn=[],Bn={},Kn=!1,Wn=!1,Hn=0;function Gn(){Hn=qn.length=Vn.length=0,Bn={},Kn=Wn=!1}var zn=0,$n=Date.now;if(Y&&!tt){var Qn=window.performance;Qn&&"function"===typeof Qn.now&&$n()>document.createEvent("Event").timeStamp&&($n=function(){return Qn.now()})}function Yn(){var t,e;for(zn=$n(),Wn=!0,qn.sort((function(t,e){return t.id-e.id})),Hn=0;Hn<qn.length;Hn++)t=qn[Hn],t.before&&t.before(),e=t.id,Bn[e]=null,t.run();var n=Vn.slice(),r=qn.slice();Gn(),Zn(n),Xn(r),ct&&B.devtools&&ct.emit("flush")}function Xn(t){var e=t.length;while(e--){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Un(r,"updated")}}function Jn(t){t._inactive=!1,Vn.push(t)}function Zn(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Mn(t[e],!0)}function tr(t){var e=t.id;if(null==Bn[e]){if(Bn[e]=!0,Wn){var n=qn.length-1;while(n>Hn&&qn[n].id>t.id)n--;qn.splice(n+1,0,t)}else qn.push(t);Kn||(Kn=!0,pe(Yn))}}var er=0,nr=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++er,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ht,this.newDepIds=new ht,this.expression="","function"===typeof e?this.getter=e:(this.getter=z(e),this.getter||(this.getter=R)),this.value=this.lazy?void 0:this.get()};nr.prototype.get=function(){var t;yt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(Ta){if(!this.user)throw Ta;ee(Ta,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ge(t),mt(),this.cleanupDeps()}return t},nr.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},nr.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},nr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():tr(this)},nr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(Ta){ee(Ta,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},nr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},nr.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},nr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||m(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var rr={enumerable:!0,configurable:!0,get:R,set:R};function ir(t,e,n){rr.get=function(){return this[e][n]},rr.set=function(t){this[e][n]=t},Object.defineProperty(t,n,rr)}function or(t){t._watchers=[];var e=t.$options;e.props&&ar(t,e.props),e.methods&&pr(t,e.methods),e.data?sr(t):Rt(t._data={},!0),e.computed&&lr(t,e.computed),e.watch&&e.watch!==ot&&vr(t,e.watch)}function ar(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],o=!t.$parent;o||At(!1);var a=function(o){i.push(o);var a=Yt(o,e,n,t);Dt(r,o,a),o in t||ir(t,"_props",o)};for(var s in e)a(s);At(!0)}function sr(t){var e=t.$options.data;e=t._data="function"===typeof e?ur(e,t):e||{},l(e)||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);while(i--){var o=n[i];0,r&&_(r,o)||W(o)||ir(t,"_data",o)}Rt(e,!0)}function ur(t,e){yt();try{return t.call(e,e)}catch(Ta){return ee(Ta,e,"data()"),{}}finally{mt()}}var cr={lazy:!0};function lr(t,e){var n=t._computedWatchers=Object.create(null),r=ut();for(var i in e){var o=e[i],a="function"===typeof o?o:o.get;0,r||(n[i]=new nr(t,a||R,R,cr)),i in t||hr(t,i,o)}}function hr(t,e,n){var r=!ut();"function"===typeof n?(rr.get=r?fr(e):dr(n),rr.set=R):(rr.get=n.get?r&&!1!==n.cache?fr(e):dr(n.get):R,rr.set=n.set||R),Object.defineProperty(t,e,rr)}function fr(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),vt.target&&e.depend(),e.value}}function dr(t){return function(){return t.call(this,this)}}function pr(t,e){t.$options.props;for(var n in e)t[n]="function"!==typeof e[n]?R:A(e[n],t)}function vr(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)gr(t,n,r[i]);else gr(t,n,r)}}function gr(t,e,n,r){return l(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,r)}function yr(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=jt,t.prototype.$delete=Lt,t.prototype.$watch=function(t,e,n){var r=this;if(l(e))return gr(r,t,e,n);n=n||{},n.user=!0;var i=new nr(r,t,e,n);if(n.immediate)try{e.call(r,i.value)}catch(o){ee(o,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}var mr=0;function br(t){t.prototype._init=function(t){var e=this;e._uid=mr++,e._isVue=!0,t&&t._isComponent?_r(e,t):e.$options=$t(wr(e.constructor),t||{},e),e._renderProxy=e,e._self=e,Pn(e),En(e),vn(e),Un(e,"beforeCreate"),Ae(e),or(e),ke(e),Un(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function _r(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function wr(t){var e=t.options;if(t.super){var n=wr(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var i=Ir(t);i&&x(t.extendOptions,i),e=t.options=$t(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function Ir(t){var e,n=t.options,r=t.sealedOptions;for(var i in n)n[i]!==r[i]&&(e||(e={}),e[i]=n[i]);return e}function Tr(t){this._init(t)}function Er(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=N(arguments,1);return n.unshift(this),"function"===typeof t.install?t.install.apply(t,n):"function"===typeof t&&t.apply(null,n),e.push(t),this}}function Sr(t){t.mixin=function(t){return this.options=$t(this.options,t),this}}function Or(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name;var a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=e++,a.options=$t(n.options,t),a["super"]=n,a.options.props&&Cr(a),a.options.computed&&kr(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,q.forEach((function(t){a[t]=n[t]})),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=x({},a.options),i[r]=a,a}}function Cr(t){var e=t.options.props;for(var n in e)ir(t.prototype,"_props",n)}function kr(t){var e=t.options.computed;for(var n in e)hr(t.prototype,n,e[n])}function Ar(t){q.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&l(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"===typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}function Nr(t){return t&&(t.Ctor.options.name||t.tag)}function xr(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!h(t)&&t.test(e)}function Pr(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var s=Nr(a.componentOptions);s&&!e(s)&&Rr(n,o,r,i)}}}function Rr(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,m(n,e)}br(Tr),yr(Tr),An(Tr),Rn(Tr),mn(Tr);var Dr=[String,RegExp,Array],jr={name:"keep-alive",abstract:!0,props:{include:Dr,exclude:Dr,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Rr(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",(function(e){Pr(t,(function(t){return xr(e,t)}))})),this.$watch("exclude",(function(e){Pr(t,(function(t){return!xr(e,t)}))}))},render:function(){var t=this.$slots.default,e=Tn(t),n=e&&e.componentOptions;if(n){var r=Nr(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!xr(o,r))||a&&r&&xr(a,r))return e;var s=this,u=s.cache,c=s.keys,l=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;u[l]?(e.componentInstance=u[l].componentInstance,m(c,l),c.push(l)):(u[l]=e,c.push(l),this.max&&c.length>parseInt(this.max)&&Rr(u,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},Lr={KeepAlive:jr};function Mr(t){var e={get:function(){return B}};Object.defineProperty(t,"config",e),t.util={warn:dt,extend:x,mergeOptions:$t,defineReactive:Dt},t.set=jt,t.delete=Lt,t.nextTick=pe,t.observable=function(t){return Rt(t),t},t.options=Object.create(null),q.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,x(t.options.components,Lr),Er(t),Sr(t),Or(t),Ar(t)}Mr(Tr),Object.defineProperty(Tr.prototype,"$isServer",{get:ut}),Object.defineProperty(Tr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Tr,"FunctionalRenderContext",{value:Xe}),Tr.version="2.6.12";var Fr=g("style,class"),Ur=g("input,textarea,option,select,progress"),qr=function(t,e,n){return"value"===n&&Ur(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Vr=g("contenteditable,draggable,spellcheck"),Br=g("events,caret,typing,plaintext-only"),Kr=function(t,e){return $r(e)||"false"===e?"false":"contenteditable"===t&&Br(e)?e:"true"},Wr=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Hr="http://www.w3.org/1999/xlink",Gr=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},zr=function(t){return Gr(t)?t.slice(6,t.length):""},$r=function(t){return null==t||!1===t};function Qr(t){var e=t.data,n=t,r=t;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(e=Yr(r.data,e));while(i(n=n.parent))n&&n.data&&(e=Yr(e,n.data));return Xr(e.staticClass,e.class)}function Yr(t,e){return{staticClass:Jr(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function Xr(t,e){return i(t)||i(e)?Jr(t,Zr(e)):""}function Jr(t,e){return t?e?t+" "+e:t:e||""}function Zr(t){return Array.isArray(t)?ti(t):u(t)?ei(t):"string"===typeof t?t:""}function ti(t){for(var e,n="",r=0,o=t.length;r<o;r++)i(e=Zr(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function ei(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var ni={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ri=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ii=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),oi=function(t){return ri(t)||ii(t)};function ai(t){return ii(t)?"svg":"math"===t?"math":void 0}var si=Object.create(null);function ui(t){if(!Y)return!0;if(oi(t))return!1;if(t=t.toLowerCase(),null!=si[t])return si[t];var e=document.createElement(t);return t.indexOf("-")>-1?si[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:si[t]=/HTMLUnknownElement/.test(e.toString())}var ci=g("text,number,password,search,email,tel,url");function li(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function hi(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function fi(t,e){return document.createElementNS(ni[t],e)}function di(t){return document.createTextNode(t)}function pi(t){return document.createComment(t)}function vi(t,e,n){t.insertBefore(e,n)}function gi(t,e){t.removeChild(e)}function yi(t,e){t.appendChild(e)}function mi(t){return t.parentNode}function bi(t){return t.nextSibling}function _i(t){return t.tagName}function wi(t,e){t.textContent=e}function Ii(t,e){t.setAttribute(e,"")}var Ti=Object.freeze({createElement:hi,createElementNS:fi,createTextNode:di,createComment:pi,insertBefore:vi,removeChild:gi,appendChild:yi,parentNode:mi,nextSibling:bi,tagName:_i,setTextContent:wi,setStyleScope:Ii}),Ei={create:function(t,e){Si(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Si(t,!0),Si(e))},destroy:function(t){Si(t,!0)}};function Si(t,e){var n=t.data.ref;if(i(n)){var r=t.context,o=t.componentInstance||t.elm,a=r.$refs;e?Array.isArray(a[n])?m(a[n],o):a[n]===o&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}var Oi=new bt("",{},[]),Ci=["create","activate","update","remove","destroy"];function ki(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&Ai(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&r(e.asyncFactory.error))}function Ai(t,e){if("input"!==t.tag)return!0;var n,r=i(n=t.data)&&i(n=n.attrs)&&n.type,o=i(n=e.data)&&i(n=n.attrs)&&n.type;return r===o||ci(r)&&ci(o)}function Ni(t,e,n){var r,o,a={};for(r=e;r<=n;++r)o=t[r].key,i(o)&&(a[o]=r);return a}function xi(t){var e,n,a={},u=t.modules,c=t.nodeOps;for(e=0;e<Ci.length;++e)for(a[Ci[e]]=[],n=0;n<u.length;++n)i(u[n][Ci[e]])&&a[Ci[e]].push(u[n][Ci[e]]);function l(t){return new bt(c.tagName(t).toLowerCase(),{},[],void 0,t)}function h(t,e){function n(){0===--n.listeners&&f(t)}return n.listeners=e,n}function f(t){var e=c.parentNode(t);i(e)&&c.removeChild(e,t)}function d(t,e,n,r,a,s,u){if(i(t.elm)&&i(s)&&(t=s[u]=Tt(t)),t.isRootInsert=!a,!p(t,e,n,r)){var l=t.data,h=t.children,f=t.tag;i(f)?(t.elm=t.ns?c.createElementNS(t.ns,f):c.createElement(f,t),I(t),b(t,h,e),i(l)&&w(t,e),m(n,t.elm,r)):o(t.isComment)?(t.elm=c.createComment(t.text),m(n,t.elm,r)):(t.elm=c.createTextNode(t.text),m(n,t.elm,r))}}function p(t,e,n,r){var a=t.data;if(i(a)){var s=i(t.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(t,!1),i(t.componentInstance))return v(t,e),m(n,t.elm,r),o(s)&&y(t,e,n,r),!0}}function v(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,_(t)?(w(t,e),I(t)):(Si(t),e.push(t))}function y(t,e,n,r){var o,s=t;while(s.componentInstance)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<a.activate.length;++o)a.activate[o](Oi,s);e.push(s);break}m(n,t.elm,r)}function m(t,e,n){i(t)&&(i(n)?c.parentNode(n)===t&&c.insertBefore(t,e,n):c.appendChild(t,e))}function b(t,e,n){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)d(e[r],n,t.elm,null,!0,e,r)}else s(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function _(t){while(t.componentInstance)t=t.componentInstance._vnode;return i(t.tag)}function w(t,n){for(var r=0;r<a.create.length;++r)a.create[r](Oi,t);e=t.data.hook,i(e)&&(i(e.create)&&e.create(Oi,t),i(e.insert)&&n.push(t))}function I(t){var e;if(i(e=t.fnScopeId))c.setStyleScope(t.elm,e);else{var n=t;while(n)i(e=n.context)&&i(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e),n=n.parent}i(e=Nn)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e)}function T(t,e,n,r,i,o){for(;r<=i;++r)d(n[r],o,t,e,!1,n,r)}function E(t){var e,n,r=t.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)E(t.children[n])}function S(t,e,n){for(;e<=n;++e){var r=t[e];i(r)&&(i(r.tag)?(O(r),E(r)):f(r.elm))}}function O(t,e){if(i(e)||i(t.data)){var n,r=a.remove.length+1;for(i(e)?e.listeners+=r:e=h(t.elm,r),i(n=t.componentInstance)&&i(n=n._vnode)&&i(n.data)&&O(n,e),n=0;n<a.remove.length;++n)a.remove[n](t,e);i(n=t.data.hook)&&i(n=n.remove)?n(t,e):e()}else f(t.elm)}function C(t,e,n,o,a){var s,u,l,h,f=0,p=0,v=e.length-1,g=e[0],y=e[v],m=n.length-1,b=n[0],_=n[m],w=!a;while(f<=v&&p<=m)r(g)?g=e[++f]:r(y)?y=e[--v]:ki(g,b)?(A(g,b,o,n,p),g=e[++f],b=n[++p]):ki(y,_)?(A(y,_,o,n,m),y=e[--v],_=n[--m]):ki(g,_)?(A(g,_,o,n,m),w&&c.insertBefore(t,g.elm,c.nextSibling(y.elm)),g=e[++f],_=n[--m]):ki(y,b)?(A(y,b,o,n,p),w&&c.insertBefore(t,y.elm,g.elm),y=e[--v],b=n[++p]):(r(s)&&(s=Ni(e,f,v)),u=i(b.key)?s[b.key]:k(b,e,f,v),r(u)?d(b,o,t,g.elm,!1,n,p):(l=e[u],ki(l,b)?(A(l,b,o,n,p),e[u]=void 0,w&&c.insertBefore(t,l.elm,g.elm)):d(b,o,t,g.elm,!1,n,p)),b=n[++p]);f>v?(h=r(n[m+1])?null:n[m+1].elm,T(t,h,n,p,m,o)):p>m&&S(e,f,v)}function k(t,e,n,r){for(var o=n;o<r;o++){var a=e[o];if(i(a)&&ki(t,a))return o}}function A(t,e,n,s,u,l){if(t!==e){i(e.elm)&&i(s)&&(e=s[u]=Tt(e));var h=e.elm=t.elm;if(o(t.isAsyncPlaceholder))i(e.asyncFactory.resolved)?P(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var f,d=e.data;i(d)&&i(f=d.hook)&&i(f=f.prepatch)&&f(t,e);var p=t.children,v=e.children;if(i(d)&&_(e)){for(f=0;f<a.update.length;++f)a.update[f](t,e);i(f=d.hook)&&i(f=f.update)&&f(t,e)}r(e.text)?i(p)&&i(v)?p!==v&&C(h,p,v,n,l):i(v)?(i(t.text)&&c.setTextContent(h,""),T(h,null,v,0,v.length-1,n)):i(p)?S(p,0,p.length-1):i(t.text)&&c.setTextContent(h,""):t.text!==e.text&&c.setTextContent(h,e.text),i(d)&&i(f=d.hook)&&i(f=f.postpatch)&&f(t,e)}}}function N(t,e,n){if(o(n)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var x=g("attrs,class,staticClass,staticStyle,key");function P(t,e,n,r){var a,s=e.tag,u=e.data,c=e.children;if(r=r||u&&u.pre,e.elm=t,o(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(u)&&(i(a=u.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return v(e,n),!0;if(i(s)){if(i(c))if(t.hasChildNodes())if(i(a=u)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var l=!0,h=t.firstChild,f=0;f<c.length;f++){if(!h||!P(h,c[f],n,r)){l=!1;break}h=h.nextSibling}if(!l||h)return!1}else b(e,c,n);if(i(u)){var d=!1;for(var p in u)if(!x(p)){d=!0,w(e,n);break}!d&&u["class"]&&ge(u["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,s){if(!r(e)){var u=!1,h=[];if(r(t))u=!0,d(e,h);else{var f=i(t.nodeType);if(!f&&ki(t,e))A(t,e,h,null,null,s);else{if(f){if(1===t.nodeType&&t.hasAttribute(U)&&(t.removeAttribute(U),n=!0),o(n)&&P(t,e,h))return N(e,h,!0),t;t=l(t)}var p=t.elm,v=c.parentNode(p);if(d(e,h,p._leaveCb?null:v,c.nextSibling(p)),i(e.parent)){var g=e.parent,y=_(e);while(g){for(var m=0;m<a.destroy.length;++m)a.destroy[m](g);if(g.elm=e.elm,y){for(var b=0;b<a.create.length;++b)a.create[b](Oi,g);var w=g.data.hook.insert;if(w.merged)for(var I=1;I<w.fns.length;I++)w.fns[I]()}else Si(g);g=g.parent}}i(v)?S([t],0,0):i(t.tag)&&E(t)}}return N(e,h,u),e.elm}i(t)&&E(t)}}var Pi={create:Ri,update:Ri,destroy:function(t){Ri(t,Oi)}};function Ri(t,e){(t.data.directives||e.data.directives)&&Di(t,e)}function Di(t,e){var n,r,i,o=t===Oi,a=e===Oi,s=Li(t.data.directives,t.context),u=Li(e.data.directives,e.context),c=[],l=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Fi(i,"update",e,t),i.def&&i.def.componentUpdated&&l.push(i)):(Fi(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var h=function(){for(var n=0;n<c.length;n++)Fi(c[n],"inserted",e,t)};o?we(e,"insert",h):h()}if(l.length&&we(e,"postpatch",(function(){for(var n=0;n<l.length;n++)Fi(l[n],"componentUpdated",e,t)})),!o)for(n in s)u[n]||Fi(s[n],"unbind",t,t,a)}var ji=Object.create(null);function Li(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++)r=t[n],r.modifiers||(r.modifiers=ji),i[Mi(r)]=r,r.def=Qt(e.$options,"directives",r.name,!0);return i}function Mi(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Fi(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(Ta){ee(Ta,n.context,"directive "+t.name+" "+e+" hook")}}var Ui=[Ei,Pi];function qi(t,e){var n=e.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(t.data.attrs)||!r(e.data.attrs))){var o,a,s,u=e.elm,c=t.data.attrs||{},l=e.data.attrs||{};for(o in i(l.__ob__)&&(l=e.data.attrs=x({},l)),l)a=l[o],s=c[o],s!==a&&Vi(u,o,a);for(o in(tt||nt)&&l.value!==c.value&&Vi(u,"value",l.value),c)r(l[o])&&(Gr(o)?u.removeAttributeNS(Hr,zr(o)):Vr(o)||u.removeAttribute(o))}}function Vi(t,e,n){t.tagName.indexOf("-")>-1?Bi(t,e,n):Wr(e)?$r(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Vr(e)?t.setAttribute(e,Kr(e,n)):Gr(e)?$r(n)?t.removeAttributeNS(Hr,zr(e)):t.setAttributeNS(Hr,e,n):Bi(t,e,n)}function Bi(t,e,n){if($r(n))t.removeAttribute(e);else{if(tt&&!et&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var Ki={create:qi,update:qi};function Wi(t,e){var n=e.elm,o=e.data,a=t.data;if(!(r(o.staticClass)&&r(o.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var s=Qr(e),u=n._transitionClasses;i(u)&&(s=Jr(s,Zr(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var Hi,Gi={create:Wi,update:Wi},zi="__r",$i="__c";function Qi(t){if(i(t[zi])){var e=tt?"change":"input";t[e]=[].concat(t[zi],t[e]||[]),delete t[zi]}i(t[$i])&&(t.change=[].concat(t[$i],t.change||[]),delete t[$i])}function Yi(t,e,n){var r=Hi;return function i(){var o=e.apply(null,arguments);null!==o&&Zi(t,i,n,r)}}var Xi=ae&&!(it&&Number(it[1])<=53);function Ji(t,e,n,r){if(Xi){var i=zn,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=i||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}Hi.addEventListener(t,e,at?{capture:n,passive:r}:n)}function Zi(t,e,n,r){(r||Hi).removeEventListener(t,e._wrapper||e,n)}function to(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},i=t.data.on||{};Hi=e.elm,Qi(n),_e(n,i,Ji,Zi,Yi,e.context),Hi=void 0}}var eo,no={create:to,update:to};function ro(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,o,a=e.elm,s=t.data.domProps||{},u=e.data.domProps||{};for(n in i(u.__ob__)&&(u=e.data.domProps=x({},u)),s)n in u||(a[n]="");for(n in u){if(o=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var c=r(o)?"":String(o);io(a,c)&&(a.value=c)}else if("innerHTML"===n&&ii(a.tagName)&&r(a.innerHTML)){eo=eo||document.createElement("div"),eo.innerHTML="<svg>"+o+"</svg>";var l=eo.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(l.firstChild)a.appendChild(l.firstChild)}else if(o!==s[n])try{a[n]=o}catch(Ta){}}}}function io(t,e){return!t.composing&&("OPTION"===t.tagName||oo(t,e)||ao(t,e))}function oo(t,e){var n=!0;try{n=document.activeElement!==t}catch(Ta){}return n&&t.value!==e}function ao(t,e){var n=t.value,r=t._vModifiers;if(i(r)){if(r.number)return v(n)!==v(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}var so={create:ro,update:ro},uo=w((function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach((function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}));function co(t){var e=lo(t.style);return t.staticStyle?x(t.staticStyle,e):e}function lo(t){return Array.isArray(t)?P(t):"string"===typeof t?uo(t):t}function ho(t,e){var n,r={};if(e){var i=t;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=co(i.data))&&x(r,n)}(n=co(t.data))&&x(r,n);var o=t;while(o=o.parent)o.data&&(n=co(o.data))&&x(r,n);return r}var fo,po=/^--/,vo=/\s*!important$/,go=function(t,e,n){if(po.test(e))t.style.setProperty(e,n);else if(vo.test(n))t.style.setProperty(O(e),n.replace(vo,""),"important");else{var r=mo(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},yo=["Webkit","Moz","ms"],mo=w((function(t){if(fo=fo||document.createElement("div").style,t=T(t),"filter"!==t&&t in fo)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<yo.length;n++){var r=yo[n]+e;if(r in fo)return r}}));function bo(t,e){var n=e.data,o=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var a,s,u=e.elm,c=o.staticStyle,l=o.normalizedStyle||o.style||{},h=c||l,f=lo(e.data.style)||{};e.data.normalizedStyle=i(f.__ob__)?x({},f):f;var d=ho(e,!0);for(s in h)r(d[s])&&go(u,s,"");for(s in d)a=d[s],a!==h[s]&&go(u,s,null==a?"":a)}}var _o={create:bo,update:bo},wo=/\s+/;function Io(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wo).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function To(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wo).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function Eo(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&x(e,So(t.name||"v")),x(e,t),e}return"string"===typeof t?So(t):void 0}}var So=w((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),Oo=Y&&!et,Co="transition",ko="animation",Ao="transition",No="transitionend",xo="animation",Po="animationend";Oo&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ao="WebkitTransition",No="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(xo="WebkitAnimation",Po="webkitAnimationEnd"));var Ro=Y?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Do(t){Ro((function(){Ro(t)}))}function jo(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Io(t,e))}function Lo(t,e){t._transitionClasses&&m(t._transitionClasses,e),To(t,e)}function Mo(t,e,n){var r=Uo(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===Co?No:Po,u=0,c=function(){t.removeEventListener(s,l),n()},l=function(e){e.target===t&&++u>=a&&c()};setTimeout((function(){u<a&&c()}),o+1),t.addEventListener(s,l)}var Fo=/\b(transform|all)(,|$)/;function Uo(t,e){var n,r=window.getComputedStyle(t),i=(r[Ao+"Delay"]||"").split(", "),o=(r[Ao+"Duration"]||"").split(", "),a=qo(i,o),s=(r[xo+"Delay"]||"").split(", "),u=(r[xo+"Duration"]||"").split(", "),c=qo(s,u),l=0,h=0;e===Co?a>0&&(n=Co,l=a,h=o.length):e===ko?c>0&&(n=ko,l=c,h=u.length):(l=Math.max(a,c),n=l>0?a>c?Co:ko:null,h=n?n===Co?o.length:u.length:0);var f=n===Co&&Fo.test(r[Ao+"Property"]);return{type:n,timeout:l,propCount:h,hasTransform:f}}function qo(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return Vo(e)+Vo(t[n])})))}function Vo(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Bo(t,e){var n=t.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Eo(t.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){var a=o.css,s=o.type,c=o.enterClass,l=o.enterToClass,h=o.enterActiveClass,f=o.appearClass,d=o.appearToClass,p=o.appearActiveClass,g=o.beforeEnter,y=o.enter,m=o.afterEnter,b=o.enterCancelled,_=o.beforeAppear,w=o.appear,I=o.afterAppear,T=o.appearCancelled,E=o.duration,S=Nn,O=Nn.$vnode;while(O&&O.parent)S=O.context,O=O.parent;var C=!S._isMounted||!t.isRootInsert;if(!C||w||""===w){var k=C&&f?f:c,A=C&&p?p:h,N=C&&d?d:l,x=C&&_||g,P=C&&"function"===typeof w?w:y,R=C&&I||m,D=C&&T||b,j=v(u(E)?E.enter:E);0;var L=!1!==a&&!et,M=Ho(P),U=n._enterCb=F((function(){L&&(Lo(n,N),Lo(n,A)),U.cancelled?(L&&Lo(n,k),D&&D(n)):R&&R(n),n._enterCb=null}));t.data.show||we(t,"insert",(function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),P&&P(n,U)})),x&&x(n),L&&(jo(n,k),jo(n,A),Do((function(){Lo(n,k),U.cancelled||(jo(n,N),M||(Wo(j)?setTimeout(U,j):Mo(n,s,U)))}))),t.data.show&&(e&&e(),P&&P(n,U)),L||M||U()}}}function Ko(t,e){var n=t.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=Eo(t.data.transition);if(r(o)||1!==n.nodeType)return e();if(!i(n._leaveCb)){var a=o.css,s=o.type,c=o.leaveClass,l=o.leaveToClass,h=o.leaveActiveClass,f=o.beforeLeave,d=o.leave,p=o.afterLeave,g=o.leaveCancelled,y=o.delayLeave,m=o.duration,b=!1!==a&&!et,_=Ho(d),w=v(u(m)?m.leave:m);0;var I=n._leaveCb=F((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(Lo(n,l),Lo(n,h)),I.cancelled?(b&&Lo(n,c),g&&g(n)):(e(),p&&p(n)),n._leaveCb=null}));y?y(T):T()}function T(){I.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),f&&f(n),b&&(jo(n,c),jo(n,h),Do((function(){Lo(n,c),I.cancelled||(jo(n,l),_||(Wo(w)?setTimeout(I,w):Mo(n,s,I)))}))),d&&d(n,I),b||_||I())}}function Wo(t){return"number"===typeof t&&!isNaN(t)}function Ho(t){if(r(t))return!1;var e=t.fns;return i(e)?Ho(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Go(t,e){!0!==e.data.show&&Bo(e)}var zo=Y?{create:Go,activate:Go,remove:function(t,e){!0!==t.data.show?Ko(t,e):e()}}:{},$o=[Ki,Gi,no,so,_o,zo],Qo=$o.concat(Ui),Yo=xi({nodeOps:Ti,modules:Qo});et&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&ia(t,"input")}));var Xo={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?we(n,"postpatch",(function(){Xo.componentUpdated(t,e,n)})):Jo(t,e,n.context),t._vOptions=[].map.call(t.options,ea)):("textarea"===n.tag||ci(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",na),t.addEventListener("compositionend",ra),t.addEventListener("change",ra),et&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Jo(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,ea);if(i.some((function(t,e){return!L(t,r[e])}))){var o=t.multiple?e.value.some((function(t){return ta(t,i)})):e.value!==e.oldValue&&ta(e.value,i);o&&ia(t,"change")}}}};function Jo(t,e,n){Zo(t,e,n),(tt||nt)&&setTimeout((function(){Zo(t,e,n)}),0)}function Zo(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],i)o=M(r,ea(a))>-1,a.selected!==o&&(a.selected=o);else if(L(ea(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function ta(t,e){return e.every((function(e){return!L(e,t)}))}function ea(t){return"_value"in t?t._value:t.value}function na(t){t.target.composing=!0}function ra(t){t.target.composing&&(t.target.composing=!1,ia(t.target,"input"))}function ia(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function oa(t){return!t.componentInstance||t.data&&t.data.transition?t:oa(t.componentInstance._vnode)}var aa={bind:function(t,e,n){var r=e.value;n=oa(n);var i=n.data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Bo(n,(function(){t.style.display=o}))):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value,i=e.oldValue;if(!r!==!i){n=oa(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?Bo(n,(function(){t.style.display=t.__vOriginalDisplay})):Ko(n,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}},sa={model:Xo,show:aa},ua={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ca(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?ca(Tn(e.children)):t}function la(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[T(o)]=i[o];return e}function ha(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function fa(t){while(t=t.parent)if(t.data.transition)return!0}function da(t,e){return e.key===t.key&&e.tag===t.tag}var pa=function(t){return t.tag||In(t)},va=function(t){return"show"===t.name},ga={name:"transition",props:ua,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(pa),n.length)){0;var r=this.mode;0;var i=n[0];if(fa(this.$vnode))return i;var o=ca(i);if(!o)return i;if(this._leaving)return ha(t,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var u=(o.data||(o.data={})).transition=la(this),c=this._vnode,l=ca(c);if(o.data.directives&&o.data.directives.some(va)&&(o.data.show=!0),l&&l.data&&!da(o,l)&&!In(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var h=l.data.transition=x({},u);if("out-in"===r)return this._leaving=!0,we(h,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),ha(t,i);if("in-out"===r){if(In(o))return c;var f,d=function(){f()};we(u,"afterEnter",d),we(u,"enterCancelled",d),we(h,"delayLeave",(function(t){f=t}))}}return i}}},ya=x({tag:String,moveClass:String},ua);delete ya.mode;var ma={props:ya,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var i=xn(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=la(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(r){for(var c=[],l=[],h=0;h<r.length;h++){var f=r[h];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?c.push(f):l.push(f)}this.kept=t(e,null,c),this.removed=l}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(ba),t.forEach(_a),t.forEach(wa),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,r=n.style;jo(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(No,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(No,t),n._moveCb=null,Lo(n,e))})}})))},methods:{hasMove:function(t,e){if(!Oo)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){To(n,t)})),Io(n,e),n.style.display="none",this.$el.appendChild(n);var r=Uo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function ba(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function _a(t){t.data.newPos=t.elm.getBoundingClientRect()}function wa(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var Ia={Transition:ga,TransitionGroup:ma};Tr.config.mustUseProp=qr,Tr.config.isReservedTag=oi,Tr.config.isReservedAttr=Fr,Tr.config.getTagNamespace=ai,Tr.config.isUnknownElement=ui,x(Tr.options.directives,sa),x(Tr.options.components,Ia),Tr.prototype.__patch__=Y?Yo:R,Tr.prototype.$mount=function(t,e){return t=t&&Y?li(t):void 0,Dn(this,t,e)},Y&&setTimeout((function(){B.devtools&&ct&&ct.emit("init",Tr)}),0),e["a"]=Tr}).call(this,n("c8ba"))},"2cf4":function(t,e,n){var r,i,o,a=n("da84"),s=n("d039"),u=n("0366"),c=n("1be4"),l=n("cc12"),h=n("1cdc"),f=n("605d"),d=a.location,p=a.setImmediate,v=a.clearImmediate,g=a.process,y=a.MessageChannel,m=a.Dispatch,b=0,_={},w="onreadystatechange",I=function(t){if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},T=function(t){return function(){I(t)}},E=function(t){I(t.data)},S=function(t){a.postMessage(t+"",d.protocol+"//"+d.host)};p&&v||(p=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return _[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(b),b},v=function(t){delete _[t]},f?r=function(t){g.nextTick(T(t))}:m&&m.now?r=function(t){m.now(T(t))}:y&&!h?(i=new y,o=i.port2,i.port1.onmessage=E,r=u(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&d&&"file:"!==d.protocol&&!s(S)?(r=S,a.addEventListener("message",E,!1)):r=w in l("script")?function(t){c.appendChild(l("script"))[w]=function(){c.removeChild(this),I(t)}}:function(t){setTimeout(T(t),0)}),t.exports={set:p,clear:v}},"2d00":function(t,e,n){var r,i,o=n("da84"),a=n("342f"),s=o.process,u=s&&s.versions,c=u&&u.v8;c?(r=c.split("."),i=r[0]<4?1:r[0]+r[1]):a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(i=r[1]))),t.exports=i&&+i},"342f":function(t,e,n){var r=n("d066");t.exports=r("navigator","userAgent")||""},"35a1":function(t,e,n){var r=n("f5df"),i=n("3f8c"),o=n("b622"),a=o("iterator");t.exports=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||i[r(t)]}},"37e8":function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("825a"),a=n("df75");t.exports=r?Object.defineProperties:function(t,e){o(t);var n,r=a(e),s=r.length,u=0;while(s>u)i.f(t,n=r[u++],e[n]);return t}},"3bbe":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3f8c":function(t,e){t.exports={}},4160:function(t,e,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"428f":function(t,e,n){var r=n("da84");t.exports=r},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("df7c")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},"44ad":function(t,e,n){var r=n("d039"),i=n("c6b6"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var r=n("b622"),i=n("7c73"),o=n("9bf2"),a=r("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},"44de":function(t,e,n){var r=n("da84");t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},4840:function(t,e,n){var r=n("825a"),i=n("1c0b"),o=n("b622"),a=o("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[a])?e:i(n)}},4930:function(t,e,n){var r=n("2d00"),i=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())||!Symbol.sham&&r&&r<41}))},"4d64":function(t,e,n){var r=n("fc6a"),i=n("50c4"),o=n("23cb"),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){while(c>l)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},"50c4":function(t,e,n){var r=n("a691"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},5135:function(t,e,n){var r=n("7b0b"),i={}.hasOwnProperty;t.exports=function(t,e){return i.call(r(t),e)}},5325:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return a})),n.d(e,"__decorate",(function(){return s})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return h})),n.d(e,"__createBinding",(function(){return f})),n.d(e,"__exportStar",(function(){return d})),n.d(e,"__values",(function(){return p})),n.d(e,"__read",(function(){return v})),n.d(e,"__spread",(function(){return g})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__spreadArray",(function(){return m})),n.d(e,"__await",(function(){return b})),n.d(e,"__asyncGenerator",(function(){return _})),n.d(e,"__asyncDelegator",(function(){return w})),n.d(e,"__asyncValues",(function(){return I})),n.d(e,"__makeTemplateObject",(function(){return T})),n.d(e,"__importStar",(function(){return S})),n.d(e,"__importDefault",(function(){return O})),n.d(e,"__classPrivateFieldGet",(function(){return C})),n.d(e,"__classPrivateFieldSet",(function(){return k}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var f=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function d(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||f(e,t,n)}function p(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function m(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function _(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{u(i[t](e))}catch(n){h(o[0][3],n)}}function u(t){t.value instanceof b?Promise.resolve(t.value.v).then(c,l):h(o[0][2],t)}function c(t){s("next",t)}function l(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:b(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function I(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"===typeof p?p(t):t[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){e=t[n](e),i(r,o,e.done,e.value)}))}}function i(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}}function T(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e};function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&f(e,t,n);return E(e,t),e}function O(t){return t&&t.__esModule?t:{default:t}}function C(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function k(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}},5692:function(t,e,n){var r=n("c430"),i=n("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.13.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,n){var r=n("d066"),i=n("241c"),o=n("7418"),a=n("825a");t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5fcf":function(t,e,n){"use strict";var r=n("cc84"),i=n("ffa6"),o=n("5325"),a=n("a8e9"),s=n("abfd");function u(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var c,l=u(r),h=(c={},c["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new a.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenListeners:[]},v={enabled:!1};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(t){return d.get(t)||p}function y(t,e){d.set(t,e)}function m(){return v}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(){return self.grecaptcha}function _(t){if(!g(t).activated)throw f.create("use-before-activation",{appName:t.name})}function w(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I="https://www.google.com/recaptcha/api.js";function T(t,e){var n=g(t),r=new a.Deferred;y(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u=b();return u?u.ready((function(){S(t,e,u,i),r.resolve(u)})):O((function(){var n=b();if(!n)throw new Error("no recaptcha");n.ready((function(){S(t,e,n,i),r.resolve(n)}))})),r.promise}function E(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return _(t),e=g(t).reCAPTCHAState,[4,e.initialized.promise];case 1:return n=r.sent(),[2,new Promise((function(e,r){var i=g(t).reCAPTCHAState;n.ready((function(){e(n.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function S(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),a=g(t);y(t,o.__assign(o.__assign({},a),{reCAPTCHAState:o.__assign(o.__assign({},a.reCAPTCHAState),{widgetId:i})}))}function O(t){var e=document.createElement("script");e.src=""+I,e.onload=t,document.head.appendChild(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(t,e,n){var r=g(t);if(r.activated)throw f.create("already-activated",{appName:t.name});var i=o.__assign(o.__assign({},r),{activated:!0});"string"===typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,y(t,i),i.siteKey&&T(t,i.siteKey).catch((function(){}))}function k(t,e){var n=g(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),y(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A="https://content-firebaseappcheck.googleapis.com/v1beta",N="exchangeRecaptchaToken",x="exchangeDebugToken",P={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},R=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new a.Deferred,[4,D(this.getNextRun(t))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new a.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function D(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,(function(){var t,i,a,s,u,c,l,h,d,p;return o.__generator(this,(function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},i=e.getImmediate({optional:!0}),i&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return s=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==s.status)throw f.create("fetch-status-error",{httpStatus:s.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,s.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(h=c.ttl.match(/^([\d.]+)(s)$/),!h||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}}))}))}function L(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:A+"/projects/"+r+"/apps/"+i+":"+N+"?key="+o,body:{recaptcha_token:e}}}function M(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:A+"/projects/"+r+"/apps/"+i+":"+x+"?key="+o,body:{debug_token:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F="firebase-app-check-database",U=1,q="firebase-app-check-store",V="debug-token",B=null;function K(){return B||(B=new Promise((function(t,e){try{var n=indexedDB.open(F,U);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(f.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(q,{keyPath:"compositeKey"})}}}catch(r){e(f.create("storage-open",{originalErrorMessage:r.message}))}})),B)}function W(t){return Q(Y(t))}function H(t,e){return $(Y(t),e)}function G(t){return $(V,t)}function z(){return Q(V)}function $(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,K()];case 1:return n=o.sent(),r=n.transaction(q,"readwrite"),i=r.objectStore(q),a=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){a.onsuccess=function(e){t()},r.onerror=function(t){var n;e(f.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function Q(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,K()];case 1:return e=o.sent(),n=e.transaction(q,"readonly"),r=n.objectStore(q),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(f.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function Y(t){return t.options.appId+"-"+t.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X=new s.Logger("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!a.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,W(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),X.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}function Z(t,e){return a.isIndexedDBAvailable()?H(t,e).catch((function(t){X.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function tt(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,z()];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e=w(),G(e).catch((function(t){return X.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(){var t=m();return t.enabled}function nt(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){if(t=m(),t.enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}function rt(){var t=a.getGlobal();if("string"===typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=m();e.enabled=!0;var n=new a.Deferred;e.token=n,"string"===typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(tt())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it={error:"UNKNOWN_ERROR"};function ot(t){return a.base64.encodeString(JSON.stringify(t),!1)}function at(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,s,u,c,l,h,d,p,v,m,b,w,I;return o.__generator(this,(function(T){switch(T.label){case 0:return _(t),et()?(i=j,s=M,u=[t],[4,nt()]):[3,3];case 1:return[4,i.apply(void 0,[s.apply(void 0,u.concat([T.sent()])),e])];case 2:return r=T.sent(),[2,{token:r.token}];case 3:return c=g(t),l=c.token,h=void 0,l?[3,5]:[4,J(t)];case 4:d=T.sent(),d&&ht(d)&&(l=d,y(t,o.__assign(o.__assign({},c),{token:l})),lt(t,{token:l.token})),T.label=5;case 5:if(!n&&l&&ht(l))return[2,{token:l.token}];T.label=6;case 6:return T.trys.push([6,12,,13]),c.customProvider?[4,c.customProvider.getToken()]:[3,8];case 7:return p=T.sent(),v=a.issuedAtTime(p.token),m=null!==v&&v<Date.now()&&v>0?1e3*v:Date.now(),l=o.__assign(o.__assign({},p),{issuedAtTimeMillis:m}),[3,11];case 8:return[4,E(t).catch((function(t){throw f.create("recaptcha-error")}))];case 9:return b=T.sent(),[4,j(L(t,b),e)];case 10:l=T.sent(),T.label=11;case 11:return[3,13];case 12:return w=T.sent(),X.error(w),h=w,[3,13];case 13:return l?[3,14]:(I=ft(h),[3,16]);case 14:return I={token:l.token},y(t,o.__assign(o.__assign({},c),{token:l})),[4,Z(t,l)];case 15:T.sent(),T.label=16;case 16:return lt(t,I),[2,I]}}))}))}function st(t,e,n){var r=g(t),i=o.__assign(o.__assign({},r),{tokenListeners:o.__spreadArray(o.__spreadArray([],r.tokenListeners),[n])});if(et()){var a=m();a.enabled&&a.token&&a.token.promise.then((function(t){return n({token:t})})).catch((function(){}))}else{if(!i.tokenRefresher){var s=ct(t,e);i.tokenRefresher=s}if(i.tokenRefresher.isRunning()||!0!==r.isTokenAutoRefreshEnabled||i.tokenRefresher.start(),r.token&&ht(r.token)){var u=r.token;Promise.resolve().then((function(){return n({token:u.token})})).catch((function(){}))}}y(t,i)}function ut(t,e){var n=g(t),r=n.tokenListeners.filter((function(t){return t!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),y(t,o.__assign(o.__assign({},n),{tokenListeners:r}))}function ct(t,e){var n=this;return new R((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return n=g(t),n.token?[3,2]:[4,at(t,e)];case 1:return r=i.sent(),[3,4];case 2:return[4,at(t,e,!0)];case 3:r=i.sent(),i.label=4;case 4:if(r.error)throw r.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=g(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),P.RETRIAL_MIN_WAIT,P.RETRIAL_MAX_WAIT)}function lt(t,e){for(var n=g(t).tokenListeners,r=0,i=n;r<i.length;r++){var o=i[r];try{o(e)}catch(a){}}}function ht(t){return t.expireTimeMillis-Date.now()>0}function ft(t){return{token:ot(it),error:t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t){return{activate:function(e,n){return C(t,e,n)},setTokenAutoRefreshEnabled:function(e){return k(t,e)}}}function pt(t,e){return{getToken:function(n){return at(t,e,n)},addTokenListener:function(n){return st(t,e,n)},removeTokenListener:function(e){return ut(t,e)}}}var vt="@firebase/app-check",gt="0.1.1",yt="appCheck",mt="app-check-internal";function bt(t){t.INTERNAL.registerComponent(new i.Component(yt,(function(t){var e=t.getProvider("app").getImmediate();return dt(e)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){var r=t.getProvider(mt);r.initialize()}))),t.INTERNAL.registerComponent(new i.Component(mt,(function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger");return pt(e,n)}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion(vt,gt)}bt(l["default"]),rt()},"605d":function(t,e,n){var r=n("c6b6"),i=n("da84");t.exports="process"==r(i.process)},6069:function(t,e){t.exports="object"==typeof window},"60da":function(t,e,n){"use strict";var r=n("83ab"),i=n("d039"),o=n("df75"),a=n("7418"),s=n("d1e7"),u=n("7b0b"),c=n("44ad"),l=Object.assign,h=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||o(l({},e)).join("")!=i}))?function(t,e){var n=u(t),i=arguments.length,l=1,h=a.f,f=s.f;while(i>l){var d,p=c(arguments[l++]),v=h?o(p).concat(h(p)):o(p),g=v.length,y=0;while(g>y)d=v[y++],r&&!f.call(p,d)||(n[d]=p[d])}return n}:l},"65f0":function(t,e,n){var r=n("861d"),i=n("e8b5"),o=n("b622"),a=o("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"69f3":function(t,e,n){var r,i,o,a=n("7f9a"),s=n("da84"),u=n("861d"),c=n("9112"),l=n("5135"),h=n("c6cd"),f=n("f772"),d=n("d012"),p="Object already initialized",v=s.WeakMap,g=function(t){return o(t)?i(t):r(t,{})},y=function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(a||h.state){var m=h.state||(h.state=new v),b=m.get,_=m.has,w=m.set;r=function(t,e){if(_.call(m,t))throw new TypeError(p);return e.facade=t,w.call(m,t,e),e},i=function(t){return b.call(m,t)||{}},o=function(t){return _.call(m,t)}}else{var I=f("state");d[I]=!0,r=function(t,e){if(l(t,I))throw new TypeError(p);return e.facade=t,c(t,I,e),e},i=function(t){return l(t,I)?t[I]:{}},o=function(t){return l(t,I)}}t.exports={set:r,get:i,has:o,enforce:g,getterFor:y}},"6eeb":function(t,e,n){var r=n("da84"),i=n("9112"),o=n("5135"),a=n("ce4e"),s=n("8925"),u=n("69f3"),c=u.get,l=u.enforce,h=String(String).split("String");(t.exports=function(t,e,n,s){var u,c=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),u=l(n),u.source||(u.source=h.join("string"==typeof e?e:""))),t!==r?(c?!d&&t[e]&&(f=!0):delete t[e],f?t[e]=n:i(t,e,n)):f?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},7418:function(t,e){e.f=Object.getOwnPropertySymbols},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(t,e,n){var r=n("1d80");t.exports=function(t){return Object(r(t))}},"7c73":function(t,e,n){var r,i=n("825a"),o=n("37e8"),a=n("7839"),s=n("d012"),u=n("1be4"),c=n("cc12"),l=n("f772"),h=">",f="<",d="prototype",p="script",v=l("IE_PROTO"),g=function(){},y=function(t){return f+p+h+t+f+"/"+p+h},m=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=c("iframe"),n="java"+p+":";return e.style.display="none",u.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(y("document.F=Object")),t.close(),t.F},_=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}_=r?m(r):b();var t=a.length;while(t--)delete _[d][a[t]];return _()};s[v]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(g[d]=i(t),n=new g,g[d]=null,n[v]=t):n=_(),void 0===e?n:o(n,e)}},"7dd0":function(t,e,n){"use strict";var r=n("23e7"),i=n("9ed3"),o=n("e163"),a=n("d2bb"),s=n("d44e"),u=n("9112"),c=n("6eeb"),l=n("b622"),h=n("c430"),f=n("3f8c"),d=n("ae93"),p=d.IteratorPrototype,v=d.BUGGY_SAFARI_ITERATORS,g=l("iterator"),y="keys",m="values",b="entries",_=function(){return this};t.exports=function(t,e,n,l,d,w,I){i(n,e,l);var T,E,S,O=function(t){if(t===d&&x)return x;if(!v&&t in A)return A[t];switch(t){case y:return function(){return new n(this,t)};case m:return function(){return new n(this,t)};case b:return function(){return new n(this,t)}}return function(){return new n(this)}},C=e+" Iterator",k=!1,A=t.prototype,N=A[g]||A["@@iterator"]||d&&A[d],x=!v&&N||O(d),P="Array"==e&&A.entries||N;if(P&&(T=o(P.call(new t)),p!==Object.prototype&&T.next&&(h||o(T)===p||(a?a(T,p):"function"!=typeof T[g]&&u(T,g,_)),s(T,C,!0,!0),h&&(f[C]=_))),d==m&&N&&N.name!==m&&(k=!0,x=function(){return N.call(this)}),h&&!I||A[g]===x||u(A,g,x),f[e]=x,d)if(E={values:O(m),keys:w?x:O(y),entries:O(b)},I)for(S in E)(v||k||!(S in A))&&c(A,S,E[S]);else r({target:e,proto:!0,forced:v||k},E);return E}},"7f9a":function(t,e,n){var r=n("da84"),i=n("8925"),o=r.WeakMap;t.exports="function"===typeof o&&/native code/.test(i(o))},"825a":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8925:function(t,e,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},"90e3":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},9112:function(t,e,n){var r=n("83ab"),i=n("9bf2"),o=n("5c6c");t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},"945c":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return E})),n.d(e,"b",(function(){return ac})),n.d(e,"c",(function(){return gc})),n.d(e,"d",(function(){return lc})),n.d(e,"e",(function(){return oc})),n.d(e,"f",(function(){return cc})),n.d(e,"g",(function(){return Xs})),n.d(e,"h",(function(){return uc})),n.d(e,"i",(function(){return fc})),n.d(e,"j",(function(){return mc})),n.d(e,"k",(function(){return yc})),n.d(e,"l",(function(){return ic})),n.d(e,"m",(function(){return wc})),n.d(e,"n",(function(){return Bs})),n.d(e,"o",(function(){return Ec})),n.d(e,"p",(function(){return Oc})),n.d(e,"q",(function(){return Ks})),n.d(e,"r",(function(){return Sc})),n.d(e,"s",(function(){return Tc})),n.d(e,"t",(function(){return _c}));var r=n("a8e9"),i=n("abfd"),o=n("c7b2"),a=n("a2cd"),s=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();s.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},c=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(a["b"])(e,t),e}(Error),l=new i["Logger"]("@firebase/firestore");function h(){return l.logLevel}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=i["LogLevel"].DEBUG){var r=e.map(v);l.debug.apply(l,Object(a["d"])(["Firestore (8.6.3): "+t],r))}}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=i["LogLevel"].ERROR){var r=e.map(v);l.error.apply(l,Object(a["d"])(["Firestore (8.6.3): "+t],r))}}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=i["LogLevel"].WARN){var r=e.map(v);l.warn.apply(l,Object(a["d"])(["Firestore (8.6.3): "+t],r))}}function v(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.3) INTERNAL ASSERTION FAILED: "+t;throw d(e),new Error(e)}function y(t,e){t||g()}function m(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function w(t,e){return t<e?-1:t>e?1:0}function I(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function T(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?w(this.nanoseconds,t.nanoseconds):w(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),S=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new E(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function C(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function k(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&g(),void 0===n?n=t.length-e:n>t.length-e&&g(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(A),x=/^[_a-zA-Z][_a-zA-Z0-9]*$/,P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return x.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new c(u.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new c(u.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var l=t[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new c(u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new c(u.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(A),R=function(){function t(t){this.fields=t,t.sort(P.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return I(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),D=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return w(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();D.EMPTY_BYTE_STRING=new D("");var j=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function L(t){if(y(!!t),"string"==typeof t){var e=0,n=j.exec(t);if(y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:M(t.seconds),nanos:M(t.nanos)}}function M(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function F(t){return"string"==typeof t?D.fromBase64String(t):D.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function q(t){var e=t.mapValue.fields.__previous_value__;return U(e)?q(e):e}function V(t){var e=L(t.mapValue.fields.__local_write_time__.timestampValue);return new E(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t){return null==t}function K(t){return 0===t&&1/t==-1/0}function W(t){return"number"==typeof t&&Number.isInteger(t)&&!K(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(N.fromString(e))},t.fromName=function(e){return new t(N.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===N.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return N.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new N(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?U(t)?4:10:g()}function z(t,e){var n=G(t);if(n!==G(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return V(t).isEqual(V(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=L(t.timestampValue),r=L(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return F(t.bytesValue).isEqual(F(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return M(t.geoPointValue.latitude)===M(e.geoPointValue.latitude)&&M(t.geoPointValue.longitude)===M(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return M(t.integerValue)===M(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=M(t.doubleValue),r=M(e.doubleValue);return n===r?K(n)===K(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return I(t.arrayValue.values||[],e.arrayValue.values||[],z);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(O(n)!==O(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!z(n[i],r[i])))return!1;return!0}(t,e);default:return g()}}function $(t,e){return void 0!==(t.values||[]).find((function(t){return z(t,e)}))}function Q(t,e){var n=G(t),r=G(e);if(n!==r)return w(n,r);switch(n){case 0:return 0;case 1:return w(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=M(t.integerValue||t.doubleValue),r=M(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Y(t.timestampValue,e.timestampValue);case 4:return Y(V(t),V(e));case 5:return w(t.stringValue,e.stringValue);case 6:return function(t,e){var n=F(t),r=F(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=w(n[i],r[i]);if(0!==o)return o}return w(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=w(M(t.latitude),M(e.latitude));return 0!==n?n:w(M(t.longitude),M(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Q(n[i],r[i]);if(o)return o}return w(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=w(r[a],o[a]);if(0!==s)return s;var u=Q(n[r[a]],i[o[a]]);if(0!==u)return u}return w(r.length,o.length)}(t.mapValue,e.mapValue);default:throw g()}}function Y(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return w(t,e);var n=L(t),r=L(e),i=w(n.seconds,r.seconds);return 0!==i?i:w(n.nanos,r.nanos)}function X(t){return J(t)}function J(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=L(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?F(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,H.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=J(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+J(t.fields[o])}return e+"}"}(t.mapValue):g();var e,n}function Z(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function tt(t){return!!t&&"integerValue"in t}function et(t){return!!t&&"arrayValue"in t}function nt(t){return!!t&&"nullValue"in t}function rt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function it(t){return!!t&&"mapValue"in t}function ot(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},L(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return C(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ot(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ot(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!it(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ot(e)},t.prototype.setAll=function(t){var e=this,n=P.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ot(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());it(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return z(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];it(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){C(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ot(this.value))},t}();function st(t){var e=[];return C(t.fields,(function(t,n){var r=new P([t]);if(it(n)){var i=st(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new R(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ut=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,S.min(),at.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,at.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,at.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=at.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=at.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ct=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new ct(t,e,n,r,i,o,a)}function ht(t){var e=m(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+X(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),B(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Et(e.startAt)),e.endAt&&(n+="|ub:",n+=Et(e.endAt)),e.h=n}return e.h}function ft(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ot(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!z(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kt(t.startAt,e.startAt)&&kt(t.endAt,e.endAt)}function dt(t){return H.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var pt=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(a["b"])(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new vt(t,n,r):"array-contains"===n?new bt(t,r):"in"===n?new _t(t,r):"not-in"===n?new wt(t,r):"array-contains-any"===n?new It(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new gt(t,n):new yt(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Q(e,this.value)):null!==e&&G(this.value)===G(e)&&this.m(Q(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return g()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),vt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=H.fromName(r.referenceValue),i}return Object(a["b"])(e,t),e.prototype.matches=function(t){var e=H.comparator(t.key,this.key);return this.m(e)},e}(pt),gt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=mt("in",n),r}return Object(a["b"])(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(pt),yt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=mt("not-in",n),r}return Object(a["b"])(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(pt);function mt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return H.fromName(t.referenceValue)}))}var bt=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(a["b"])(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return et(e)&&$(e.arrayValue,this.value)},e}(pt),_t=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(a["b"])(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&$(this.value.arrayValue,e)},e}(pt),wt=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(a["b"])(e,t),e.prototype.matches=function(t){if($(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!$(this.value.arrayValue,e)},e}(pt),It=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(a["b"])(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!et(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return $(e.value.arrayValue,t)}))},e}(pt),Tt=function(t,e){this.position=t,this.before=e};function Et(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return X(t)})).join(",")}var St=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ot(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Ct(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?H.comparator(H.fromName(a.referenceValue),n.key):Q(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function kt(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!z(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Nt(t,e,n,r,i,o,a,s){return new At(t,e,n,r,i,o,a,s)}function xt(t){return new At(t)}function Pt(t){return!B(t.limit)&&"F"===t.limitType}function Rt(t){return!B(t.limit)&&"L"===t.limitType}function Dt(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function jt(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Lt(t){return null!==t.collectionGroup}function Mt(t){var e=m(t);if(null===e.p){e.p=[];var n=jt(e),r=Dt(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new St(n)),e.p.push(new St(P.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new St(P.keyField(),u))}}}return e.p}function Ft(t){var e=m(t);if(!e.T)if("F"===e.limitType)e.T=lt(e.path,e.collectionGroup,Mt(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Mt(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new St(o.field,a))}var s=e.endAt?new Tt(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Tt(e.startAt.position,!e.startAt.before):null;e.T=lt(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Ut(t,e,n){return new At(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qt(t,e){return ft(Ft(t),Ft(e))&&t.limitType===e.limitType}function Vt(t){return ht(Ft(t))+"|lt:"+t.limitType}function Bt(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+X(e.value);var e})).join(", ")+"]"),B(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Et(t.startAt)),t.endAt&&(e+=", endAt: "+Et(t.endAt)),"Target("+e+")"}(Ft(t))+"; limitType="+t.limitType+")"}function Kt(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):H.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ct(t.startAt,Mt(t),e))&&(!t.endAt||!Ct(t.endAt,Mt(t),e))}(t,e)}function Wt(t){return function(e,n){for(var r=!1,i=0,o=Mt(t);i<o.length;i++){var a=o[i],s=Ht(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Ht(t,e,n){var r=t.field.isKeyField()?H.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Q(r,i):g()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return g()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:K(e)?"-0":e}}function zt(t){return{integerValue:""+t}}function $t(t,e){return W(e)?zt(e):Gt(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt=function(){this._=void 0};function Yt(t,e,n){return t instanceof Zt?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof te?ee(t,e):t instanceof ne?re(t,e):function(t,e){var n=Jt(t,e),r=oe(n)+oe(t.A);return tt(n)&&tt(t.A)?zt(r):Gt(t.R,r)}(t,e)}function Xt(t,e,n){return t instanceof te?ee(t,e):t instanceof ne?re(t,e):n}function Jt(t,e){return t instanceof ie?tt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),e}(Qt),te=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(a["b"])(e,t),e}(Qt);function ee(t,e){for(var n=ae(e),r=function(t){n.some((function(e){return z(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ne=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(a["b"])(e,t),e}(Qt);function re(t,e){for(var n=ae(e),r=function(t){n=n.filter((function(e){return!z(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ie=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(a["b"])(e,t),e}(Qt);function oe(t){return M(t.integerValue||t.doubleValue)}function ae(t){return et(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se=function(t,e){this.field=t,this.transform=e},ue=function(t,e){this.version=t,this.transformResults=e},ce=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function le(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var he=function(){};function fe(t,e,n){t instanceof ye?function(t,e,n){var r=t.value.clone(),i=_e(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof me?function(t,e,n){if(le(t.precondition,e)){var r=_e(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(be(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function de(t,e,n){t instanceof ye?function(t,e,n){if(le(t.precondition,e)){var r=t.value.clone(),i=we(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(ge(e),r).setHasLocalMutations()}}(t,e,n):t instanceof me?function(t,e,n){if(le(t.precondition,e)){var r=we(t.fieldTransforms,n,e),i=e.data;i.setAll(be(t)),i.setAll(r),e.convertToFoundDocument(ge(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){le(t.precondition,e)&&e.convertToNoDocument(S.min())}(t,e)}function pe(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Jt(o.transform,a||null);null!=s&&(null==n&&(n=at.empty()),n.set(o.field,s))}return n||null}function ve(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&I(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof te&&e instanceof te||t instanceof ne&&e instanceof ne?I(t.elements,e.elements,z):t instanceof ie&&e instanceof ie?z(t.A,e.A):t instanceof Zt&&e instanceof Zt}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ge(t){return t.isFoundDocument()?t.version:S.min()}var ye=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(a["b"])(e,t),e}(he),me=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(a["b"])(e,t),e}(he);function be(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function _e(t,e,n){var r=new Map;y(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Xt(a,s,n[i]))}return r}function we(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Yt(s,u,e))}return r}var Ie,Te,Ee=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(a["b"])(e,t),e}(he),Se=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(a["b"])(e,t),e}(he),Oe=function(t){this.count=t};function Ce(t){switch(t){case u.OK:return g();case u.CANCELLED:case u.UNKNOWN:case u.DEADLINE_EXCEEDED:case u.RESOURCE_EXHAUSTED:case u.INTERNAL:case u.UNAVAILABLE:case u.UNAUTHENTICATED:return!1;case u.INVALID_ARGUMENT:case u.NOT_FOUND:case u.ALREADY_EXISTS:case u.PERMISSION_DENIED:case u.FAILED_PRECONDITION:case u.ABORTED:case u.OUT_OF_RANGE:case u.UNIMPLEMENTED:case u.DATA_LOSS:return!0;default:return g()}}function ke(t){if(void 0===t)return d("GRPC error has no .code"),u.UNKNOWN;switch(t){case Ie.OK:return u.OK;case Ie.CANCELLED:return u.CANCELLED;case Ie.UNKNOWN:return u.UNKNOWN;case Ie.DEADLINE_EXCEEDED:return u.DEADLINE_EXCEEDED;case Ie.RESOURCE_EXHAUSTED:return u.RESOURCE_EXHAUSTED;case Ie.INTERNAL:return u.INTERNAL;case Ie.UNAVAILABLE:return u.UNAVAILABLE;case Ie.UNAUTHENTICATED:return u.UNAUTHENTICATED;case Ie.INVALID_ARGUMENT:return u.INVALID_ARGUMENT;case Ie.NOT_FOUND:return u.NOT_FOUND;case Ie.ALREADY_EXISTS:return u.ALREADY_EXISTS;case Ie.PERMISSION_DENIED:return u.PERMISSION_DENIED;case Ie.FAILED_PRECONDITION:return u.FAILED_PRECONDITION;case Ie.ABORTED:return u.ABORTED;case Ie.OUT_OF_RANGE:return u.OUT_OF_RANGE;case Ie.UNIMPLEMENTED:return u.UNIMPLEMENTED;case Ie.DATA_LOSS:return u.DATA_LOSS;default:return g()}}(Te=Ie||(Ie={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ae=function(){function t(t,e){this.comparator=t,this.root=e||xe.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xe.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xe.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ne(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ne(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ne(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ne(this.root,t,this.comparator,!0)},t}(),Ne=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),xe=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g();if(this.right.isRed())throw g();var t=this.left.check();if(t!==this.right.check())throw g();return t+(this.isRed()?0:1)},t}();xe.EMPTY=null,xe.RED=!0,xe.BLACK=!1,xe.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw g()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new xe(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Pe=function(){function t(t){this.comparator=t,this.data=new Ae(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Re(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Re(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Re=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),De=new Ae(H.comparator);function je(){return De}var Le=new Ae(H.comparator);function Me(){return Le}var Fe=new Ae(H.comparator);function Ue(){return Fe}var qe=new Pe(H.comparator);function Ve(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=qe,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Be=new Pe(w);function Ke(){return Be}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,He.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(S.min(),r,Ke(),je(),Ve())},t}(),He=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(D.EMPTY_BYTE_STRING,n,Ve(),Ve(),Ve())},t}(),Ge=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ze=function(t,e){this.targetId=t,this.V=e},$e=function(t,e,n,r){void 0===n&&(n=D.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Qe=function(){function t(){this.S=0,this.D=Je(),this.C=D.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Ve(),e=Ve(),n=Ve();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:g()}})),new He(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Je()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Ye=function(){function t(t){this.W=t,this.G=new Map,this.H=je(),this.J=Xe(),this.Y=new Pe(w)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:g()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(dt(i))if(0===n){var o=new H(i.path);this.tt(e,o,ut.newNoDocument(o,S.min()))}else y(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&dt(o.target)){var a=new H(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,ut.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Ve();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new We(t,n,this.Y,this.H,r);return this.H=je(),this.J=Xe(),this.Y=new Pe(w),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Qe,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Pe(w),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Qe),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Xe(){return new Ae(H.comparator)}function Je(){return new Ae(H.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze={asc:"ASCENDING",desc:"DESCENDING"},tn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},en=function(t,e){this.databaseId=t,this.I=e};function nn(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function rn(t,e){return t.I?e.toBase64():e.toUint8Array()}function on(t,e){return nn(t,e.toTimestamp())}function an(t){return y(!!t),S.fromTimestamp(function(t){var e=L(t);return new E(e.seconds,e.nanos)}(t))}function sn(t,e){return function(t){return new N(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function un(t){var e=N.fromString(t);return y(Pn(e)),e}function cn(t,e){return sn(t.databaseId,e.path)}function ln(t,e){var n=un(e);if(n.get(1)!==t.databaseId.projectId)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(pn(n))}function hn(t,e){return sn(t.databaseId,e)}function fn(t){var e=un(t);return 4===e.length?N.emptyPath():pn(e)}function dn(t){return new N(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pn(t){return y(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function vn(t,e,n){return{name:cn(t,e),fields:n.value.mapValue.fields}}function gn(t,e,n){var r=ln(t,e.name),i=an(e.updateTime),o=new at({mapValue:{fields:e.fields}}),a=ut.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function yn(t,e){var n;if(e instanceof ye)n={update:vn(t,e.key,e.value)};else if(e instanceof Ee)n={delete:cn(t,e.key)};else if(e instanceof me)n={update:vn(t,e.key,e.data),updateMask:xn(e.fieldMask)};else{if(!(e instanceof Se))return g();n={verify:cn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Zt)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof te)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ne)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ie)return{fieldPath:e.field.canonicalString(),increment:n.A};throw g()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:on(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:g()}(t,e.precondition)),n}function mn(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ce.updateTime(an(t.updateTime)):void 0!==t.exists?ce.exists(t.exists):ce.none()}(e.currentDocument):ce.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)y("REQUEST_TIME"===e.setToServerValue),n=new Zt;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new te(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ne(i)}else"increment"in e?n=new ie(t,e.increment):g();var o=P.fromServerFormat(e.fieldPath);return new se(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=ln(t,e.update.name),o=new at({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new R(e.map((function(t){return P.fromServerFormat(t)})))}(e.updateMask);return new me(i,o,a,n,r)}return new ye(i,o,n,r)}if(e.delete){var s=ln(t,e.delete);return new Ee(s,n)}if(e.verify){var u=ln(t,e.verify);return new Se(u,n)}return g()}function bn(t,e){return{documents:[hn(t,e.path)]}}function _n(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=hn(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=hn(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(rt(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NAN"}};if(nt(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(rt(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NOT_NAN"}};if(nt(t.value))return{unaryFilter:{field:Cn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cn(t.field),op:On(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Cn(t.field),direction:Sn(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||B(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Tn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Tn(e.endAt)),n}function wn(t){var e=fn(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){y(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=In(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new St(kn(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return B(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=En(n.startAt));var l=null;return n.endAt&&(l=En(n.endAt)),Nt(e,i,s,a,u,"F",c,l)}function In(t){return t?void 0!==t.unaryFilter?[Nn(t)]:void 0!==t.fieldFilter?[An(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return In(t)})).reduce((function(t,e){return t.concat(e)})):g():[]}function Tn(t){return{before:t.before,values:t.position}}function En(t){var e=!!t.before,n=t.values||[];return new Tt(n,e)}function Sn(t){return Ze[t]}function On(t){return tn[t]}function Cn(t){return{fieldPath:t.canonicalString()}}function kn(t){return P.fromServerFormat(t.fieldPath)}function An(t){return pt.create(kn(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return g()}}(t.fieldFilter.op),t.fieldFilter.value)}function Nn(t){switch(t.unaryFilter.op){case"IS_NAN":var e=kn(t.unaryFilter.field);return pt.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=kn(t.unaryFilter.field);return pt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=kn(t.unaryFilter.field);return pt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=kn(t.unaryFilter.field);return pt.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return g()}}function xn(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Pn(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=jn(e)),e=Dn(t.get(n),e);return jn(e)}function Dn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function jn(t){return t+""}function Ln(t){var e=t.length;if(y(e>=2),2===e)return y(""===t.charAt(0)&&""===t.charAt(1)),N.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&g(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:g()}o=a+2}return new N(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn=function(t,e){this.seconds=t,this.nanoseconds=e},Fn=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Fn.store="owner",Fn.key="owner";var Un=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Un.store="mutationQueues",Un.keyPath="userId";var qn=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};qn.store="mutations",qn.keyPath="batchId",qn.userMutationsIndex="userMutationsIndex",qn.userMutationsKeyPath=["userId","batchId"];var Vn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Rn(e)]},t.key=function(t,e,n){return[t,Rn(e),n]},t}();Vn.store="documentMutations",Vn.PLACEHOLDER=new Vn;var Bn=function(t,e){this.path=t,this.readTime=e},Kn=function(t,e){this.path=t,this.version=e},Wn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Wn.store="remoteDocuments",Wn.readTimeIndex="readTimeIndex",Wn.readTimeIndexPath="readTime",Wn.collectionReadTimeIndex="collectionReadTimeIndex",Wn.collectionReadTimeIndexPath=["parentPath","readTime"];var Hn=function(t){this.byteSize=t};Hn.store="remoteDocumentGlobal",Hn.key="remoteDocumentGlobalKey";var Gn=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Gn.store="targets",Gn.keyPath="targetId",Gn.queryTargetsIndexName="queryTargetsIndex",Gn.queryTargetsKeyPath=["canonicalId","targetId"];var zn=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};zn.store="targetDocuments",zn.keyPath=["targetId","path"],zn.documentTargetsIndex="documentTargetsIndex",zn.documentTargetsKeyPath=["path","targetId"];var $n=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};$n.key="targetGlobalKey",$n.store="targetGlobal";var Qn=function(t,e){this.collectionId=t,this.parent=e};Qn.store="collectionParents",Qn.keyPath=["collectionId","parent"];var Yn=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Yn.store="clientMetadata",Yn.keyPath="clientId";var Xn=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Xn.store="bundles",Xn.keyPath="bundleId";var Jn=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Jn.store="namedQueries",Jn.keyPath="name";var Zn=Object(a["d"])(Object(a["d"])([],Object(a["d"])(Object(a["d"])([],Object(a["d"])(Object(a["d"])([],Object(a["d"])(Object(a["d"])([],[Un.store,qn.store,Vn.store,Wn.store,Gn.store,Fn.store,$n.store,zn.store]),[Yn.store])),[Hn.store])),[Qn.store])),[Xn.store,Jn.store]),tr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",er=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),nr=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},rr=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&g(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),ir=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new nr,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new sr(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=fr(e.target.error);n.ft.reject(new sr(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new sr(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new cr(e)},t}(),or=function(){function e(t,n,i){this.name=t,this.version=n,this.wt=i,12.2===e._t(Object(r["getUA"])())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return f("SimpleDb","Removing database:",t),lr(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=Object(r["getUA"])(),n=e._t(t),i=0<n&&n<10,o=e.Et(t),a=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||a)},e.gt=function(){var e;return"undefined"!=typeof t&&"YES"===(null===(e=Object({NODE_ENV:"production",BASE_URL:"/"}))||void 0===e?void 0:e.Tt)},e.It=function(t,e){return t.store(e)},e._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(t){return Object(a["a"])(this,void 0,void 0,(function(){var e,n=this;return Object(a["c"])(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new sr(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new c(u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new sr(t,n))},i.onupgradeneeded=function(t){f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},e.prototype.runTransaction=function(t,e,n,r){return Object(a["a"])(this,void 0,void 0,(function(){var i,o,s,u,c;return Object(a["c"])(this,(function(l){switch(l.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,c,l,h;return Object(a["c"])(this,(function(a){switch(a.label){case 0:++o,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=a.sent(),e=ir.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),rr.reject(t)})).toPromise(),c={},s.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(a.sent(),s),c)];case 4:return l=a.sent(),h="FirebaseError"!==l.name&&o<3,f("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),ar=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return lr(this.Pt.delete())},t}(),sr=function(t){function e(e,n){var r=this;return(r=t.call(this,u.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(a["b"])(e,t),e}(c);function ur(t){return"IndexedDbTransactionError"===t.name}var cr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),lr(n)},t.prototype.add=function(t){return f("SimpleDb","ADD",this.store.name,t,t),lr(this.store.add(t))},t.prototype.get=function(t){var e=this;return lr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return f("SimpleDb","DELETE",this.store.name,t),lr(this.store.delete(t))},t.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),lr(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new rr((function(n,r){e.onerror=function(t){var e=fr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new rr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ar(i),a=e(i.primaryKey,i.value,o);if(a instanceof rr){var s=a.catch((function(t){return o.done(),rr.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return rr.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function lr(t){return new rr((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=fr(t.target.error);n(e)}}))}var hr=!1;function fr(t){var e=or._t(Object(r["getUA"])());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var i=new c("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hr||(hr=!0,setTimeout((function(){throw i}),0)),i}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(a["b"])(e,t),e}(er);function pr(t,e){var n=m(t);return or.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vr=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&fe(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&de(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&de(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(S.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ve())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&I(this.mutations,t.mutations,(function(t,e){return ve(t,e)}))&&I(this.baseMutations,t.baseMutations,(function(t,e){return ve(t,e)}))},t}(),gr=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){y(e.mutations.length===r.length);for(var i=Ue(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),yr=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=S.min()),void 0===o&&(o=S.min()),void 0===a&&(a=D.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),mr=function(t){this.Lt=t};function br(t,e){if(e.document)return gn(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=H.fromSegments(e.noDocument.path),r=Er(e.noDocument.readTime),i=ut.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=H.fromSegments(e.unknownDocument.path);return r=Er(e.unknownDocument.version),ut.newUnknownDocument(o,r)}return g()}function _r(t,e,n){var r=wr(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:cn(t,e.key),fields:e.data.value.mapValue.fields,updateTime:nn(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new Wn(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Tr(e.version);return a=e.hasCommittedMutations,new Wn(null,new Bn(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Tr(e.version);return new Wn(new Kn(c,l),null,null,!0,r,i)}return g()}function wr(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ir(t){var e=new E(t[0],t[1]);return S.fromTimestamp(e)}function Tr(t){var e=t.toTimestamp();return new Mn(e.seconds,e.nanoseconds)}function Er(t){var e=new E(t.seconds,t.nanoseconds);return S.fromTimestamp(e)}function Sr(t,e){for(var n=(e.baseMutations||[]).map((function(e){return mn(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return mn(t.Lt,e)})),s=E.fromMillis(e.localWriteTimeMs);return new vr(e.batchId,s,n,a)}function Or(t){var e,n,r=Er(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Er(t.lastLimboFreeSnapshotVersion):S.min();return void 0!==t.query.documents?(y(1===(n=t.query).documents.length),e=Ft(xt(fn(n.documents[0])))):e=function(t){return Ft(wn(t))}(t.query),new yr(e,t.targetId,0,t.lastListenSequenceNumber,r,i,D.fromBase64String(t.resumeToken))}function Cr(t,e){var n,r=Tr(e.snapshotVersion),i=Tr(e.lastLimboFreeSnapshotVersion);n=dt(e.target)?bn(t.Lt,e.target):_n(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Gn(e.targetId,ht(e.target),r,o,e.sequenceNumber,i,n)}function kr(t){var e=wn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ut(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ar=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Nr(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Er(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Nr(t).put({bundleId:(n=e).id,createTime:Tr(an(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return xr(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:kr(e.bundledQuery),readTime:Er(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return xr(t).put(function(t){return{name:t.name,readTime:Tr(an(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Nr(t){return pr(t,Xn.store)}function xr(t){return pr(t,Jn.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pr=function(){function t(){this.Bt=new Rr}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),rr.resolve()},t.prototype.getCollectionParents=function(t,e){return rr.resolve(this.Bt.getEntries(e))},t}(),Rr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Pe(N.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Pe(N.comparator)).toArray()},t}(),Dr=function(){function t(){this.qt=new Rr}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Rn(i)};return jr(t).put(o)}return rr.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[T(e),""],!1,!0);return jr(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ln(o.parent))}return n}))},t}();function jr(t){return pr(t,Qn.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,e,n){var r=t.store(qn.store),i=t.store(Vn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){y(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Vn.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return rr.waitFor(o).next((function(){return c}))}function Ur(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(41943040,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);var qr=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return y(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Br(t).$t({index:qn.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Kr(t),a=Br(t);return a.add({}).next((function(s){y("number"==typeof s);for(var u=new vr(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return yn(t.Lt,e)})),i=n.mutations.map((function(e){return yn(t.Lt,e)}));return new qn(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Pe((function(t,e){return w(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=Vn.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,Vn.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),rr.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Br(t).get(e).next((function(t){return t?(y(t.userId===n.userId),Sr(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?rr.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Br(t).$t({index:qn.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(y(e.batchId>=r),o=Sr(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Br(t).$t({index:qn.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Br(t).Nt(qn.userMutationsIndex,n).next((function(t){return t.map((function(t){return Sr(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Vn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Kr(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Ln(u);if(s===n.userId&&e.path.isEqual(l))return Br(t).get(c).next((function(t){if(!t)throw g();y(t.userId===n.userId),o.push(Sr(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pe(w),i=[];return e.forEach((function(e){var o=Vn.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Kr(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Ln(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),rr.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Vn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Pe(w);return Kr(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=Ln(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Br(t).get(e).next((function(t){if(null===t)throw g();y(t.userId===n.userId),r.push(Sr(n.R,t))})))})),rr.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Fr(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),rr.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return rr.resolve();var r=IDBKeyRange.lowerBound(Vn.prefixForUser(e.userId)),i=[];return Kr(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ln(t[1]);i.push(o)}else r.done()})).next((function(){y(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Vr(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Wr(t).get(this.userId).next((function(t){return t||new Un(e.userId,-1,"")}))},t}();function Vr(t,e,n){var r=Vn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Kr(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Br(t){return pr(t,qn.store)}function Kr(t){return pr(t,Vn.store)}function Wr(t){return pr(t,Un.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hr=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Gr=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Hr(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return S.fromTimestamp(new E(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return zr(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return y(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return zr(t).$t((function(a,s){var u=Or(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return rr.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return zr(t).$t((function(t,n){var r=Or(n);e(r)}))},t.prototype.Xt=function(t){return $r(t).get($n.key).next((function(t){return y(null!==t),t}))},t.prototype.Zt=function(t,e){return $r(t).put($n.key,e)},t.prototype.te=function(t,e){return zr(t).put(Cr(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=ht(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return zr(t).$t({range:r,index:Gn.queryTargetsIndexName},(function(t,n,r){var o=Or(n);ft(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Qr(t);return e.forEach((function(e){var a=Rn(e.path);i.push(o.put(new zn(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),rr.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Qr(t);return rr.forEach(e,(function(e){var o=Rn(e.path);return rr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Qr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Qr(t),i=Ve();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Ln(t[1]),o=new H(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Rn(e.path),r=IDBKeyRange.bound([n],[T(n)],!1,!0),i=0;return Qr(t).$t({index:zn.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return zr(t).get(e).next((function(t){return t?Or(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t){return pr(t,Gn.store)}function $r(t){return pr(t,$n.store)}function Qr(t){return pr(t,zn.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){if(t.code!==u.FAILED_PRECONDITION||t.message!==tr)throw t;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=w(n,i);return 0===a?w(r,o):a}var Jr=function(){function t(t){this.ne=t,this.buffer=new Pe(Xr),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Xr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Zr=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(a["a"])(e,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ur(e=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Yr(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ti=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return rr.resolve(s.o);var r=new Jr(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),rr.resolve(Lr)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Lr):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,o,a,s,u,c,l=this,d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>l.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,a=Date.now(),l.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)})).next((function(e){return o=e,u=Date.now(),l.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),h()<=i["LogLevel"].DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-d)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-d)+"ms"),rr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:t})}))},t}(),ei=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ti(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return ni(t,n)},t.prototype.removeReference=function(t,e,n){return ni(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return ni(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Wr(t).Ot((function(r){return Vr(t,r,e).next((function(t){return t&&(n=!0),rr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Qr(t).delete([0,Rn(a.path)])}))}));i.push(u)}})).next((function(){return rr.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ni(t,e)},t.prototype.we=function(t,e){var n,r=Qr(t),i=s.o;return r.$t({index:zn.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==s.o&&e(new H(Ln(n)),i),i=u,n=a):i=s.o})).next((function(){i!==s.o&&e(new H(Ln(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function ni(t,e){return Qr(t).put(function(t,e){return new zn(0,Rn(t.path),e)}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ri=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){C(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return k(this.inner)},t}(),ii=function(){function t(){this.changes=new ri((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:S.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ut.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?rr.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),oi=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return ui(t).put(ci(e),n)},t.prototype.removeEntry=function(t,e){var n=ui(t),r=ci(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return ui(t).get(ci(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return ui(t).get(ci(e)).next((function(t){return{document:n.ye(e,t),size:Ur(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=je();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=je(),i=new Ae(H.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Ur(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return rr.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ui(t).$t({range:r},(function(t,e,r){for(var a=H.fromSegments(t);o&&H.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=je(),o=e.path.length+1,a={};if(n.isEqual(S.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=wr(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Wn.collectionReadTimeIndex}return ui(t).$t(a,(function(t,n,a){if(t.length===o){var s=br(r.R,n);e.path.isPrefixOf(s.key.path)?Kt(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new ai(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return si(t).get(Hn.key).next((function(t){return y(!!t),t}))},t.prototype.me=function(t,e){return si(t).put(Hn.key,e)},t.prototype.ye=function(t,e){if(e){var n=br(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(S.min()))return n}return ut.newInvalidDocument(t)},t}(),ai=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new ri((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(a["b"])(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Pe((function(t,e){return w(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=_r(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Ur(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=_r(e.Ie.R,ut.newNoDocument(o,S.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),rr.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ii);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t){return pr(t,Hn.store)}function ui(t){return pr(t,Wn.store)}function ci(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;y(n<r&&n>=0&&r<=11);var o=new ir("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Fn.store)}(t),function(t){t.createObjectStore(Un.store,{keyPath:Un.keyPath}),t.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Vn.store)}(t),hi(t),function(t){t.createObjectStore(Wn.store)}(t));var a=rr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(zn.store),t.deleteObjectStore(Gn.store),t.deleteObjectStore($n.store)}(t),hi(t)),a=a.next((function(){return function(t){var e=t.store($n.store),n=new $n(0,0,S.min().toTimestamp(),0);return e.put($n.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(qn.store).Nt().next((function(n){t.deleteObjectStore(qn.store),t.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0});var r=e.store(qn.store),i=n.map((function(t){return r.put(t)}));return rr.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Yn.store,{keyPath:Yn.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Hn.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Wn.store);e.createIndex(Wn.readTimeIndex,Wn.readTimeIndexPath,{unique:!1}),e.createIndex(Wn.collectionReadTimeIndex,Wn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(Xn.store,{keyPath:Xn.keyPath})}(t),function(t){t.createObjectStore(Jn.store,{keyPath:Jn.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(Wn.store).$t((function(t,n){e+=Ur(n)})).next((function(){var n=new Hn(e);return t.store(Hn.store).put(Hn.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Un.store),r=t.store(qn.store);return n.Nt().next((function(n){return rr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(qn.userMutationsIndex,i).next((function(r){return rr.forEach(r,(function(r){y(r.userId===n.userId);var i=Sr(e.R,r);return Fr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(zn.store),n=t.store(Wn.store);return t.store($n.store).get($n.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new N(n),a=function(t){return[0,Rn(t)]}(o);r.push(e.get(a).next((function(n){return n?rr.resolve():function(n){return e.put(new zn(0,Rn(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return rr.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Qn.store,{keyPath:Qn.keyPath});var n=e.store(Qn.store),r=new Rr,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Rn(i)})}};return e.store(Wn.store).$t({kt:!0},(function(t,e){var n=new N(t);return i(n.popLast())})).next((function(){return e.store(Vn.store).$t({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Ln(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Gn.store);return n.$t((function(t,r){var i=Or(r),o=Cr(e.R,i);return n.put(o)}))},t}();function hi(t){t.createObjectStore(zn.store,{keyPath:zn.keyPath}).createIndex(zn.documentTargetsIndex,zn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Gn.store,{keyPath:Gn.keyPath}).createIndex(Gn.queryTargetsIndexName,Gn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore($n.store)}var fi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",di=function(){function t(e,n,r,i,o,a,s,l,h,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=h,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new c(u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ei(this,i),this.Le=n+"main",this.R=new mr(l),this.Be=new or(this.Le,11,new li(this.R)),this.qe=new Gr(this.referenceDelegate,this.R),this.Ut=new Dr,this.Ue=function(t,e){return new oi(t,e)}(this.R,this.Ut),this.Qe=new Ar,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===f&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,fi);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new s(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(a["a"])(e,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(a["a"])(e,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(a["a"])(e,void 0,void 0,(function(){return Object(a["c"])(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return vi(e).put(new Yn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ur(e))return f("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return pi(t).get(Fn.key).next((function(t){return rr.resolve(e.tn(t))}))},t.prototype.en=function(t){return vi(t).delete(this.clientId)},t.prototype.nn=function(){return Object(a["a"])(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=pr(t,Yn.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return rr.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?rr.resolve(!0):pi(t).get(Fn.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,fi);return!1}}return!(!e.networkEnabled||!e.inForeground)||vi(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&f("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(a["a"])(this,void 0,void 0,(function(){var t=this;return Object(a["c"])(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Fn.store,Yn.store],(function(e){var n=new dr(e,s.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return vi(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return qr.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;f("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Zn,(function(o){return i=new dr(o,r.Ne?r.Ne.next():s.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw d("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new c(u.FAILED_PRECONDITION,tr);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return pi(t).get(Fn.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new c(u.FAILED_PRECONDITION,fi)}))},t.prototype.Ze=function(t){var e=new Fn(this.clientId,this.allowTabSynchronization,Date.now());return pi(t).put(Fn.key,e)},t.yt=function(){return or.yt()},t.prototype.Xe=function(t){var e=this,n=pi(t);return n.get(Fn.key).next((function(t){return e.tn(t)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(Fn.key)):rr.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(d("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return f("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return d("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){d("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function pi(t){return pr(t,Fn.store)}function vi(t){return pr(t,Yn.store)}function gi(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var yi=function(t,e){this.progress=t,this.wn=e},mi=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return H.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Lt(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new H(e)).next((function(t){var e=Me();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Me();return this.Ut.getCollectionParents(t,i).next((function(a){return rr.forEach(a,(function(a){var s=function(t,e){return new At(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=ut.newInvalidDocument(c),r=r.insert(c,l)),de(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Kt(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Ve(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof me&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),bi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ve(),i=Ve(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),_i=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(S.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(a){var s=o.Cn(e,a);return(Pt(e)||Rt(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):(h()<=i["LogLevel"].DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Bt(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Pe(Wt(t));return e.forEach((function(e,r){Kt(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return h()<=i["LogLevel"].DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Bt(e)),this.Sn.getDocumentsMatchingQuery(t,e,S.min())},t}(),wi=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ae(w),this.kn=new ri((function(t){return ht(t)}),ft),this.$n=S.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new mi(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t,e,n,r){return new wi(t,e,n,r)}function Ti(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return n=m(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new mi(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Ve(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];a=a.add(m.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Ei(t,e){var n=m(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=rr.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);y(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Si(t){var e=m(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Oi(t,e){var n=m(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return y(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=je();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Ci(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(S.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return rr.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Ci(t,e,n,r,i){var o=Ve();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=je();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(S.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function ki(t,e){var n=m(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Ai(t,e){var n=m(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,rr.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new yr(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Ni(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r,i,o,s;return Object(a["c"])(this,(function(a){switch(a.label){case 0:r=m(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ur(s=a.sent()))throw s;return f("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function xi(t,e,n){var r=m(t),i=S.min(),o=Ve();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=m(t),i=r.kn.get(n);return void 0!==i?rr.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Ft(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:S.min(),n?o:Ve())})).next((function(t){return{documents:t,Bn:o}}))}))}function Pi(t,e){var n=m(t),r=m(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Ri(t){var e=m(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=m(t),i=je(),o=wr(n),a=ui(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:Wn.readTimeIndex,range:s},(function(t,e){var n=br(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Ir(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Di(t){return Object(a["a"])(this,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){return[2,(e=m(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ui(t),n=S.min();return e.$t({index:Wn.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ir(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function ji(t,e,n,r){return Object(a["a"])(this,void 0,void 0,(function(){var i,o,s,u,c,l,h,f,d,p;return Object(a["c"])(this,(function(a){switch(a.label){case 0:for(i=m(t),o=Ve(),s=je(),u=Ue(),c=0,l=n;c<l.length;c++)h=l[c],f=e.qn(h.metadata.name),h.document&&(o=o.add(f)),s=s.insert(f,e.Un(h)),u=u.insert(f,e.Qn(h.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,Ai(i,function(t){return Ft(xt(N.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=a.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ci(t,d,s,S.min(),u).next((function(e){return d.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Li(t,e,n){return void 0===n&&(n=Ve()),Object(a["a"])(this,void 0,void 0,(function(){var r,i;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return[4,Ai(t,Ft(kr(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=m(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=an(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(D.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Mi=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return rr.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:an(n.createTime)}),rr.resolve()},t.prototype.getNamedQuery=function(t,e){return rr.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:kr(t.bundledQuery),readTime:an(t.readTime)}}(e)),rr.resolve()},t}(),Fi=function(){function t(){this.Wn=new Pe(Ui.Gn),this.zn=new Pe(Ui.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ui(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Ui(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new H(new N([])),r=new Ui(n,t),i=new Ui(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new H(new N([])),n=new Ui(e,t),r=new Ui(e,t+1),i=Ve();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Ui(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ui=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return H.comparator(t.key,e.key)||w(t.ns,e.ns)},t.Hn=function(t,e){return w(t.ns,e.ns)||H.comparator(t.key,e.key)},t}(),qi=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Pe(Ui.Gn)}return t.prototype.checkEmpty=function(t){return rr.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new vr(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Ui(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return rr.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return rr.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return rr.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return rr.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return rr.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ui(e,0),i=new Ui(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),rr.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Pe(w);return e.forEach((function(t){var e=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),rr.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;H.isDocumentKey(i)||(i=i.child(""));var o=new Ui(new H(i),0),a=new Pe(w);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),rr.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;y(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return rr.forEach(e.mutations,(function(i){var o=new Ui(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ui(e,0),r=this.rs.firstAfterOrEqual(n);return rr.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,rr.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Vi=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ae(H.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return rr.resolve(n?n.document.clone():ut.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=je();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():ut.newInvalidDocument(t))})),rr.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=je(),i=new H(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Kt(e,c)&&(r=r.insert(c.key,c.clone()))}return rr.resolve(r)},t.prototype.fs=function(t,e){return rr.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Bi(this)},t.prototype.getSize=function(t){return rr.resolve(this.size)},t}(),Bi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(a["b"])(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),rr.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ii),Ki=function(){function t(t){this.persistence=t,this.ds=new ri((function(t){return ht(t)}),ft),this.lastRemoteSnapshotVersion=S.min(),this.highestTargetId=0,this.ws=0,this._s=new Fi,this.targetCount=0,this.ys=Hr.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),rr.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return rr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return rr.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),rr.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),rr.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Hr(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,rr.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),rr.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,rr.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),rr.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return rr.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return rr.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),rr.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),rr.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),rr.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return rr.resolve(n)},t.prototype.containsKey=function(t,e){return rr.resolve(this._s.containsKey(e))},t}(),Wi=function(){function t(t,e){var n=this;this.gs={},this.Ne=new s(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Ki(this),this.Ut=new Pr,this.Ue=function(t,e){return new Vi(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new mr(e),this.Qe=new Mi(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new qi(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;f("MemoryPersistence","Starting transaction:",t);var i=new Hi(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return rr.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Hi=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(a["b"])(e,t),e}(er),Gi=function(){function t(t){this.persistence=t,this.As=new Fi,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw g()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),rr.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),rr.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),rr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rr.forEach(this.vs,(function(r){var i=H.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return rr.or([function(){return rr.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),zi=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t,e){return"firestore_clients_"+t+"_"+e}function Qi(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Yi(t,e){return"firestore_targets_"+t+"_"+e}zi.UNAUTHENTICATED=new zi(null),zi.GOOGLE_CREDENTIALS=new zi("google-credentials-uid"),zi.FIRST_PARTY=new zi("first-party-uid");var Xi=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new c(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(d("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ji=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new c(i.error.code,i.error.message)),o?new t(e,i.state,r):(d("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Zi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ke(),a=0;i&&a<r.activeTargetIds.length;++a)i=W(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(d("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),to=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(d("SharedClientState","Failed to parse online state: "+e),null)},t}(),eo=function(){function t(){this.activeTargetIds=Ke()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),no=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ae(w),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=$i(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new eo),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(a["a"])(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,c,l,h,f=this;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem($i(this.persistenceKey,r)))&&(o=Zi.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,l=this.$s;c<l.length;c++)h=l[c],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Yi(this.persistenceKey,t));if(n){var r=Ji.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Yi(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return f("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){f("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){f("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(a["a"])(e,void 0,void 0,(function(){var t,e,r,i,o,u;return Object(a["c"])(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(u=function(t){var e=s.o;if(null!=t)try{var n=JSON.parse(t);y("number"==typeof n),e=n}catch(t){d("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==s.o&&this.sequenceNumberHandler(u);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Xi(this.currentUser,t,e,n),i=Qi(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Qi(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Yi(this.persistenceKey,t),i=new Ji(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Zi.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Xi.Vs(new zi(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Ji.Vs(r,e)},t.prototype.js=function(t){return to.Vs(t)},t.prototype.ii=function(t){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Ke();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),ro=function(){function t(){this.li=new eo,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new eo,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),io=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),oo=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ao={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},so=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),uo=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(a["b"])(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,a){var s=new o["f"];s.listenOnce(o["c"].COMPLETE,(function(){try{switch(s.getLastErrorCode()){case o["a"].NO_ERROR:var e=s.getResponseJson();f("Connection","XHR received:",JSON.stringify(e)),i(e);break;case o["a"].TIMEOUT:f("Connection",'RPC "'+t+'" timed out'),a(new c(u.DEADLINE_EXCEEDED,"Request time out"));break;case o["a"].HTTP_ERROR:var n=s.getStatus();if(f("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var l=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(u).indexOf(e)>=0?e:u.UNKNOWN}(r.status);a(new c(l,r.message))}else a(new c(u.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new c(u.UNAVAILABLE,"Connection failed."));break;default:g()}}finally{f("Connection",'RPC "'+t+'" completed.')}}));var l=JSON.stringify(r);s.send(e,"POST",l,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Object(o["g"])(),a=Object(o["h"])(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(s.initMessageHeaders,e),Object(r["isMobileCordova"])()||Object(r["isReactNative"])()||Object(r["isElectron"])()||Object(r["isIE"])()||Object(r["isUWP"])()||Object(r["isBrowserExtension"])()||(s.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");f("Connection","Creating WebChannel: "+l,s);var h=i.createWebChannel(l,s),d=!1,v=!1,g=new so({Ei:function(t){v?f("Connection","Not sending because WebChannel is closed:",t):(d||(f("Connection","Opening WebChannel transport."),h.open(),d=!0),f("Connection","WebChannel sending:",t),h.send(t))},Ti:function(){return h.close()}}),m=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return m(h,o["e"].EventType.OPEN,(function(){v||f("Connection","WebChannel transport opened.")})),m(h,o["e"].EventType.CLOSE,(function(){v||(v=!0,f("Connection","WebChannel transport closed"),g.Vi())})),m(h,o["e"].EventType.ERROR,(function(t){v||(v=!0,p("Connection","WebChannel transport errored:",t),g.Vi(new c(u.UNAVAILABLE,"The operation could not be completed")))})),m(h,o["e"].EventType.MESSAGE,(function(t){var e;if(!v){var n=t.data[0];y(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){f("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Ie[t];if(void 0!==e)return ke(e)}(o),s=i.message;void 0===a&&(a=u.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),v=!0,g.Vi(new c(a,s)),h.close()}else f("Connection","WebChannel received:",n),g.Si(n)}})),m(a,o["b"].STAT_EVENT,(function(t){t.stat===o["d"].PROXY?f("Connection","Detected buffering proxy"):t.stat===o["d"].NOPROXY&&f("Connection","Detected no buffering proxy")})),setTimeout((function(){g.Pi()}),0),g},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);f("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return f("RestConnection","Received: ",t),t}),(function(e){throw p("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.3",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=ao[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(){return"undefined"!=typeof window?window:null}function lo(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){return new en(t,!0)}var fo=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),po=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new fo(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===u.RESOURCE_EXHAUSTED?(d(e.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===u.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new c(u.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(a["a"])(t,void 0,void 0,(function(){return Object(a["c"])(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return f("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),vo=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Object(a["b"])(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:g()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(y(void 0===e||"string"==typeof e),D.fromBase64String(e||"")):(y(void 0===e||e instanceof Uint8Array),D.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?u.UNKNOWN:ke(t.code);return new c(e,t.message||"")}(s);n=new $e(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=ln(t,r.document.name),o=an(r.document.updateTime);var s=new at({mapValue:{fields:r.document.fields}}),l=(a=ut.newFoundDocument(i,o,s),r.targetIds||[]),h=r.removedTargetIds||[];n=new Ge(l,h,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=ln(t,r.document),o=r.readTime?an(r.readTime):S.min(),s=ut.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Ge([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=ln(t,r.document),o=r.removedTargetIds||[],n=new Ge([],o,i,null);else{if(!("filter"in e))return g();e.filter;var f=e.filter;f.targetId,r=f.count||0,i=new Oe(r),o=f.targetId,n=new ze(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return S.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?S.min():e.readTime?an(e.readTime):S.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=dn(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=dt(r)?{documents:bn(t,r)}:{query:_n(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=rn(t,e.resumeToken):e.snapshotVersion.compareTo(S.min())>0&&(n.readTime=nn(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=dn(this.R),e.removeTarget=t,this.cr(e)},e}(po),go=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(y(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(y(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?an(t.updateTime):an(e);return n.isEqual(S.min())&&(n=an(e)),new ue(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=an(t.commitTime);return this.listener.Tr(n,e)}return y(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=dn(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return yn(e.R,t)}))};this.cr(n)},e}(po),yo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(a["b"])(e,t),e.prototype.br=function(){if(this.Rr)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new c(u.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new c(u.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),mo=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(d(e),this.Vr=!1):f("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),bo=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(a["a"])(o,void 0,void 0,(function(){return Object(a["c"])(this,(function(t){switch(t.label){case 0:return ko(this)?(f("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(a["a"])(this,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return(e=m(t)).Or.add(4),[4,wo(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,_o(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new mo(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t){return Object(a["a"])(this,void 0,void 0,(function(){var e,n;return Object(a["c"])(this,(function(r){switch(r.label){case 0:if(!ko(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function wo(t){return Object(a["a"])(this,void 0,void 0,(function(){var e,n;return Object(a["c"])(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Io(t,e){var n=m(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Co(n)?Oo(n):Ko(n).er()&&Eo(n,e))}function To(t,e){var n=m(t),r=Ko(n);n.$r.delete(e),r.er()&&So(n,e),0===n.$r.size&&(r.er()?r.ir():ko(n)&&n.Br.set("Unknown"))}function Eo(t,e){t.qr.U(e.targetId),Ko(t).mr(e)}function So(t,e){t.qr.U(e),Ko(t).yr(e)}function Oo(t){t.qr=new Ye({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Ko(t).start(),t.Br.Sr()}function Co(t){return ko(t)&&!Ko(t).tr()&&t.$r.size>0}function ko(t){return 0===m(t).Or.size}function Ao(t){t.qr=void 0}function No(t){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){return t.$r.forEach((function(e,n){Eo(t,e)})),[2]}))}))}function xo(t,e){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(n){return Ao(t),Co(t)?(t.Br.Nr(e),Oo(t)):t.Br.set("Unknown"),[2]}))}))}function Po(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r,i,o;return Object(a["c"])(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof $e&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(a["c"])(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),f("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ro(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ge?t.qr.X(e):e instanceof ze?t.qr.rt(e):t.qr.et(e),n.isEqual(S.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Si(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(D.EMPTY_BYTE_STRING,n.snapshotVersion)),So(t,e);var r=new yr(n.target,e,1,n.sequenceNumber);Eo(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Ro(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Ro(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r=this;return Object(a["c"])(this,(function(i){switch(i.label){case 0:if(!ur(e))throw e;return t.Or.add(1),[4,wo(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Si(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(a["a"])(r,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){switch(e.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,_o(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Do(t,e){return e().catch((function(n){return Ro(t,n,e)}))}function jo(t){return Object(a["a"])(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(a["c"])(this,(function(a){switch(a.label){case 0:e=m(t),n=Wo(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return ko(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,ki(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Wo(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Ro(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Lo(e)&&Mo(e),[2]}}))}))}function Lo(t){return ko(t)&&!Wo(t).tr()&&t.kr.length>0}function Mo(t){Wo(t).start()}function Fo(t){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){return Wo(t).Ar(),[2]}))}))}function Uo(t){return Object(a["a"])(this,void 0,void 0,(function(){var e,n,r,i;return Object(a["c"])(this,(function(o){for(e=Wo(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function qo(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r,i;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=gr.from(r,e,n),[4,Do(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,jo(t)];case 2:return o.sent(),[2]}}))}))}function Vo(t,e){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(n){switch(n.label){case 0:return e&&Wo(t).pr?[4,function(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return Ce(r=e.code)&&r!==u.ABORTED?(n=t.kr.shift(),Wo(t).sr(),[4,Do(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,jo(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Lo(t)&&Mo(t),[2]}}))}))}function Bo(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n;return Object(a["c"])(this,(function(r){switch(r.label){case 0:return n=m(t),e?(n.Or.delete(2),[4,_o(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,wo(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Ko(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=m(t);return r.br(),new vo(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:No.bind(null,t),Ri:xo.bind(null,t),_r:Po.bind(null,t)}),t.Mr.push((function(n){return Object(a["a"])(e,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Co(t)?Oo(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Ao(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Wo(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=m(t);return r.br(),new go(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Fo.bind(null,t),Ri:Vo.bind(null,t),Ir:Uo.bind(null,t),Tr:qo.bind(null,t)}),t.Mr.push((function(n){return Object(a["a"])(e,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,jo(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(f("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Ho=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new c(u.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Go(t,e){if(d("AsyncQueue",e+": "+t),ur(t))return new c(u.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zo=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||H.comparator(e.key,n.key)}:function(t,e){return H.comparator(t.key,e.key)},this.keyedMap=Me(),this.sortedSet=new Ae(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),$o=function(){function t(){this.Kr=new Ae(H.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):g():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Qo=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,zo.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&qt(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Yo=function(){this.Wr=void 0,this.listeners=[]},Xo=function(){this.queries=new ri((function(t){return Vt(t)}),qt),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i,o,s,u,c;return Object(a["c"])(this,(function(a){switch(a.label){case 0:if(n=m(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Yo),!i)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=a.sent(),[3,4];case 3:return u=a.sent(),c=Go(u,"Initialization of query '"+Bt(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&na(n),[2]}}))}))}function Zo(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a["c"])(this,(function(a){return n=m(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function ta(t,e){for(var n=m(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&na(n)}function ea(t,e,n){var r=m(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function na(t){t.Gr.forEach((function(t){t.next()}))}var ra=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Qo(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Qo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),ia=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),oa=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ln(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?gn(this.R,t.document,!1):ut.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return an(t)},t}(),aa=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=sa(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new oa(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||Ve()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(a["a"])(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return[4,ji(this.localStore,new oa(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Li(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new yi(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ua=function(t){this.key=t},ca=function(t){this.key=t},la=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ve(),this.mutatedKeys=Ve(),this.lo=Wt(t),this.fo=new zo(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new $o,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Pt(this.query)&&i.size===this.query.limit?i.last():null,c=Rt(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Kt(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Pt(this.query)||Rt(this.query))for(;a.size>this.query.limit;){var l=Pt(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Qo(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new $o,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ve(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new ca(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new ua(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ve();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Qo.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),ha=function(t,e,n){this.query=t,this.targetId=e,this.view=n},fa=function(t){this.key=t,this.bo=!1},da=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ri((function(t){return Vt(t)}),qt),this.Vo=new Map,this.So=new Set,this.Do=new Ae(H.comparator),this.Co=new Map,this.No=new Fi,this.xo={},this.Fo=new Map,this.ko=Hr.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function pa(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return n=Ka(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Ai(n.localStore,Ft(e))];case 2:return s=a.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,va(n,e,r,"current"===u)];case 3:i=a.sent(),n.isPrimaryClient&&Io(n.remoteStore,s),a.label=4;case 4:return[2,i]}}))}))}function va(t,e,n,r){return Object(a["a"])(this,void 0,void 0,(function(){var i,o,s,u,c,l;return Object(a["c"])(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Object(a["a"])(this,void 0,void 0,(function(){var i,o,s;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return i=e.view._o(n),i.Nn?[4,xi(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(ka(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,xi(t.localStore,e,!0)];case 1:return i=h.sent(),o=new la(e,i.Bn),s=o._o(i.documents),u=He.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),ka(t,n,c.To),l=new ha(e,n,o),[2,(t.Po.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function ga(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return n=m(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!qt(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ni(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),To(n.remoteStore,r.targetId),Oa(n,r.targetId)})).catch(Yr)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Oa(n,r.targetId),[4,Ni(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function ya(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r,i,o,s;return Object(a["c"])(this,(function(a){switch(a.label){case 0:r=Wa(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=m(t),i=E.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ve());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=pe(c,n.get(c.key));null!=l&&a.push(new me(c.key,l,st(l.value.mapValue),ce.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ae(w)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,xa(r,i.changes)];case 3:return a.sent(),[4,jo(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Go(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function ma(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r;return Object(a["c"])(this,(function(i){switch(i.label){case 0:n=m(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Oi(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(y(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?y(r.bo):t.removedDocuments.size>0&&(y(r.bo),r.bo=!1))})),[4,xa(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Yr(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function ba(t,e,n){var r=m(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=m(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&na(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _a(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r,i,o,s,u,c;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return(r=m(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Ae(H.comparator)).insert(o,ut.newNoDocument(o,S.min())),u=Ve().add(o),c=new We(S.min(),new Map,new Pe(w),s,u),[4,ma(r,c)]):[3,2];case 1:return a.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Na(r),[3,4];case 2:return[4,Ni(r.localStore,e,!1).then((function(){return Oa(r,e,n)})).catch(Yr)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))}function wa(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i;return Object(a["c"])(this,(function(o){switch(o.label){case 0:n=m(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ei(n.localStore,e)];case 2:return i=o.sent(),Sa(n,r,null),Ea(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,xa(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ia(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r,i;return Object(a["c"])(this,(function(o){switch(o.label){case 0:r=m(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return y(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Sa(r,e,n),Ea(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,xa(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ta(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a["c"])(this,(function(a){switch(a.label){case 0:ko((n=m(t)).remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=m(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Go(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Ea(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Sa(t,e,n){var r=m(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Oa(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Ca(t,e)}))}function Ca(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(To(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Na(t))}function ka(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ua?(t.No.addReference(o.key,e),Aa(t,o)):o instanceof ca?(f("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Ca(t,o.key)):g()}}function Aa(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(f("SyncEngine","New document in limbo: "+n),t.So.add(r),Na(t))}function Na(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new H(N.fromString(e)),r=t.ko.next();t.Co.set(r,new fa(n)),t.Do=t.Do.insert(n,r),Io(t.remoteStore,new yr(Ft(xt(n.path)),r,2,s.o))}}function xa(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r,i,o,s;return Object(a["c"])(this,(function(u){switch(u.label){case 0:return r=m(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=bi.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h;return Object(a["c"])(this,(function(a){switch(a.label){case 0:n=m(t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return rr.forEach(e,(function(e){return rr.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return rr.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return a.sent(),[3,4];case 3:if(!ur(r=a.sent()))throw r;return f("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(c=n.Fn.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.Fn=n.Fn.insert(u,h));return[2]}}))}))}(r.localStore,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Pa(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return(n=m(t)).currentUser.isEqual(e)?[3,3]:(f("SyncEngine","User change. New user:",e.toKey()),[4,Ti(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new c(u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,xa(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Ra(t,e){var n=m(t),r=n.Co.get(e);if(r&&r.bo)return Ve().add(r.key);var i=Ve(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Da(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return[4,xi((n=m(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&ka(n,e.targetId,i.To),i)]}}))}))}function ja(t){return Object(a["a"])(this,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){return[2,Ri((e=m(t)).localStore).then((function(t){return xa(e,t)}))]}))}))}function La(t,e,n,r){return Object(a["a"])(this,void 0,void 0,(function(){var i,o;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=m(t),r=m(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):rr.resolve(null)}))}))}((i=m(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,jo(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Sa(i,e,r||null),Ea(i,e),function(t,e){m(m(t)._n).Gt(e)}(i.localStore,e)):g(),a.label=4;case 4:return[4,xa(i,o)];case 5:return a.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Ma(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return Ka(n=m(t)),Wa(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Fa(n,r.toArray())]);case 1:return i=a.sent(),n.$o=!0,[4,Bo(n.remoteStore,!0)];case 2:for(a.sent(),o=0,s=i;o<s.length;o++)u=s[o],Io(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):l=l.then((function(){return Oa(n,e),Ni(n.localStore,e,!0)})),To(n.remoteStore,e)})),[4,l]);case 4:return a.sent(),[4,Fa(n,c)];case 5:return a.sent(),function(t){var e=m(t);e.Co.forEach((function(t,n){To(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ae(H.comparator)}(n),n.$o=!1,[4,Bo(n.remoteStore,!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))}function Fa(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,f,d,p,v,g;return Object(a["c"])(this,(function(a){switch(a.label){case 0:n=m(t),r=[],i=[],o=0,s=e,a.label=1;case 1:return o<s.length?(u=s[o],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,Ai(n.localStore,Ft(l[0]))]:[3,7]):[3,13];case 2:c=a.sent(),h=0,f=l,a.label=3;case 3:return h<f.length?(d=f[h],p=n.Po.get(d),[4,Da(n,p)]):[3,6];case 4:(v=a.sent()).snapshot&&i.push(v.snapshot),a.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Pi(n.localStore,u)];case 8:return g=a.sent(),[4,Ai(n.localStore,g)];case 9:return c=a.sent(),[4,va(n,Ua(g),u,!1)];case 10:a.sent(),a.label=11;case 11:r.push(c),a.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Ua(t){return Nt(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function qa(t){var e=m(t);return m(m(e.localStore).persistence).fn()}function Va(t,e,n,r){return Object(a["a"])(this,void 0,void 0,(function(){var i,o,s;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return(i=m(t)).$o?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ri(i.localStore)];case 3:return o=a.sent(),s=We.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,xa(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Ni(i.localStore,e,!0)];case 6:return a.sent(),Oa(i,e,r),[3,8];case 7:g(),a.label=8;case 8:return[2]}}))}))}function Ba(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r,i,o,s,u,c,l,h,d,p;return Object(a["c"])(this,(function(v){switch(v.label){case 0:if(!(r=Ka(t)).$o)return[3,10];i=0,o=e,v.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(f("SyncEngine","Adding an already active target "+s),[3,5]):[4,Pi(r.localStore,s)]):[3,6];case 2:return u=v.sent(),[4,Ai(r.localStore,u)];case 3:return c=v.sent(),[4,va(r,Ua(u),c.targetId,!1)];case 4:v.sent(),Io(r.remoteStore,c),v.label=5;case 5:return i++,[3,1];case 6:l=function(t){return Object(a["c"])(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Ni(r.localStore,t,!1).then((function(){To(r.remoteStore,t),Oa(r,t)})).catch(Yr)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,d=n,v.label=7;case 7:return h<d.length?(p=d[h],[5,l(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ka(t){var e=m(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ma.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ra.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_a.bind(null,e),e.vo._r=ta.bind(null,e.eventManager),e.vo.Mo=ea.bind(null,e.eventManager),e}function Wa(t){var e=m(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wa.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ia.bind(null,e),e}function Ha(t,e,n){var r=m(t);(function(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r,i,o,s,u,c;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return a.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=a.sent(),[4,function(t,e){var n=m(t),r=an(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Qe.getBundleMetadata(t,e.id)})).then((function(t){return!!t&&t.createTime.compareTo(r)>=0}))}(t.localStore,r)];case 2:return a.sent()?[4,e.close()]:[3,4];case 3:return[2,(a.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(sa(r)),i=new aa(r,t.localStore,e.R),[4,e.Lo()];case 5:o=a.sent(),a.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=a.sent())&&n._updateProgress(s),[4,e.Lo()];case 8:o=a.sent(),a.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return u=a.sent(),[4,xa(t,u.wn,void 0)];case 12:return a.sent(),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Qe.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return a.sent(),n._completeWith(u.progress),[3,15];case 14:return p("SyncEngine","Loading bundle failed with "+(c=a.sent())),n._failWith(c),[3,15];case 15:return[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Ga=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){switch(e.label){case 0:return this.R=ho(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Ii(this.persistence,new _i,t.initialUser,this.R)},t.prototype.qo=function(t){return new Wi(Gi.bs,this.R)},t.prototype.Bo=function(t){return new ro},t.prototype.terminate=function(){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),za=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(a["b"])(e,t),e.prototype.initialize=function(e){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Di(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Wa(this.Ko.syncEngine)];case 4:return n.sent(),[4,jo(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return Ii(this.persistence,new _i,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Zr(e,t.asyncQueue)},e.prototype.qo=function(t){var e=gi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Mr.withCacheSize(this.cacheSizeBytes):Mr.DEFAULT;return new di(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,co(),lo(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new ro},e}(Ga),$a=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(a["b"])(e,t),e.prototype.initialize=function(e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r=this;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof no?(this.sharedClientState.syncEngine={ui:La.bind(null,n),ai:Va.bind(null,n),hi:Ba.bind(null,n),fn:qa.bind(null,n),ci:ja.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Object(a["a"])(r,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){switch(e.label){case 0:return[4,Ma(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=co();if(!no.yt(e))throw new c(u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=gi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new no(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(za),Qa=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n=this;return Object(a["c"])(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return ba(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Pa.bind(null,this.syncEngine),[4,Bo(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Xo},t.prototype.createDatastore=function(t){var e,n=ho(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new uo(e));return function(t,e,n){return new yo(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return ba(a.syncEngine,t,0)},o=oo.yt()?new oo:new io,new bo(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new da(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(a["a"])(this,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return e=m(t),f("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,wo(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(a["a"])(this,void 0,void 0,(function(){var r;return Object(a["c"])(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xa=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Ja=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new nr,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(a["a"])(this,void 0,void 0,(function(){var t,e,n,r;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new ia(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(a["a"])(this,void 0,void 0,(function(){var t,e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(a["a"])(this,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(a["a"])(this,void 0,void 0,(function(){var t,e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),Za=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(a["a"])(this,void 0,void 0,(function(){var e,n=this;return Object(a["c"])(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new c(u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return n=m(t),r=dn(n.R)+"/documents",i={documents:e.map((function(t){return cn(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){y(!!e.found),e.found.name,e.found.updateTime;var n=ln(t,e.found.name),r=an(e.found.updateTime),i=new at({mapValue:{fields:e.found.fields}});return ut.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){y(!!e.missing),y(!!e.readTime);var n=ln(t,e.missing),r=an(e.readTime);return ut.newNoDocument(n,r)}(t,e):g()}(n.R,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());y(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ee(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(a["a"])(this,void 0,void 0,(function(){var t,e=this;return Object(a["c"])(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=H.fromPath(n);e.mutations.push(new Se(r,e.precondition(r)))})),[4,function(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return n=m(t),r=dn(n.R)+"/documents",i={writes:e.map((function(t){return yn(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw g();e=S.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new c(u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ce.updateTime(e):ce.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(S.min()))throw new c(u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ce.updateTime(e)}return ce.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),ts=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new fo(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(a["a"])(t,void 0,void 0,(function(){var t,e,n=this;return Object(a["c"])(this,(function(r){return t=new Za(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!B(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ce(e)}return!1},t}(),es=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=zi.UNAUTHENTICATED,this.clientId=_.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Object(a["a"])(r,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){switch(e.label){case 0:return f("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(a["a"])(t,void 0,void 0,(function(){var t,n;return Object(a["c"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Go(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r,i=this;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Object(a["a"])(i,void 0,void 0,(function(){return Object(a["c"])(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Ti(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function rs(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,is(t)];case 1:return n=i.sent(),f("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Object(a["a"])(this,void 0,void 0,(function(){var n,r;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return(n=m(t)).asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials"),r=ko(n),n.Or.add(3),[4,wo(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,_o(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function is(t){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(f("FirestoreClient","Using default OfflineComponentProvider"),[4,ns(t,new Ga)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function os(t){return Object(a["a"])(this,void 0,void 0,(function(){return Object(a["c"])(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(f("FirestoreClient","Using default OnlineComponentProvider"),[4,rs(t,new Qa)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function as(t){return is(t).then((function(t){return t.persistence}))}function ss(t){return is(t).then((function(t){return t.localStore}))}function us(t){return os(t).then((function(t){return t.remoteStore}))}function cs(t){return os(t).then((function(t){return t.syncEngine}))}function ls(t){return Object(a["a"])(this,void 0,void 0,(function(){var e,n;return Object(a["c"])(this,(function(r){switch(r.label){case 0:return[4,os(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=pa.bind(null,e.syncEngine),n.onUnlisten=ga.bind(null,e.syncEngine),n)]}}))}))}function hs(t,e,n){var r=this;void 0===n&&(n={});var i=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(r,void 0,void 0,(function(){var r;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Xa({next:function(o){e.enqueueAndForget((function(){return Zo(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new c(u.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new ra(xt(n.path),o,{includeMetadataChanges:!0,so:!0});return Jo(t,a)},[4,ls(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function fs(t,e,n){var r=this;void 0===n&&(n={});var i=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(r,void 0,void 0,(function(){var r;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Xa({next:function(n){e.enqueueAndForget((function(){return Zo(t,a)})),n.fromCache&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new ra(n,o,{includeMetadataChanges:!0,so:!0});return Jo(t,a)},[4,ls(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var ds=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},ps=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),vs=new Map,gs=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ys=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(zi.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ms=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),bs=function(){function t(t){var e=this;this.currentUser=zi.UNAUTHENTICATED,this.oc=new nr,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.uc=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.ac=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.uc&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){f("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.ac)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):e.uc&&(f("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)})))}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(y("string"==typeof n.accessToken),new gs(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){this.uc=!0,this.asyncQueue=t,this.changeListener=e},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.ac),this.changeListener=function(){return Promise.resolve()}},t.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return y(null===t||"string"==typeof t),new zi(t)},t.prototype.lc=function(){var t=this;this.uc&&(this.uc=!1,this.asyncQueue.enqueueRetryable((function(){return Object(a["a"])(t,void 0,void 0,(function(){return Object(a["c"])(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.uc=!0,[2]}}))}))})))},t}(),_s=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=zi.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),t}(),ws=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n}return t.prototype.getToken=function(){return Promise.resolve(new _s(this.fc,this.dc,this.wc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(zi.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t,e,n){if(!n)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ts(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new c(u.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Es(t,e,n,r){if(!0===e&&!0===r)throw new c(u.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ss(t){if(!H.isDocumentKey(t))throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Os(t){if(H.isDocumentKey(t))throw new c(u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Cs(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":g()}function ks(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new c(u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Cs(t);throw new c(u.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function As(t,e){if(e<=0)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ns=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new c(u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new c(u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Es("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),xs=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ns({}),this._settingsFrozen=!1,t instanceof ps?(this._databaseId=t,this._credentials=new ys):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new c(u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ps(t.options.projectId)}(t),this._credentials=new bs(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ns(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ys;switch(t.type){case"gapi":var e=t.client;return y(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ws(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new c(u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return t=this,(e=vs.get(t))&&(f("ComponentProvider","Removing Datastore"),vs.delete(t),e.terminate()),Promise.resolve();var t,e},t}(),Ps=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ds(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Rs=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ds=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,xt(r))||this)._path=r,i.type="collection",i}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Ps(this.firestore,null,new H(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Rs);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t,e){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t=Object(r["getModularInstance"])(t),Is("collection","path",e),t instanceof xs)return Os(n=N.fromString.apply(N,Object(a["d"])([e],i))),new Ds(t,null,n);if(!(t instanceof Ps||t instanceof Ds))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Os(n=N.fromString.apply(N,Object(a["d"])([t.path],i)).child(N.fromString(e))),new Ds(t.firestore,null,n)}function Ls(t,e){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t=Object(r["getModularInstance"])(t),1===arguments.length&&(e=_.u()),Is("doc","path",e),t instanceof xs)return Ss(n=N.fromString.apply(N,Object(a["d"])([e],i))),new Ps(t,null,new H(n));if(!(t instanceof Ps||t instanceof Ds))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ss(n=t._path.child(N.fromString.apply(N,Object(a["d"])([e],i)))),new Ps(t.firestore,t instanceof Ds?t.converter:null,new H(n))}function Ms(t,e){return t=Object(r["getModularInstance"])(t),e=Object(r["getModularInstance"])(e),(t instanceof Ps||t instanceof Ds)&&(e instanceof Ps||e instanceof Ds)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Fs(t,e){return t=Object(r["getModularInstance"])(t),e=Object(r["getModularInstance"])(e),t instanceof Rs&&e instanceof Rs&&t.firestore===e.firestore&&qt(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Us=function(){function t(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new fo(this,"async_queue_retry"),this.Ac=function(){var e=lo();e&&f("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=lo();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},t.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var t=lo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac)}},t.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise((function(t){})):this.bc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.mc.push(t),e.vc()}))},t.prototype.vc=function(){return Object(a["a"])(this,void 0,void 0,(function(){var t,e=this;return Object(a["c"])(this,(function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!ur(t=n.sent()))throw t;return f("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.mc.length>0&&this.Zi.ji((function(){return e.vc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.bc=function(t){var e=this,n=this._c.then((function(){return e.Tc=!0,t().catch((function(t){throw e.Ec=t,e.Tc=!1,d("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Tc=!1,t}))}));return this._c=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Rc(),this.Ic.indexOf(t)>-1&&(e=0);var i=Ho.createAndSchedule(this,t,e,n,(function(t){return r.Pc(t)}));return this.gc.push(i),i},t.prototype.Rc=function(){this.Ec&&g()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Vc=function(){return Object(a["a"])(this,void 0,void 0,(function(){var t;return Object(a["c"])(this,(function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Dc=function(t){var e=this;return this.Vc().then((function(){e.gc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()}))},t.prototype.Cc=function(t){this.Ic.push(t)},t.prototype.Pc=function(t){var e=this.gc.indexOf(t);this.gc.splice(e,1)},t}();function qs(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Vs=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Bs=-1,Ks=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Us,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(a["b"])(e,t),e.prototype._terminate=function(){return this._firestoreClient||Hs(this),this._firestoreClient.terminate()},e}(xs);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t){return t._firestoreClient||Hs(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Hs(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new ds(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new es(t._credentials,t._queue,r)}function Gs(t,e,n){var r=this,i=new nr;return t.asyncQueue.enqueue((function(){return Object(a["a"])(r,void 0,void 0,(function(){var r;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ns(t,n)];case 1:return o.sent(),[4,rs(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===u.FAILED_PRECONDITION||t.code===u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function zs(t){if(t._initialized||t._terminated)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $s=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new c(u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new P(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Qs=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(D.fromBase64String(e))}catch(e){throw new c(u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(D.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Ys=function(t){this._methodName=t},Xs=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new c(u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new c(u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return w(this._lat,t._lat)||w(this._long,t._long)},t}(),Js=/^__.*__$/,Zs=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new me(t,this.data,this.fieldMask,e,this.fieldTransforms):new ye(t,this.data,e,this.fieldTransforms)},t}(),tu=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new me(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g()}}var nu=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),t.prototype.Fc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Oc(t),r},t.prototype.Mc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Nc(),r},t.prototype.Lc=function(t){return this.Fc({path:void 0,$c:!0})},t.prototype.Bc=function(t){return Iu(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Oc(this.path.get(t))},t.prototype.Oc=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(eu(this.xc)&&Js.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},t}(),ru=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||ho(t)}return t.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new nu({xc:t,methodName:e,Uc:n,path:P.emptyPath(),$c:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function iu(t){var e=t._freezeSettings(),n=ho(t._databaseId);return new ru(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ou(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Qc(o.merge||o.mergeFields?2:0,e,n,i);mu("Data must be an object, but it was:",a,r);var s,l,h=gu(r,a);if(o.merge)s=new R(a.fieldMask),l=a.fieldTransforms;else if(o.mergeFields){for(var f=[],d=0,p=o.mergeFields;d<p.length;d++){var v=bu(e,p[d],n);if(!a.contains(v))throw new c(u.INVALID_ARGUMENT,"Field '"+v+"' is specified in your field mask but missing from your input data.");Tu(f,v)||f.push(v)}s=new R(f),l=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,l=a.fieldTransforms;return new Zs(new at(h),s,l)}var au=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.xc)throw 1===t.xc?t.Bc(this._methodName+"() can only appear at the top level of your update data"):t.Bc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ys);function su(t,e,n){return new nu({xc:3,Uc:e.settings.Uc,methodName:t._methodName,$c:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),e.prototype._toFieldTransform=function(t){return new se(t.path,new Zt)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ys),cu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(a["b"])(e,t),e.prototype._toFieldTransform=function(t){var e=su(this,t,!0),n=this.Kc.map((function(t){return vu(t,e)})),r=new te(n);return new se(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ys),lu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(a["b"])(e,t),e.prototype._toFieldTransform=function(t){var e=su(this,t,!0),n=this.Kc.map((function(t){return vu(t,e)})),r=new ne(n);return new se(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ys),hu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(a["b"])(e,t),e.prototype._toFieldTransform=function(t){var e=new ie(t.R,$t(t.R,this.jc));return new se(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Ys);function fu(t,e,n,i){var o=t.Qc(1,e,n);mu("Data must be an object, but it was:",o,i);var a=[],s=at.empty();C(i,(function(t,i){var u=wu(e,t,n);i=Object(r["getModularInstance"])(i);var c=o.Mc(u);if(i instanceof au)a.push(u);else{var l=vu(i,c);null!=l&&(a.push(u),s.set(u,l))}}));var u=new R(a);return new tu(s,u,o.fieldTransforms)}function du(t,e,n,i,o,a){var s=t.Qc(1,e,n),l=[bu(e,i,n)],h=[o];if(a.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<a.length;f+=2)l.push(bu(e,a[f])),h.push(a[f+1]);for(var d=[],p=at.empty(),v=l.length-1;v>=0;--v)if(!Tu(d,l[v])){var g=l[v],y=h[v];y=Object(r["getModularInstance"])(y);var m=s.Mc(g);if(y instanceof au)d.push(g);else{var b=vu(y,m);null!=b&&(d.push(g),p.set(g,b))}}var _=new R(d);return new tu(p,_,s.fieldTransforms)}function pu(t,e,n,r){return void 0===r&&(r=!1),vu(n,t.Qc(r?4:3,e))}function vu(t,e){if(yu(t=Object(r["getModularInstance"])(t)))return mu("Unsupported field value:",e,t),gu(t,e);if(t instanceof Ys)return function(t,e){if(!eu(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.$c&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=vu(o[i],e.Lc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(r["getModularInstance"])(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $t(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=E.fromDate(t);return{timestampValue:nn(e.R,n)}}if(t instanceof E)return n=new E(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:nn(e.R,n)};if(t instanceof Xs)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qs)return{bytesValue:rn(e.R,t._byteString)};if(t instanceof Ps){n=e.databaseId;var i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Bc("Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:sn(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Bc("Unsupported field value: "+Cs(t))}(t,e)}function gu(t,e){var n={};return k(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):C(t,(function(t,r){var i=vu(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function yu(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof E||t instanceof Xs||t instanceof Qs||t instanceof Ps||t instanceof Ys)}function mu(t,e,n){if(!yu(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Cs(n);throw"an object"===r?e.Bc(t+" a custom object"):e.Bc(t+" "+r)}}function bu(t,e,n){if((e=Object(r["getModularInstance"])(e))instanceof $s)return e._internalPath;if("string"==typeof e)return wu(t,e);throw Iu("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var _u=new RegExp("[~\\*/\\[\\]]");function wu(t,e,n){if(e.search(_u)>=0)throw Iu("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new($s.bind.apply($s,Object(a["d"])([void 0],e.split(".")))))._internalPath}catch(r){throw Iu("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Iu(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var l="";return(o||a)&&(l+=" (found",o&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new c(u.INVALID_ARGUMENT,(s+=". ")+t+l)}function Tu(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eu=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ps(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Su(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Ou("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Eu);function Ou(t,e){return"string"==typeof e?wu(t,e):e instanceof $s?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cu=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ku=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Object(a["b"])(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Ou("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Eu),Au=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ku),Nu=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Cu(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Au(n._firestore,n._userDataWriter,r.key,r,new Cu(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new c(u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new Au(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Cu(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Au(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Cu(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:xu(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function xu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g()}}function Pu(t,e){return t instanceof ku&&e instanceof ku?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Nu&&e instanceof Nu&&t._firestore===e._firestore&&Fs(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){if(Rt(t)&&0===t.explicitOrderBy.length)throw new c(u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Du=function(){};function ju(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Lu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wc=e,i.Gc=n,i.zc=r,i.type="where",i}return Object(a["b"])(e,t),e.prototype._apply=function(t){var e=iu(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new c(u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Ku(a,o);for(var l=[],h=0,f=a;h<f.length;h++){var d=f[h];l.push(Bu(r,t,d))}s={arrayValue:{values:l}}}else s=Bu(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Ku(a,o),s=pu(n,"where",a,"in"===o||"not-in"===o);var p=pt.create(i,o,s);return function(t,e){if(e.g()){var n=jt(t);if(null!==n&&!n.isEqual(e.field))throw new c(u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Dt(t);null!==r&&Wu(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,p),p}(t._query,0,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc);return new Rs(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new At(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Du),Mu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wc=e,r.Hc=n,r.type="orderBy",r}return Object(a["b"])(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new St(e,n);return function(t,e){if(null===Dt(t)){var n=jt(t);null!==n&&Wu(t,n,e.field)}}(t,r),r}(t._query,this.Wc,this.Hc);return new Rs(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new At(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Du),Fu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(a["b"])(e,t),e.prototype._apply=function(t){return new Rs(t.firestore,t.converter,Ut(t._query,this.Jc,this.Yc))},e}(Du),Uu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(a["b"])(e,t),e.prototype._apply=function(t){var e=Vu(t,this.type,this.Xc,this.Zc);return new Rs(t.firestore,t.converter,function(t,e){return new At(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Du),qu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(a["b"])(e,t),e.prototype._apply=function(t){var e=Vu(t,this.type,this.Xc,this.Zc);return new Rs(t.firestore,t.converter,function(t,e){return new At(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Du);function Vu(t,e,n,i){if(n[0]=Object(r["getModularInstance"])(n[0]),n[0]instanceof Eu)return function(t,e,n,r,i){if(!r)throw new c(u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Mt(t);a<s.length;a++){var l=s[a];if(l.field.isKeyField())o.push(Z(e,r.key));else{var h=r.data.field(l.field);if(U(h))throw new c(u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=l.field.canonicalString();throw new c(u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(h)}}return new Tt(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,i);var o=iu(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new c(u.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],l=0;l<i.length;l++){var h=i[l];if(a[l].field.isKeyField()){if("string"!=typeof h)throw new c(u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!Lt(t)&&-1!==h.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=t.path.child(N.fromString(h));if(!H.isDocumentKey(f))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var d=new H(f);s.push(Z(e,d))}else{var p=pu(n,r,h);s.push(p)}}return new Tt(s,o)}(t._query,t.firestore._databaseId,o,e,n,i)}function Bu(t,e,n){if("string"==typeof(n=Object(r["getModularInstance"])(n))){if(""===n)throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lt(e)&&-1!==n.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var i=e.path.child(N.fromString(n));if(!H.isDocumentKey(i))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+i+"' is not because it has an odd number of segments ("+i.length+").");return Z(t,new H(i))}if(n instanceof Ps)return Z(t,n._key);throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Cs(n)+".")}function Ku(t,e){if(!Array.isArray(t)||0===t.length)throw new c(u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new c(u.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Wu(t,e,n){if(!n.isEqual(e))throw new c(u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hu=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),G(t)){case 0:return null;case 1:return t.booleanValue;case 2:return M(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(F(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw g()}},t.prototype.convertObject=function(t,e){var n=this,r={};return C(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Xs(M(t.latitude),M(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=q(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(V(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=L(t);return new E(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=N.fromString(t);y(Pn(n));var r=new ps(n.get(1),n.get(3)),i=new H(n.popFirst(5));return r.isEqual(e)||d("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var zu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(a["b"])(e,t),e.prototype.convertBytes=function(t){return new Qs(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ps(this.firestore,null,e)},e}(Hu),$u=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=iu(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Qu(t,this._firestore),i=Gu(r.converter,e,n),o=ou(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ce.none())),this},t.prototype.update=function(t,e,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this._verifyNotCommitted();var a,s=Qu(t,this._firestore);return a="string"==typeof(e=Object(r["getModularInstance"])(e))||e instanceof $s?du(this._dataReader,"WriteBatch.update",s._key,e,n,i):fu(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(a.toMutation(s._key,ce.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Qu(t,this._firestore);return this._mutations=this._mutations.concat(new Ee(e._key,ce.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new c(u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t,e){if((t=Object(r["getModularInstance"])(t)).firestore!==e)throw new c(u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(a["b"])(e,t),e.prototype.convertBytes=function(t){return new Qs(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ps(this.firestore,null,e)},e}(Hu);function Xu(t,e,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];t=ks(t,Ps);var a=ks(t.firestore,Ks),s=iu(a);return Zu(a,[("string"==typeof(e=Object(r["getModularInstance"])(e))||e instanceof $s?du(s,"updateDoc",t._key,e,n,i):fu(s,"updateDoc",t._key,e)).toMutation(t._key,ce.exists(!0))])}function Ju(t){for(var e,n,i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];t=Object(r["getModularInstance"])(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof o[c]||qs(o[c])||(u=o[c],c++);var l,h,f,d={includeMetadataChanges:u.includeMetadataChanges};if(qs(o[c])){var p=o[c];o[c]=null===(e=p.next)||void 0===e?void 0:e.bind(p),o[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),o[c+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}if(t instanceof Ps)h=ks(t.firestore,Ks),f=xt(t._key.path),l={next:function(e){o[c]&&o[c](tc(h,t,e))},error:o[c+1],complete:o[c+2]};else{var v=ks(t,Rs);h=ks(v.firestore,Ks),f=v._query;var g=new Yu(h);l={next:function(t){o[c]&&o[c](new Nu(h,g,v,t))},error:o[c+1],complete:o[c+2]},Ru(t._query)}return function(t,e,n,r){var i=this,o=new Xa(r),s=new ra(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(i,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return e=Jo,[4,ls(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(i,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return e=Zo,[4,ls(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Ws(h),f,d,l)}function Zu(t,e){return function(t,e){var n=this,r=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(n,void 0,void 0,(function(){var n;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return n=ya,[4,cs(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Ws(t),e)}function tc(t,e,n){var r=n.docs.get(e._key),i=new Yu(t);return new ku(t,i,e._key,r,new Cu(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ec=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(a["b"])(e,t),e.prototype.get=function(e){var n=this,r=Qu(e,this._firestore),i=new Yu(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new ku(n._firestore,i,r._key,t._document,new Cu(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=iu(t)}return t.prototype.get=function(t){var e=this,n=Qu(t,this._firestore),r=new zu(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return g();var i=t[0];if(i.isFoundDocument())return new Eu(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Eu(e._firestore,r,n._key,null,n.converter);throw g()}))},t.prototype.set=function(t,e,n){var r=Qu(t,this._firestore),i=Gu(r.converter,e,n),o=ou(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a,s=Qu(t,this._firestore);return a="string"==typeof(e=Object(r["getModularInstance"])(e))||e instanceof $s?du(this._dataReader,"Transaction.update",s._key,e,n,i):fu(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,a),this},t.prototype.delete=function(t){var e=Qu(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(){if("undefined"==typeof Uint8Array)throw new c(u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function rc(){if("undefined"==typeof atob)throw new c(u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ic=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return rc(),new t(Qs.fromBase64String(e))},t.fromUint8Array=function(e){return nc(),new t(Qs.fromUint8Array(e))},t.prototype.toBase64=function(){return rc(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return nc(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),oc=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){zs(t=ks(t,Ks));var n=Ws(t),r=t._freezeSettings(),i=new Qa;return Gs(n,i,new za(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){zs(t=ks(t,Ks));var e=Ws(t),n=t._freezeSettings(),r=new Qa;return Gs(e,r,new $a(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new c(u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new nr;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(a["a"])(e,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(a["a"])(this,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return or.yt()?(e=t+"main",[4,or.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(gi(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),ac=function(){function t(t,e,n){var r=this;this._delegate=e,this.tu=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof ps||(this.eu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||p("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,i){void 0===i&&(i={});var o=(t=ks(t,xs))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&p("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),i.mockUserToken){var a=Object(r["createMockUserToken"])(i.mockUserToken),s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new c(u.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new ms(new gs(a,new zi(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(a["a"])(e,void 0,void 0,(function(){var e,n;return Object(a["c"])(this,(function(r){switch(r.label){case 0:return[4,as(t)];case 1:return e=r.sent(),[4,us(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=m(t);return e.Or.delete(0),_o(e)}(n))]}}))}))}))}(Ws(ks(this._delegate,Ks)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(a["a"])(e,void 0,void 0,(function(){var e,n;return Object(a["c"])(this,(function(r){switch(r.label){case 0:return[4,as(t)];case 1:return e=r.sent(),[4,us(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(a["a"])(this,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return(e=m(t)).Or.add(0),[4,wo(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ws(ks(this._delegate,Ks)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Es("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tu.enableMultiTabIndexedDbPersistence(this):this.tu.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.tu.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.eu&&(this.eu._removeServiceInstance("firestore"),this.eu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(e,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(r){switch(r.label){case 0:return e=Ta,[4,cs(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ws(ks(this._delegate,Ks)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Xa(e);return t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(n,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return e=function(t,e){m(t).Gr.add(e),e.next()},[4,ls(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(n,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return e=function(t,e){m(t).Gr.delete(e)},[4,ls(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Ws(t=ks(t,Ks)),qs(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.eu)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.eu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new wc(this,js(this._delegate,t))}catch(t){throw dc(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new fc(this,Ls(this._delegate,t))}catch(t){throw dc(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new mc(this,function(t,e){if(t=ks(t,xs),Is("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Rs(t,null,function(t){return new At(N.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw dc(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(n,void 0,void 0,(function(){var n;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return[4,function(t){return os(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new ts(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Ws(t),(function(n){return e(new ec(t,n))}))}(this._delegate,(function(n){return t(new cc(e,n))}))},t.prototype.batch=function(){var t=this;return Ws(this._delegate),new lc(new $u(this._delegate,(function(e){return Zu(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new c(u.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new c(u.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),sc=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(a["b"])(e,t),e.prototype.convertBytes=function(t){return new ic(new Qs(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return fc.nu(e,this.firestore,null)},e}(Hu);function uc(t){var e;e=t,l.setLogLevel(e)}var cc=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new sc(t)}return t.prototype.get=function(t){var e=this,n=Ic(t);return this._delegate.get(n).then((function(t){return new gc(e._firestore,new ku(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Ic(t);return n?(Ts("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ic(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(a["d"])([s,e,n],i)),this},t.prototype.delete=function(t){var e=Ic(t);return this._delegate.delete(e),this},t}(),lc=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Ic(t);return n?(Ts("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ic(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(a["d"])([s,e,n],i)),this},t.prototype.delete=function(t){var e=Ic(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),hc=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Au(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new yc(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.su=function(e,n){var r=t.iu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new sc(e),n),i.set(n,o)),o},t}();hc.iu=new WeakMap;var fc=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new sc(t)}return t.ru=function(e,n,r){if(e.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Ps(n._delegate,r,new H(e)))},t.nu=function(e,n,r){return new t(n,new Ps(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new wc(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new wc(this.firestore,js(this._delegate,t))}catch(t){throw dc(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(r["getModularInstance"])(t))instanceof Ps&&Ms(this._delegate,t)},t.prototype.set=function(t,e){e=Ts("DocumentReference.set",e);try{return function(t,e,n){t=ks(t,Ps);var r=ks(t.firestore,Ks),i=Gu(t.converter,e,n);return Zu(r,[ou(iu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ce.none())])}(this._delegate,t,e)}catch(t){throw dc(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Xu(this._delegate,t):Xu.apply(void 0,Object(a["d"])([this._delegate,t,e],n))}catch(t){throw dc(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Zu(ks((t=this._delegate).firestore,Ks),[new Ee(t._key,ce.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=pc(e),i=vc(e,(function(e){return new gc(t.firestore,new ku(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Ju(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ks(t,Ps);var e=ks(t.firestore,Ks),n=Ws(e),r=new Yu(e);return function(t,e){var n=this,r=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(n,void 0,void 0,(function(){var n;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r,i;return Object(a["c"])(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new c(u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Go(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,ss(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new ku(e,r,t._key,n,new Cu(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ks(t,Ps);var e=ks(t.firestore,Ks);return hs(Ws(e),t._key,{source:"server"}).then((function(n){return tc(e,t,n)}))}(this._delegate):function(t){t=ks(t,Ps);var e=ks(t.firestore,Ks);return hs(Ws(e),t._key).then((function(n){return tc(e,t,n)}))}(this._delegate)).then((function(t){return new gc(e.firestore,new ku(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(hc.su(this.firestore,e)):this._delegate.withConverter(null))},t}();function dc(t,e,n){return t.message=t.message.replace(e,n),t}function pc(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!qs(r))return r}return{}}function vc(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=qs(t[0])?t[0]:qs(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var gc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new fc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Pu(this._delegate,t._delegate)},t}(),yc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["b"])(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(gc),mc=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new sc(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,ju(this._delegate,function(t,e,n){var r=e,i=Ou("where",t);return new Lu(i,r,n)}(e,n,r)))}catch(e){throw dc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,ju(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Ou("orderBy",t);return new Mu(r,n)}(e,n)))}catch(e){throw dc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,ju(this._delegate,function(t){return As("limit",t),new Fu("limit",t,"F")}(e)))}catch(e){throw dc(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,ju(this._delegate,function(t){return As("limitToLast",t),new Fu("limitToLast",t,"L")}(e)))}catch(e){throw dc(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ju(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Uu("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw dc(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ju(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Uu("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw dc(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ju(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qu("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw dc(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,ju(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qu("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw dc(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Fs(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ks(t,Rs);var e=ks(t.firestore,Ks),n=Ws(e),r=new Yu(e);return function(t,e){var n=this,r=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(n,void 0,void 0,(function(){var n;return Object(a["c"])(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(a["a"])(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(a["c"])(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,xi(t,e,!0)];case 1:return u=a.sent(),r=new la(e,u.Bn),i=r._o(u.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Go(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,ss(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Nu(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ks(t,Rs);var e=ks(t.firestore,Ks),n=Ws(e),r=new Yu(e);return fs(n,t._query,{source:"server"}).then((function(n){return new Nu(e,r,t,n)}))}(this._delegate):function(t){t=ks(t,Rs);var e=ks(t.firestore,Ks),n=Ws(e),r=new Yu(e);return Ru(t._query),fs(n,t._query).then((function(n){return new Nu(e,r,t,n)}))}(this._delegate)).then((function(t){return new _c(e.firestore,new Nu(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=pc(e),i=vc(e,(function(e){return new _c(t.firestore,new Nu(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Ju(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(hc.su(this.firestore,e)):this._delegate.withConverter(null))},t}(),bc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new yc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),_c=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new mc(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new yc(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new bc(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new yc(n._firestore,r))}))},t.prototype.isEqual=function(t){return Pu(this._delegate,t._delegate)},t}(),wc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(a["b"])(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new fc(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new fc(this.firestore,void 0===t?Ls(this._delegate):Ls(this._delegate,t))}catch(t){throw dc(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=ks(t.firestore,Ks),r=Ls(t),i=Gu(t.converter,e);return Zu(n,[ou(iu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ce.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new fc(e.firestore,t)}))},e.prototype.isEqual=function(t){return Ms(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(hc.su(this.firestore,t)):this._delegate.withConverter(null))},e}(mc);function Ic(t){return ks(t,Ps)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tc=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new($s.bind.apply($s,Object(a["d"])([void 0],t)))}return t.documentId=function(){return new t(P.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(r["getModularInstance"])(t))instanceof $s&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ec=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new uu("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new au("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cu("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lu("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new hu("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t){return function(t,e){var n=Ws(t=ks(t,Ks)),r=new Vs;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new Ja(t,e)}(function(t,e){if(t instanceof Uint8Array)return Ya(t,e);if(t instanceof ArrayBuffer)return Ya(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,ho(e));t.asyncQueue.enqueueAndForget((function(){return Object(a["a"])(i,void 0,void 0,(function(){var e;return Object(a["c"])(this,(function(n){switch(n.label){case 0:return e=Ha,[4,cs(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,t._databaseId,e,r),r}(this._delegate,t)}function Oc(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return Object(a["a"])(n,void 0,void 0,(function(){var n;return Object(a["c"])(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=m(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Qe.getNamedQuery(t,e)}))},[4,ss(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Ws(e=ks(e,Ks)),n).then((function(t){return t?new Rs(e,null,t.query):null}))).then((function(t){return t?new mc(r,t):null}))}}).call(this,n("4362"))},"94ca":function(t,e,n){var r=n("d039"),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},9802:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;function u(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create},"9bf2":function(t,e,n){var r=n("83ab"),i=n("0cfb"),o=n("825a"),a=n("c04e"),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9dbb":function(t,e,n){(function(t,n){n(e)})(0,(function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){i=t[e].apply(t,r),n(i).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new p(t)}))}function g(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=g,Object.defineProperty(t,"__esModule",{value:!0})}))},"9ed3":function(t,e,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),o=n("5c6c"),a=n("d44e"),s=n("3f8c"),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},a2cd:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;function s(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create},a4b4:function(t,e,n){var r=n("342f");t.exports=/web0s(?!.*chrome)/i.test(r)},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},a79d:function(t,e,n){"use strict";var r=n("23e7"),i=n("c430"),o=n("fea9"),a=n("d039"),s=n("d066"),u=n("4840"),c=n("cdf9"),l=n("6eeb"),h=!!o&&a((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));if(r({target:"Promise",proto:!0,real:!0,forced:h},{finally:function(t){var e=u(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),!i&&"function"==typeof o){var f=s("Promise").prototype["finally"];o.prototype["finally"]!==f&&l(o.prototype,"finally",f,{unsafe:!0})}},a8e9:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"CONSTANTS",(function(){return i})),n.d(e,"Deferred",(function(){return v})),n.d(e,"ErrorFactory",(function(){return D})),n.d(e,"FirebaseError",(function(){return R})),n.d(e,"MAX_VALUE_MILLIS",(function(){return ft})),n.d(e,"RANDOM_FACTOR",(function(){return dt})),n.d(e,"Sha1",(function(){return X})),n.d(e,"areCookiesEnabled",(function(){return N})),n.d(e,"assert",(function(){return o})),n.d(e,"assertionError",(function(){return a})),n.d(e,"async",(function(){return tt})),n.d(e,"base64",(function(){return c})),n.d(e,"base64Decode",(function(){return h})),n.d(e,"base64Encode",(function(){return l})),n.d(e,"calculateBackoffMillis",(function(){return pt})),n.d(e,"contains",(function(){return W})),n.d(e,"createMockUserToken",(function(){return g})),n.d(e,"createSubscribe",(function(){return J})),n.d(e,"decode",(function(){return U})),n.d(e,"deepCopy",(function(){return f})),n.d(e,"deepExtend",(function(){return d})),n.d(e,"errorPrefix",(function(){return it})),n.d(e,"extractQuerystring",(function(){return Y})),n.d(e,"getGlobal",(function(){return x})),n.d(e,"getModularInstance",(function(){return yt})),n.d(e,"getUA",(function(){return y})),n.d(e,"isAdmin",(function(){return K})),n.d(e,"isBrowser",(function(){return _})),n.d(e,"isBrowserExtension",(function(){return w})),n.d(e,"isElectron",(function(){return T})),n.d(e,"isEmpty",(function(){return G})),n.d(e,"isIE",(function(){return E})),n.d(e,"isIndexedDBAvailable",(function(){return k})),n.d(e,"isMobileCordova",(function(){return m})),n.d(e,"isNode",(function(){return b})),n.d(e,"isNodeSdk",(function(){return O})),n.d(e,"isReactNative",(function(){return I})),n.d(e,"isSafari",(function(){return C})),n.d(e,"isUWP",(function(){return S})),n.d(e,"isValidFormat",(function(){return B})),n.d(e,"isValidTimestamp",(function(){return q})),n.d(e,"issuedAtTime",(function(){return V})),n.d(e,"jsonEval",(function(){return M})),n.d(e,"map",(function(){return z})),n.d(e,"ordinal",(function(){return vt})),n.d(e,"querystring",(function(){return $})),n.d(e,"querystringDecode",(function(){return Q})),n.d(e,"safeGet",(function(){return H})),n.d(e,"stringLength",(function(){return ct})),n.d(e,"stringToByteArray",(function(){return ut})),n.d(e,"stringify",(function(){return F})),n.d(e,"validateArgCount",(function(){return rt})),n.d(e,"validateCallback",(function(){return at})),n.d(e,"validateContextObject",(function(){return st})),n.d(e,"validateIndexedDBOpenable",(function(){return A})),n.d(e,"validateNamespace",(function(){return ot}));var r=n("fbb0"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u=function(t){var e=[],n=0,r=0;while(n<t.length){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=t[n++];var a=t[n++],s=t[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{o=t[n++],a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length,s=a?n[t.charAt(i)]:0;++i;var u=i<t.length,c=u?n[t.charAt(i)]:64;++i;var l=i<t.length,h=l?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==h)throw Error();var f=o<<2|s>>4;if(r.push(f),64!==c){var d=s<<4&240|c>>2;if(r.push(d),64!==h){var p=c<<6&192|h;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){var e=s(t);return c.encodeByteArray(e,!0)},h=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function f(t){return d(void 0,t)}function d(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var r in e)e.hasOwnProperty(r)&&p(r)&&(t[r]=d(t[r],e[r]));return t}function p(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r["a"])({iss:"https://securetoken.google.com/"+i,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[c.encodeString(JSON.stringify(n),!1),c.encodeString(JSON.stringify(s),!1),u].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function m(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function b(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}function _(){return"object"===typeof self&&self.self===self}function w(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function I(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function T(){return y().indexOf("Electron/")>=0}function E(){var t=y();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function S(){return y().indexOf("MSAppHost/")>=0}function O(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function C(){return!b()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){return"indexedDB"in self&&null!=indexedDB}function A(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function N(){return!(!navigator||!navigator.cookieEnabled)}function x(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P="FirebaseError",R=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name=P,Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,D.prototype.create),o}return Object(r["b"])(e,t),e}(Error),D=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?j(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new R(i,s,r);return u},t}();function j(t,e){return t.replace(L,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var L=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M(t){return JSON.parse(t)}function F(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=M(h(o[0])||""),n=M(h(o[1])||""),i=o[2],r=n["d"]||{},delete n["d"]}catch(a){}return{header:e,claims:n,data:r,signature:i}},q=function(t){var e=U(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof e&&(e.hasOwnProperty("nbf")?r=e["nbf"]:e.hasOwnProperty("iat")&&(r=e["iat"]),i=e.hasOwnProperty("exp")?e["exp"]:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},V=function(t){var e=U(t).claims;return"object"===typeof e&&e.hasOwnProperty("iat")?e["iat"]:null},B=function(t){var e=U(t),n=e.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},K=function(t){var e=U(t).claims;return"object"===typeof e&&!0===e["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function W(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function H(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function G(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function z(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],a=o[0],s=o[1];n(a,s)}return e.length?"&"+e.join("&"):""}function Q(t){var e={},n=t.replace(/^\?/,"").split("&");return n.forEach((function(t){if(t){var n=t.split("="),r=n[0],i=n[1];e[decodeURIComponent(r)]=decodeURIComponent(i)}})),e}function Y(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<e){if(0===o)while(r<=n)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){while(r<e)if(i[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<e)if(i[o]=t[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function J(t,e){var n=new Z(t,e);return n.subscribe.bind(n)}var Z=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=et(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=nt),void 0===r.error&&(r.error=nt),void 0===r.complete&&(r.complete=nt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function tt(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}}function et(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}function nt(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i){var o=t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}};function it(t,e){return t+" failed: "+e+" argument "}function ot(t,e,n){if((!n||e)&&"string"!==typeof e)throw new Error(it(t,"namespace")+"must be a valid firebase namespace.")}function at(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(it(t,e)+"must be a valid function.")}function st(t,e,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(it(t,e)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate.");var s=t.charCodeAt(r)-56320;i=65536+(a<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ct=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},lt=1e3,ht=2,ft=144e5,dt=.5;function pt(t,e,n){void 0===e&&(e=lt),void 0===n&&(n=ht);var r=e*Math.pow(n,t),i=Math.round(dt*r*(Math.random()-.5)*2);return Math.min(ft,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return Number.isFinite(t)?t+gt(t):""+t}function gt(t){t=Math.abs(t);var e=t%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}}.call(this,n("c8ba"))},abfd:function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return f})),n.d(e,"setUserLogHandler",(function(){return d}));var o,a=[];(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=(i={},i[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){var u=i[r];n(u)}}},ae93:function(t,e,n){"use strict";var r,i,o,a=n("d039"),s=n("e163"),u=n("9112"),c=n("5135"),l=n("b622"),h=n("c430"),f=l("iterator"),d=!1,p=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=s(s(o)),i!==Object.prototype&&(r=i)):d=!0);var v=void 0==r||a((function(){var t={};return r[f].call(t)!==t}));v&&(r={}),h&&!v||c(r,f)||u(r,f,p),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},b0c0:function(t,e,n){var r=n("83ab"),i=n("9bf2").f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/,u="name";r&&!(u in o)&&i(o,u,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},b575:function(t,e,n){var r,i,o,a,s,u,c,l,h=n("da84"),f=n("06cf").f,d=n("2cf4").set,p=n("1cdc"),v=n("a4b4"),g=n("605d"),y=h.MutationObserver||h.WebKitMutationObserver,m=h.document,b=h.process,_=h.Promise,w=f(h,"queueMicrotask"),I=w&&w.value;I||(r=function(){var t,e;g&&(t=b.domain)&&t.exit();while(i){e=i.fn,i=i.next;try{e()}catch(n){throw i?a():o=void 0,n}}o=void 0,t&&t.enter()},p||g||v||!y||!m?_&&_.resolve?(c=_.resolve(void 0),c.constructor=_,l=c.then,a=function(){l.call(c,r)}):a=g?function(){b.nextTick(r)}:function(){d.call(h,r)}:(s=!0,u=m.createTextNode(""),new y(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),t.exports=I||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},b622:function(t,e,n){var r=n("da84"),i=n("5692"),o=n("5135"),a=n("90e3"),s=n("4930"),u=n("fdbf"),c=i("wks"),l=r.Symbol,h=u?l:l&&l.withoutSetter||a;t.exports=function(t){return o(c,t)&&(s||"string"==typeof c[t])||(s&&o(l,t)?c[t]=l[t]:c[t]=h("Symbol."+t)),c[t]}},b64b:function(t,e,n){var r=n("23e7"),i=n("7b0b"),o=n("df75"),a=n("d039"),s=a((function(){o(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(t){return o(i(t))}})},b727:function(t,e,n){var r=n("0366"),i=n("44ad"),o=n("7b0b"),a=n("50c4"),s=n("65f0"),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,h=6==t,f=7==t,d=5==t||h;return function(p,v,g,y){for(var m,b,_=o(p),w=i(_),I=r(v,g,3),T=a(w.length),E=0,S=y||s,O=e?S(p,T):n||f?S(p,0):void 0;T>E;E++)if((d||E in w)&&(m=w[E],b=I(m,E,_),t))if(e)O[E]=b;else if(b)switch(t){case 3:return!0;case 5:return m;case 6:return E;case 2:u.call(O,m)}else switch(t){case 4:return!1;case 7:u.call(O,m)}return h?-1:c||l?l:O}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},b7aa:function(t,e,n){"use strict";(function(t){var e=n("cc84");(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function i(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}var o=i(this);function a(t,e){if(e){var n=o;t=t.split(".");for(var i=0;i<t.length-1;i++){var a=t[i];a in n||(n[a]={}),n=n[a]}t=t[t.length-1],i=n[t],e=e(i),e!=i&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}function s(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function u(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:s(t)}}a("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var i=o.setTimeout;n.prototype.c=function(t){i(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=u(t),o=i.next();!o.done;o=i.next())r(o.value).Qa(e,n)}))},e.all=function(t){var n=u(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,s--,0==s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Qa(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,f=null;function d(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&h.test(t)?t:""}function p(){}function v(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function g(t){var e=v(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){return"function"==v(t)}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function b(t){return Object.prototype.hasOwnProperty.call(t,_)&&t[_]||(t[_]=++w)}var _="closure_uid_"+(1e9*Math.random()>>>0),w=0;function I(t,e,n){return t.call.apply(t.bind,arguments)}function T(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function E(t,e,n){return E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?I:T,E.apply(null,arguments)}function S(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var O=Date.now;function C(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function k(t){return t}function A(t,e,n){this.code=P+t,this.message=e||R[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new A(e.substring(P.length),t.message,t.serverResponse):null}C(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var x,P="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},D={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function j(t){for(var e in D)if(D[e].id===t)return t=D[e],{firebaseEndpoint:t.Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function L(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function M(t){if(Error.captureStackTrace)Error.captureStackTrace(this,M);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function F(t,e){t=t.split("%s");for(var n="",r=t.length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");M.call(this,n+t[r])}function U(t,e){throw new F("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function q(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function V(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function B(){this.b=this.a=null}x=j("__EID__")?"__EID__":void 0,C(M,Error),M.prototype.name="CustomError",C(F,M),F.prototype.name="AssertionError",q.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var K=new q((function(){return new H}),(function(t){t.reset()}));function W(){var t=xe,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function H(){this.next=this.b=this.a=null}B.prototype.add=function(t,e){var n=K.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},H.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},H.prototype.reset=function(){this.next=this.b=this.a=null};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function $(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}var Q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},Y=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},X=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function J(t){t:{for(var e=os,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function Z(t,e){return 0<=G(t,e)}function tt(t,e){var n;return e=G(t,e),(n=0<=e)&&Array.prototype.splice.call(t,e,1),n}function et(t,e){$(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function nt(t){return Array.prototype.concat.apply([],arguments)}function rt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var it,ot=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},at=/&/g,st=/</g,ut=/>/g,ct=/"/g,lt=/'/g,ht=/\x00/g,ft=/[\x00&<>"']/;function dt(t,e){return-1!=t.indexOf(e)}function pt(t,e){return t<e?-1:t>e?1:0}t:{var vt=l.navigator;if(vt){var gt=vt.userAgent;if(gt){it=gt;break t}}it=""}function yt(t){return dt(it,t)}function mt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function bt(t){for(var e in t)return!1;return!0}function _t(t){var e,n={};for(e in t)n[e]=t[e];return n}var wt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function It(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<wt.length;o++)n=wt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Tt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||l,r.Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(m(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;U("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function Et(t,e){this.a=t===kt&&e||"",this.b=Ct}function St(t){return t instanceof Et&&t.constructor===Et&&t.b===Ct?t.a:(U("expected object of type Const, got '"+t+"'"),"type_error:Const")}Et.prototype.sa=!0,Et.prototype.ra=function(){return this.a},Et.prototype.toString=function(){return"Const{"+this.a+"}"};var Ot,Ct={},kt={};function At(){if(void 0===Ot){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:k,createScript:k,createScriptURL:k})}catch(n){l.console&&l.console.error(n.message)}Ot=t}else Ot=t}return Ot}function Nt(t,e){this.a=e===jt?t:""}function xt(t){return t instanceof Nt&&t.constructor===Nt?t.a:(U("expected object of type TrustedResourceUrl, got '"+t+"' of type "+v(t)),"type_error:TrustedResourceUrl")}function Pt(t,e){var n=St(t);if(!Dt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Rt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return t=e[r],t instanceof Et?St(t):encodeURIComponent(String(t))})),Lt(t)}Nt.prototype.sa=!0,Nt.prototype.ra=function(){return this.a.toString()},Nt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Rt=/%{(\w+)}/g,Dt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,jt={};function Lt(t){var e=At();return t=e?e.createScriptURL(t):t,new Nt(t,jt)}function Mt(t,e){this.a=e===Wt?t:""}function Ft(t){return t instanceof Mt&&t.constructor===Mt?t.a:(U("expected object of type SafeUrl, got '"+t+"' of type "+v(t)),"type_error:SafeUrl")}Mt.prototype.sa=!0,Mt.prototype.ra=function(){return this.a.toString()},Mt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ut=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,qt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Vt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Bt(t){if(t instanceof Mt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Vt.test(t))t=new Mt(t,Wt);else{t=String(t),t=t.replace(/(%0A|%0D)/g,"");var e=t.match(qt);t=e&&Ut.test(e[1])?new Mt(t,Wt):null}return t}function Kt(t){return t instanceof Mt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Vt.test(t)||(t="about:invalid#zClosurez"),new Mt(t,Wt))}var Wt={},Ht=new Mt("about:invalid#zClosurez",Wt);function Gt(t,e,n){this.a=n===$t?t:""}function zt(t){return t instanceof Gt&&t.constructor===Gt?t.a:(U("expected object of type SafeHtml, got '"+t+"' of type "+v(t)),"type_error:SafeHtml")}Gt.prototype.sa=!0,Gt.prototype.ra=function(){return this.a.toString()},Gt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var $t={};function Qt(t,e){Tt(t,"HTMLScriptElement"),t.src=xt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=l?e=d(e.document):(null===f&&(f=d(l.document)),e=f),e&&t.setAttribute("nonce",e)}function Yt(t,e,n,r){return t=t instanceof Mt?t:Kt(t),e=e||l,n=n instanceof Et?St(n):n||"",e.open(Ft(t),n,r,void 0)}function Xt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Jt(t){return ft.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(at,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(st,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ut,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ct,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(lt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ht,"&#0;"))),t}function Zt(t){return Zt[" "](t),t}function te(t,e){var n=de;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}Zt[" "]=p;var ee,ne=yt("Opera"),re=yt("Trident")||yt("MSIE"),ie=yt("Edge"),oe=ie||re,ae=yt("Gecko")&&!(dt(it.toLowerCase(),"webkit")&&!yt("Edge"))&&!(yt("Trident")||yt("MSIE"))&&!yt("Edge"),se=dt(it.toLowerCase(),"webkit")&&!yt("Edge");function ue(){var t=l.document;return t?t.documentMode:void 0}t:{var ce="",le=function(){var t=it;return ae?/rv:([^\);]+)(\)|;)/.exec(t):ie?/Edge\/([\d\.]+)/.exec(t):re?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):se?/WebKit\/(\S+)/.exec(t):ne?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(le&&(ce=le?le[1]:""),re){var he=ue();if(null!=he&&he>parseFloat(ce)){ee=String(he);break t}}ee=ce}var fe,de={};function pe(t){return te(t,(function(){for(var e=0,n=ot(String(ee)).split("."),r=ot(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=pt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||pt(0==a[2].length,0==s[2].length)||pt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(l.document&&re){var ve=ue();fe=ve||(parseInt(ee,10)||void 0)}else fe=void 0;var ge=fe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Zd){}var ye=!re||9<=Number(ge);function me(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function be(t,e){mt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Ie.hasOwnProperty(n)?t.setAttribute(Ie[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var _e,we,Ie={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Te(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ye&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Jt(a.name),'"'),a.type){o.push(' type="',Jt(a.type),'"');var s={};It(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=Se(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):be(o,a)),2<r.length&&Ee(i,o,r),o}function Ee(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!g(o)||m(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(m(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(y(o)){a="function"==typeof o.item;break t}}a=!1}z(a?rt(o):o,r)}}}function Se(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function Oe(t){l.setTimeout((function(){throw t}),0)}function Ce(){var t=l.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!yt("Presto")&&(t=function(){var t=Se(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;t=e.document,t.open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=E((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!yt("Trident")&&!yt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var t=n.Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){l.setTimeout(t,0)}}function ke(t,e){we||Ae(),Ne||(we(),Ne=!0),xe.add(t,e)}function Ae(){if(l.Promise&&l.Promise.resolve){var t=l.Promise.resolve(void 0);we=function(){t.then(Pe)}}else we=function(){var t=Pe;!y(l.setImmediate)||l.Window&&l.Window.prototype&&!yt("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(_e||(_e=Ce()),_e(t)):l.setImmediate(t)}}var Ne=!1,xe=new B;function Pe(){for(var t;t=W();){try{t.a.call(t.b)}catch(e){Oe(e)}V(K,t)}Ne=!1}function Re(t,e){if(this.a=De,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=p)try{var n=this;t.call(e,(function(t){$e(n,je,t)}),(function(t){if(!(t instanceof rn))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}$e(n,Le,t)}))}catch(r){$e(this,Le,r)}}var De=0,je=2,Le=3;function Me(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Me.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Fe=new q((function(){return new Me}),(function(t){t.reset()}));function Ue(t,e,n){var r=Fe.get();return r.g=t,r.b=e,r.f=n,r}function qe(t){if(t instanceof Re)return t;var e=new Re(p);return $e(e,je,t),e}function Ve(t){return new Re((function(e,n){n(t)}))}function Be(t,e,n){Qe(t,e,n,null)||ke(S(e,t))}function Ke(t){return new Re((function(e,n){var r=t.length,i=[];if(r)for(var o,a=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},u=0;u<t.length;u++)o=t[u],Be(o,S(a,u),s);else e(i)}))}function We(t){return new Re((function(e){var n=t.length,r=[];if(n)for(var i,o=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},a=0;a<t.length;a++)i=t[a],Be(i,S(o,a,!0),S(o,a,!1));else e(r)}))}function He(t,e){if(t.a==De)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==De&&1==r?He(n,e):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):Je(n),Ze(n,i,Le,e)))}t.c=null}else $e(t,Le,e)}function Ge(t,e){t.b||t.a!=je&&t.a!=Le||Xe(t),t.f?t.f.next=e:t.b=e,t.f=e}function ze(t,e,n,r){var i=Ue(null,null,null);return i.a=new Re((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof rn?o(e):t(i)}catch(a){o(a)}}:o})),i.a.c=t,Ge(t,i),i.a}function $e(t,e,n){t.a==De&&(t===n&&(e=Le,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Qe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Xe(t),e!=Le||n instanceof rn||en(t,n)))}function Qe(t,e,n,r){if(t instanceof Re)return Ge(t,Ue(e||p,n||null,r)),!0;if(L(t))return t.then(e,n,r),!0;if(m(t))try{var i=t.then;if(y(i))return Ye(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Ye(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(u){o(u)}}function Xe(t){t.h||(t.h=!0,ke(t.gc,t))}function Je(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ze(t,e,n,r){if(n==Le&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,tn(e,n,r);else try{e.c?e.g.call(e.f):tn(e,n,r)}catch(i){nn.call(null,i)}V(Fe,e)}function tn(t,e,n){e==je?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}function en(t,e){t.g=!0,ke((function(){t.g&&nn.call(null,e)}))}Re.prototype.then=function(t,e,n){return ze(this,y(t)?t:null,y(e)?e:null,n)},Re.prototype.$goog_Thenable=!0,n=Re.prototype,n.oa=function(t,e){return t=Ue(t,t,e),t.c=!0,Ge(this,t),this},n.o=function(t,e){return ze(this,null,t,e)},n.cancel=function(t){if(this.a==De){var e=new rn(t);ke((function(){He(this,e)}),this)}},n.$c=function(t){this.a=De,$e(this,je,t)},n.ad=function(t){this.a=De,$e(this,Le,t)},n.gc=function(){for(var t;t=Je(this);)Ze(this,t,this.a,this.i);this.h=!1};var nn=Oe;function rn(t){M.call(this,t)}function on(){0!=an&&(sn[b(this)]=this),this.xa=this.xa,this.pa=this.pa}C(rn,M),rn.prototype.name="cancel";var an=0,sn={};function un(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=an)){var e=b(t);if(0!=an&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete sn[e]}}on.prototype.xa=!1,on.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var cn=Object.freeze||function(t){return t},ln=!re||9<=Number(ge),hn=re&&!pe("9"),fn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",p,e),l.removeEventListener("test",p,e)}catch(n){}return t}();function dn(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function pn(t,e){if(dn.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(ae){t:{try{Zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:vn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}dn.prototype.preventDefault=function(){this.defaultPrevented=!0},C(pn,dn);var vn=cn({2:"touch",3:"pen",4:"mouse"});pn.prototype.preventDefault=function(){pn.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,hn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},pn.prototype.g=function(){return this.a};var gn="closure_listenable_"+(1e6*Math.random()|0),yn=0;function mn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++yn,this.va=this.Pa=!1}function bn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function _n(t){this.src=t,this.a={},this.b=0}function wn(t,e){var n=e.type;n in t.a&&tt(t.a[n],e)&&(bn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function In(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}_n.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var a=In(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):(e=new mn(e,this.src,o,!!r,i),e.Pa=n,t.push(e)),e};var Tn="closure_lm_"+(1e6*Math.random()|0),En={};function Sn(t,e,n,r,i){if(r&&r.once)kn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Sn(t,e[o],n,r,i);else n=Mn(n),t&&t[gn]?Un(t,e,n,m(r)?!!r.capture:!!r,i):On(t,e,n,!1,r,i)}function On(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i,s=jn(t);if(s||(t[Tn]=s=new _n(t)),n=s.add(e,n,r,a,o),!n.proxy){if(r=Cn(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)fn||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function Cn(){var t=Dn,e=ln?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function kn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)kn(t,e[o],n,r,i);else n=Mn(n),t&&t[gn]?qn(t,e,n,m(r)?!!r.capture:!!r,i):On(t,e,n,!0,r,i)}function An(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)An(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=Mn(n),t&&t[gn]?(t=t.v,e=String(e).toString(),e in t.a&&(o=t.a[e],n=In(o,n,r,i),-1<n&&(bn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=jn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=In(e,n,r,i)),(n=-1<t?e[t]:null)&&Nn(n))}function Nn(t){if("number"!==typeof t&&t&&!t.va){var e=t.src;if(e&&e[gn])wn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=jn(e))?(wn(n,t),0==n.b&&(n.src=null,e[Tn]=null)):bn(t)}}}function xn(t){return t in En?En[t]:En[t]="on"+t}function Pn(t,e,n,r){var i=!0;if((t=jn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=Rn(o,r),i=i&&!1!==o)}return i}function Rn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&Nn(t),n.call(r,e)}function Dn(t,e){if(t.va)return!0;if(!ln){if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}if(r=e,e=new pn(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=Pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=Pn(r[i],t,!1,e),n=n&&o}return n}return Rn(t,new pn(e,this))}function jn(t){return t=t[Tn],t instanceof _n?t:null}var Ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mn(t){return y(t)?t:(t[Ln]||(t[Ln]=function(e){return t.handleEvent(e)}),t[Ln])}function Fn(){on.call(this),this.v=new _n(this),this.ac=this,this.gb=null}function Un(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function qn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Vn(t,e,n,r){if(e=t.v.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&wn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Bn(t,e,n){if(y(t))n&&(t=E(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=E(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function Kn(t){var e=null;return new Re((function(n,r){e=Bn((function(){n(void 0)}),t),-1==e&&r(Error("Failed to schedule timer."))})).o((function(t){throw l.clearTimeout(e),t}))}function Wn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"===typeof t)return t.split("");if(g(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Hn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(g(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Gn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(g(t)||"string"===typeof t)z(t,e,void 0);else for(var n=Hn(t),r=Wn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}function zn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof zn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function $n(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Qn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],Qn(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Qn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}C(Fn,on),Fn.prototype[gn]=!0,Fn.prototype.addEventListener=function(t,e,n,r){Sn(this,t,e,n,r)},Fn.prototype.removeEventListener=function(t,e,n,r){An(this,t,e,n,r)},Fn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"===typeof t)t=new dn(t,n);else if(t instanceof dn)t.target=t.target||n;else{var i=t;t=new dn(r,n),It(t,i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Vn(a,r,!0,t)&&i}if(a=t.b=n,i=Vn(a,r,!0,t)&&i,i=Vn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)a=t.b=e[o],i=Vn(a,r,!1,t)&&i;return i},Fn.prototype.Da=function(){if(Fn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)bn(n[r]);delete e.a[t],e.b--}}this.gb=null},n=zn.prototype,n.W=function(){$n(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},n.Y=function(){return $n(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(t,e){return Qn(this.b,t)?this.b[t]:e},n.set=function(t,e){Qn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},n.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Yn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xn(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Jn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Jn?(this.i=void 0!==e?e:t.i,Zn(this,t.c),this.l=t.l,this.a=t.a,tr(this,t.g),this.f=t.f,er(this,_r(t.b)),this.h=t.h):t&&(n=String(t).match(Yn))?(this.i=!!e,Zn(this,n[1]||"",!0),this.l=ar(n[2]||""),this.a=ar(n[3]||"",!0),tr(this,n[4]),this.f=ar(n[5]||"",!0),er(this,n[6]||"",!0),this.h=ar(n[7]||"")):(this.i=!!e,this.b=new pr(null,this.i))}function Zn(t,e,n){t.c=n?ar(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function tr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function er(t,e,n){e instanceof pr?(t.b=e,Ir(t.b,t.i)):(n||(e=sr(e,fr)),t.b=new pr(e,t.i))}function nr(t,e,n){t.b.set(e,n)}function rr(t,e){return t.b.get(e)}function ir(t){return t instanceof Jn?new Jn(t):new Jn(t,void 0)}function or(t,e,n,r){var i=new Jn(null,void 0);return t&&Zn(i,t),e&&(i.a=e),n&&tr(i,n),r&&(i.f=r),i}function ar(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function sr(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,ur),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ur(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}Jn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(sr(e,cr,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(sr(e,cr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.g,null!=n&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(sr(n,"/"==n.charAt(0)?hr:lr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",sr(n,dr)),t.join("")},Jn.prototype.resolve=function(t){var e=new Jn(this),n=!!t.c;n?Zn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)tr(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(dt(i,"./")||dt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?er(e,_r(t.b)):n=!!t.h,n&&(e.h=t.h),e};var cr=/[#\/\?@]/g,lr=/[#\?:]/g,hr=/[#\?]/g,fr=/[#\?@]/g,dr=/#/g;function pr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function vr(t){t.a||(t.a=new zn,t.b=0,t.c&&Xn(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function gr(t){var e=Hn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new pr(null,void 0);t=Wn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?br(n,i,o):n.add(i,o)}return n}function yr(t,e){vr(t),e=wr(t,e),Qn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,Qn(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&$n(t)))}function mr(t,e){return vr(t),e=wr(t,e),Qn(t.a.b,e)}function br(t,e,n){yr(t,e),0<n.length&&(t.c=null,t.a.set(wr(t,e),rt(n)),t.b+=n.length)}function _r(t){var e=new pr;return e.c=t.c,t.a&&(e.a=new zn(t.a),e.b=t.b),e}function wr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ir(t,e){e&&!t.f&&(vr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(yr(this,e),br(this,n,t))}),t)),t.f=e}function Tr(t){var e=[];return Sr(new Er,t,e),e.join("")}function Er(){}function Sr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),Sr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&(o=e[r],"function"!=typeof o&&(n.push(i),kr(r,n),n.push(":"),Sr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":kr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}n=pr.prototype,n.add=function(t,e){vr(this),this.c=null,t=wr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(t,e){vr(this),this.a.forEach((function(n,r){z(n,(function(n){t.call(e,n,r,this)}),this)}),this)},n.Y=function(){vr(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},n.W=function(t){vr(this);var e=[];if("string"===typeof t)mr(this,t)&&(e=nt(e,this.a.get(wr(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=nt(e,t[n])}return e},n.set=function(t,e){return vr(this),this.c=null,t=wr(this,t),mr(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},n.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function kr(t,e){e.push('"',t.replace(Cr,(function(t){var e=Or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Or[t]=e),e})),'"')}function Ar(){var t=Zr();return re&&!!ge&&11==ge||/Edge\/\d+/.test(t)}function Nr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function xr(t,e){e=e||l.window;var n="about:blank";t&&(n=Ft(Bt(t)||Ht)),e.location.href=n}function Pr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<Pr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function Rr(){var t=Zr();return t=Yr(t)!=Qr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null,!(t&&30>t)&&(!re||!ge||9<ge)}function Dr(t){return t=(t||Zr()).toLowerCase(),!!(t.match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function jr(t){t=t||l.window;try{t.close()}catch(e){}}function Lr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Zr().toLowerCase(),r&&(e.target=r,dt(n,"crios/")&&(e.target="_blank")),Yr(Zr())==$r&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Mt?n:Bt("undefined"!=typeof n.href?n.href:String(n))||Ht,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((yt("iPhone")&&!yt("iPod")&&!yt("iPad")||yt("iPad")||yt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=Se(document,"A"),Tt(a,"HTMLAnchorElement"),e=e instanceof Mt?e:Kt(e),a.href=Ft(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),t=document.createEvent("MouseEvent"),t.initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Yt("",r,n,a),t=Ft(e),a&&(oe&&dt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Jt(t)+'">',t=(r=At())?r.createHTML(t):t,t=new Gt(t,null,$t),r=a.document)&&(r.write(zt(t)),r.close())):(a=Yt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}function Mr(t){return new Re((function(e){function n(){Kn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}return n()}))}var Fr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ur=/^[^@]+@[^@]+$/;function qr(){var t=null;return new Re((function(e){"complete"==l.document.readyState?e():(t=function(){e()},kn(window,"load",t))})).o((function(e){throw An(window,"load",t),e}))}function Vr(){return Br(void 0)?qr().then((function(){return new Re((function(t,e){var n=l.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ve(Error("Cordova must run in an Android or iOS file scheme."))}function Br(t){return t=t||Zr(),!("file:"!==ii()&&"ionic:"!==ii()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kr(){var t=l.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Wr(){return"undefined"!==typeof l.WorkerGlobalScope&&"function"===typeof l.importScripts}function Hr(){return e["default"].INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e["default"].INTERNAL.hasOwnProperty("node")?"Node":Wr()?"Worker":"Browser"}function Gr(){var t=Hr();return"ReactNative"===t||"Node"===t}function zr(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}var $r="Firefox",Qr="Chrome";function Yr(t){var e=t.toLowerCase();return dt(e,"opera/")||dt(e,"opr/")||dt(e,"opios/")?"Opera":dt(e,"iemobile")?"IEMobile":dt(e,"msie")||dt(e,"trident/")?"IE":dt(e,"edge/")?"Edge":dt(e,"firefox/")?$r:dt(e,"silk/")?"Silk":dt(e,"blackberry")?"Blackberry":dt(e,"webos")?"Webos":!dt(e,"safari/")||dt(e,"chrome/")||dt(e,"crios/")||dt(e,"android")?!dt(e,"chrome/")&&!dt(e,"crios/")||dt(e,"edge/")?dt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Qr:"Safari"}var Xr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Jr(t,e){e=e||[];var n,r=[],i={};for(n in Xr)i[Xr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),e=r,e.length||(e=["FirebaseCore-web"]),r=Hr(),"Browser"===r?(i=Zr(),r=Yr(i)):"Worker"===r&&(i=Zr(),r=Yr(i)+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Zr(){return l.navigator&&l.navigator.userAgent||""}function ti(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function ei(){try{var t=l.localStorage,e=ci();if(t)return t.setItem(e,"1"),t.removeItem(e),!Ar()||!!l.indexedDB}catch(n){return Wr()&&!!l.indexedDB}return!1}function ni(){return(ri()||"chrome-extension:"===ii()||Br())&&!Gr()&&ei()&&!Wr()}function ri(){return"http:"===ii()||"https:"===ii()}function ii(){return l.location&&l.location.protocol||null}function oi(t){return t=t||Zr(),!Dr(t)&&Yr(t)!=$r}function ai(t){return"undefined"===typeof t?null:Tr(t)}function si(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function ui(t){if(null!==t)return JSON.parse(t)}function ci(t){return t||Math.floor(1e9*Math.random()).toString()}function li(t){return t=t||Zr(),"Safari"!=Yr(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function hi(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function fi(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Zr(),e=Hr(),this.b=Dr(t)||"ReactNative"===e}function di(){var t=l.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function pi(){var t=l.document,e=null;return di()||!t?qe():new Re((function(n){e=function(){di()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}function vi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function gi(){return!(!ti("fireauth.oauthhelper",l)&&!ti("fireauth.iframe",l))}function yi(){var t=l.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}function mi(){var t=l.navigator;return t&&t.serviceWorker?qe().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):qe(null)}fi.prototype.get=function(){var t=l.navigator;return!t||"boolean"!==typeof t.onLine||!ri()&&"chrome-extension:"!==ii()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var bi,_i={};function wi(t){_i[t]||(_i[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Ii={};Object.defineProperty(Ii,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ii,"abcd",{configurable:!0,enumerable:!0,value:2}),bi=2==Ii.abcd}catch(Zd){bi=!1}function Ti(t,e,n){bi?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ei(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ti(t,n,e[n])}function Si(t){var e={};return Ei(e,t),e}function Oi(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Ci(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}function ki(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ti(e,n,ki(t[n]));return e}function Ai(t){var e=t&&(t[Di]?"phone":null);if(!(e&&t&&t[Ri]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Ti(this,"uid",t[Ri]),Ti(this,"displayName",t[xi]||null);var n=null;t[Pi]&&(n=new Date(t[Pi]).toUTCString()),Ti(this,"enrollmentTime",n),Ti(this,"factorId",e)}function Ni(t){try{var e=new ji(t)}catch(n){e=null}return e}Ai.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var xi="displayName",Pi="enrolledAt",Ri="mfaEnrollmentId",Di="phoneInfo";function ji(t){Ai.call(this,t),Ti(this,"phoneNumber",t[Di])}function Li(t){var e={},n=t[qi],r=t[Bi],i=t[Ki];if(t=Ni(t[Vi]),!i||i!=Fi&&i!=Ui&&!n||i==Ui&&!r||i==Mi&&!t)throw Error("Invalid checkActionCode response!");i==Ui?(e[Hi]=n||null,e[zi]=n||null,e[Wi]=r):(e[Hi]=r||null,e[zi]=r||null,e[Wi]=n||null),e[Gi]=t||null,Ti(this,Qi,i),Ti(this,$i,ki(e))}C(ji,Ai),ji.prototype.w=function(){var t=ji.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Mi="REVERT_SECOND_FACTOR_ADDITION",Fi="EMAIL_SIGNIN",Ui="VERIFY_AND_CHANGE_EMAIL",qi="email",Vi="mfaInfo",Bi="newEmail",Ki="requestType",Wi="email",Hi="fromEmail",Gi="multiFactorInfo",zi="previousEmail",$i="data",Qi="operation";function Yi(t){t=ir(t);var e=rr(t,Xi)||null,n=rr(t,Ji)||null,r=rr(t,eo)||null;if(r=r&&ro[r]||null,!e||!n||!r)throw new A("argument-error",Xi+", "+Ji+"and "+eo+" are required in a valid action code URL.");Ei(this,{apiKey:e,operation:r,code:n,continueUrl:rr(t,Zi)||null,languageCode:rr(t,to)||null,tenantId:rr(t,no)||null})}var Xi="apiKey",Ji="oobCode",Zi="continueUrl",to="languageCode",eo="mode",no="tenantId",ro={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Mi,signIn:Fi,verifyAndChangeEmail:Ui,verifyEmail:"VERIFY_EMAIL"};function io(t){try{return new Yi(t)}catch(e){return null}}function oo(t){var e=t[lo];if("undefined"===typeof e)throw new A("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[ao];if(n&&"object"===typeof n){e=n[po];var r=n[ho];if(n=n[fo],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new A("argument-error",ho+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new A("argument-error",fo+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new A("argument-error",po+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new A("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new A("argument-error",ao+" property must be a non null object when specified.");if(this.f=null,(e=t[co])&&"object"===typeof e){if(e=e[vo],"string"===typeof e&&e.length)this.f=e;else if("undefined"!==typeof e)throw new A("argument-error",vo+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new A("argument-error",co+" property must be a non null object when specified.");if(e=t[uo],"undefined"!==typeof e&&"boolean"!==typeof e)throw new A("argument-error",uo+" property must be a boolean when specified.");if(this.c=!!e,t=t[so],"undefined"!==typeof t&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new A("argument-error",so+" property must be a non empty string when specified.");this.i=t||null}var ao="android",so="dynamicLinkDomain",uo="handleCodeInApp",co="iOS",lo="url",ho="installApp",fo="minimumVersion",po="packageName",vo="bundleId";function go(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}function yo(t){return Y(t,(function(t){return t=t.toString(16),1<t.length?t:"0"+t})).join("")}var mo=null;function bo(t){var e=[];return _o(t,(function(t){e.push(t)})),e}function _o(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=mo[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}wo();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}function wo(){if(!mo){mo={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===mo[o]&&(mo[o]=i)}}}function Io(t){var e=Eo(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function To(t){try{return new Io(t)}catch(e){return null}}function Eo(t){if(!t)return null;if(t=t.split("."),3!=t.length)return null;t=t[1];for(var e=(4-t.length%4)%4,n=0;n<e;n++)t+=".";try{var r=bo(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=r[e++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(1023&u))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(c){}return null}Io.prototype.T=function(){return this.f},Io.prototype.l=function(){return this.c},Io.prototype.toString=function(){return this.h};var So="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Oo=["client_id","response_type","scope","redirect_uri","state"],Co={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Oo},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Oo},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Oo},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:So},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function ko(t){for(var e in Co)if(Co[e].fa==t)return Co[e];return null}function Ao(t){var e={};e["facebook.com"]=Do,e["google.com"]=Lo,e["github.com"]=jo,e["twitter.com"]=Mo;var n=t&&t[xo];try{if(n)return e[n]?new e[n](t):new Ro(t);if("undefined"!==typeof t[No])return new Po(t)}catch(r){}return null}var No="idToken",xo="providerId";function Po(t){var e=t[xo];if(!e&&t[No]){var n=To(t[No]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Ti(this,"providerId",e),Ti(this,"isNewUser",n)}function Ro(t){Po.call(this,t),t=ui(t.rawUserInfo||"{}"),Ti(this,"profile",ki(t||{}))}function Do(t){if(Ro.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function jo(t){if(Ro.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ti(this,"username",this.profile&&this.profile.login||null)}function Lo(t){if(Ro.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Mo(t){if(Ro.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ti(this,"username",t.screenName||null)}function Fo(t){var e=ir(t),n=rr(e,"link"),r=rr(ir(n),"link");return e=rr(e,"deep_link_id"),rr(ir(e),"link")||e||r||n||t}function Uo(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?qo:Vo}C(Ro,Po),C(Do,Ro),C(jo,Ro),C(Lo,Ro),C(Mo,Ro);var qo="enroll",Vo="signin";function Bo(){}function Ko(t,e){return t.then((function(t){if(t[Ls]){var n=To(t[Ls]);if(!n||e!=n.i)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==P+"user-not-found"?new A("user-mismatch"):t}))}function Wo(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,Ti(this,"providerId",t),Ti(this,"signInMethod",t)}function Ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Go(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Wo(t.providerId,t.pendingToken)}catch(e){}return null}function zo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Ti(this,"idToken",e.idToken),e.accessToken&&Ti(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Ti(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Ti(this,"accessToken",e.oauthToken),Ti(this,"secret",e.oauthTokenSecret)}Ti(this,"providerId",t),Ti(this,"signInMethod",n)}function $o(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:gr(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Qo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new zo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function Yo(t,e){this.Qc=e||[],Ei(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(ko(t)||{}).Ja||null,this.ob=null}function Xo(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');Yo.call(this,t,[])}function Jo(t){Yo.call(this,t,Oo),this.a=[]}function Zo(){Jo.call(this,"facebook.com")}function ta(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new Zo).credential({accessToken:e})}function ea(){Jo.call(this,"github.com")}function na(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new ea).credential({accessToken:e})}function ra(){Jo.call(this,"google.com"),this.Ca("profile")}function ia(t,e){var n=t;return m(t)&&(n=t.idToken,e=t.accessToken),(new ra).credential({idToken:n,accessToken:e})}function oa(){Yo.call(this,"twitter.com",So)}function aa(t,e){var n=t;if(m(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new zo("twitter.com",n,"twitter.com")}function sa(t,e,n){this.a=t,this.f=e,Ti(this,"providerId","password"),Ti(this,"signInMethod",n===ca.EMAIL_LINK_SIGN_IN_METHOD?ca.EMAIL_LINK_SIGN_IN_METHOD:ca.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ua(t){return t&&t.email&&t.password?new sa(t.email,t.password,t.signInMethod):null}function ca(){Ei(this,{providerId:"password",isOAuthProvider:!1})}function la(t,e){if(e=ha(e),!e)throw new A("argument-error","Invalid email link!");return new sa(t,e.code,ca.EMAIL_LINK_SIGN_IN_METHOD)}function ha(t){return t=Fo(t),(t=io(t))&&t.operation===Fi?t:null}function fa(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new A("internal-error");this.a=t,Ti(this,"providerId","phone"),this.fa="phone",Ti(this,"signInMethod","phone")}function da(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new fa(e)}return null}function pa(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function va(t){try{this.a=t||e["default"].auth()}catch(n){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ei(this,{providerId:"phone",isOAuthProvider:!1})}function ga(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new fa({eb:t,cb:e})}function ya(t){if(t.temporaryProof&&t.phoneNumber)return new fa({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return ia(o,n);case"facebook.com":return ta(n);case"github.com":return na(n);case"twitter.com":return aa(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new Wo(e,a):new zo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Jo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function ma(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function ba(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function _a(t){return t=t||{},t.type?new ba(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function wa(){this.b=null,this.a=[]}Uo.prototype.Ha=function(){return this.a?qe(this.a):qe(this.b)},Uo.prototype.w=function(){return this.type==qo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Bo.prototype.ka=function(){},Bo.prototype.b=function(){},Bo.prototype.c=function(){},Bo.prototype.w=function(){},Wo.prototype.ka=function(t){return fu(t,Ho(this))},Wo.prototype.b=function(t,e){var n=Ho(this);return n.idToken=e,du(t,n)},Wo.prototype.c=function(t,e){return Ko(pu(t,Ho(this)),e)},Wo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},zo.prototype.ka=function(t){return fu(t,$o(this))},zo.prototype.b=function(t,e){var n=$o(this);return n.idToken=e,du(t,n)},zo.prototype.c=function(t,e){var n=$o(this);return Ko(pu(t,n),e)},zo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Yo.prototype.Ka=function(t){return this.Ib=_t(t),this},C(Xo,Yo),C(Jo,Yo),Jo.prototype.Ca=function(t){return Z(this.a,t)||this.a.push(t),this},Jo.prototype.Qb=function(){return rt(this.a)},Jo.prototype.credential=function(t,e){var n;if(n=m(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null},!n.idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new zo(this.providerId,n,this.providerId)},C(Zo,Jo),Ti(Zo,"PROVIDER_ID","facebook.com"),Ti(Zo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(ea,Jo),Ti(ea,"PROVIDER_ID","github.com"),Ti(ea,"GITHUB_SIGN_IN_METHOD","github.com"),C(ra,Jo),Ti(ra,"PROVIDER_ID","google.com"),Ti(ra,"GOOGLE_SIGN_IN_METHOD","google.com"),C(oa,Yo),Ti(oa,"PROVIDER_ID","twitter.com"),Ti(oa,"TWITTER_SIGN_IN_METHOD","twitter.com"),sa.prototype.ka=function(t){return this.signInMethod==ca.EMAIL_LINK_SIGN_IN_METHOD?Qu(t,Iu,{email:this.a,oobCode:this.f}):Qu(t,Wu,{email:this.a,password:this.f})},sa.prototype.b=function(t,e){return this.signInMethod==ca.EMAIL_LINK_SIGN_IN_METHOD?Qu(t,Tu,{idToken:e,email:this.a,oobCode:this.f}):Qu(t,Lu,{idToken:e,email:this.a,password:this.f})},sa.prototype.c=function(t,e){return Ko(this.ka(t),e)},sa.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ei(ca,{PROVIDER_ID:"password"}),Ei(ca,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ei(ca,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),fa.prototype.ka=function(t){return t.fb(pa(this))},fa.prototype.b=function(t,e){var n=pa(this);return n.idToken=e,Qu(t,Gu,n)},fa.prototype.c=function(t,e){var n=pa(this);return n.operation="REAUTH",t=Qu(t,zu,n),Ko(t,e)},fa.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},va.prototype.fb=function(t,e){var n=this.a.a;return qe(e.verify()).then((function(r){if("string"!==typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i,o=m(t)?t.session:null,a=m(t)?t.phoneNumber:t;return i=o&&o.type==qo?o.Ha().then((function(t){return ou(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==Vo?o.Ha().then((function(e){return su(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):iu(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Ei(va,{PROVIDER_ID:"phone"}),Ei(va,{PHONE_SIGN_IN_METHOD:"phone"}),ba.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},ba.prototype.T=function(){return this.h},ba.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ia,Ta=null;function Ea(t){var e=Ta;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},t=ti("universalLinks.subscribe",l),"function"===typeof t&&t(null,e.b))}function Sa(t){var e="unauthorized-domain",n=void 0,r=ir(t);t=r.a,r=r.c,"chrome-extension"==r?n=Xt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Xt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Oa(t,e,n){A.call(this,t,n),t=e||{},t.Jb&&Ti(this,"email",t.Jb),t.ea&&Ti(this,"phoneNumber",t.ea),t.credential&&Ti(this,"credential",t.credential),t.Zb&&Ti(this,"tenantId",t.Zb)}function Ca(t){if(t.code){var e=t.code||"";0==e.indexOf(P)&&(e=e.substring(P.length));var n={credential:ya(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Oa(e,n,t.message)}return null}function ka(){}function Aa(t){return t.c||(t.c=t.b())}function Na(){}function xa(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Pa(){}function Ra(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.qc,this),this.a.onerror=E(this.Sb,this),this.a.onprogress=E(this.rc,this),this.a.ontimeout=E(this.vc,this)}function Da(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ja(t,e,n){this.reset(t,e,n,void 0,void 0)}C(Sa,A),C(Oa,A),Oa.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&It(t,e),t},Oa.prototype.toJSON=function(){return this.w()},ka.prototype.c=null,C(Na,ka),Na.prototype.a=function(){var t=xa(this);return t?new ActiveXObject(t):new XMLHttpRequest},Na.prototype.b=function(){var t={};return xa(this)&&(t[0]=!0,t[1]=!0),t},Ia=new Na,C(Pa,ka),Pa.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ra;throw Error("Unsupported browser")},Pa.prototype.b=function(){return{}},n=Ra.prototype,n.open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},n.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Da(this,4)},n.Sb=function(){this.status=500,this.response=this.responseText="",Da(this,4)},n.vc=function(){this.Sb()},n.rc=function(){this.status=200,Da(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ja.prototype.a=null;function La(t){this.f=t,this.b=this.c=this.a=null}function Ma(t,e){this.name=t,this.value=e}ja.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||O(),delete this.a},Ma.prototype.toString=function(){return this.name};var Fa=new Ma("SEVERE",1e3),Ua=new Ma("WARNING",900),qa=new Ma("CONFIG",700),Va=new Ma("FINE",500);function Ba(t){return t.c?t.c:t.a?Ba(t.a):(U("Root logger has no level set."),null)}La.prototype.log=function(t,e,n){if(t.value>=Ba(this).value)for(y(e)&&(e=e()),t=new ja(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Ka={},Wa=null;function Ha(t){var e;if(Wa||(Wa=new La(""),Ka[""]=Wa,Wa.c=qa),!(e=Ka[t])){e=new La(t);var n=t.lastIndexOf("."),r=t.substr(n+1);n=Ha(t.substr(0,n)),n.b||(n.b={}),n.b[r]=e,e.a=n,Ka[t]=e}return e}function Ga(t,e){t&&t.log(Va,e,void 0)}function za(t){this.f=t}function $a(t){Fn.call(this),this.u=t,this.h=void 0,this.readyState=Qa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Ha("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}C(za,ka),za.prototype.a=function(){return new $a(this.f)},za.prototype.b=function(t){return function(){return t}}({}),C($a,Fn);var Qa=0;function Ya(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function Xa(t){t.readyState=4,t.g=null,t.c=null,t.m=null,Ja(t)}function Ja(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Za(t){Fn.call(this),this.headers=new zn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ts,this.u=this.S=!1}n=$a.prototype,n.open=function(t,e){if(this.readyState!=Qa)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,Ja(this)},n.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Xa(this)),this.readyState=Qa},n.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Ja(this)),this.a&&(this.readyState=3,Ja(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):"undefined"!==typeof l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,Ya(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},n.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Xa(this):Ja(this),3==this.readyState&&Ya(this)}},n.tc=function(t){this.a&&(this.response=this.responseText=t,Xa(this))},n.sc=function(t){this.a&&(this.response=t,Xa(this))},n.Ua=function(t){var e=this.i;e&&e.log(Ua,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Xa(this)},n.setRequestHeader=function(t,e){this.l.append(t,e)},n.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Ua,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Ua,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty($a.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),C(Za,Fn);var ts="";Za.prototype.b=Ha("goog.net.XhrIo");var es=/^https?$/i,ns=["POST","PUT"];function rs(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ia.a(),t.C=t.D?Aa(t.D):Aa(Ia),t.a.onreadystatechange=E(t.Vb,t);try{Ga(t.b,ps(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(a){return Ga(t.b,ps(t,"Error opening Xhr: "+a.message)),void as(t,a)}e=r||"";var o=new zn(t.headers);i&&Gn(i,(function(t,e){o.set(e,t)})),i=J(o.Y()),r=l.FormData&&e instanceof l.FormData,!Z(ns,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{ls(t),0<t.g&&(t.u=is(t.a),Ga(t.b,ps(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=E(t.Ma,t)):t.s=Bn(t.Ma,t.g,t)),Ga(t.b,ps(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){Ga(t.b,ps(t,"Send error: "+a.message)),as(t,a)}}function is(t){return re&&pe(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function os(t){return"content-type"==t.toLowerCase()}function as(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ss(t),cs(t)}function ss(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function us(t){if(t.c&&"undefined"!=typeof c)if(t.C[1]&&4==hs(t)&&2==fs(t))Ga(t.b,ps(t,"Local request error detected and ignored"));else if(t.i&&4==hs(t))Bn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==hs(t)){Ga(t.b,ps(t,"Request complete")),t.c=!1;try{var e,n=fs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Yn)[1]||null;if(!o&&l.self&&l.self.location){var a=l.self.location.protocol;o=a.substr(0,a.length-1)}i=!es.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var s=2<hs(t)?t.a.statusText:""}catch(u){Ga(t.b,"Can not get status: "+u.message),s=""}t.h=s+" ["+fs(t)+"]",ss(t)}}finally{cs(t)}}}function cs(t,e){if(t.a){ls(t);var n=t.a,r=t.C[0]?p:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(Fa,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function ls(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function hs(t){return t.a?t.a.readyState:0}function fs(t){try{return 2<hs(t)?t.a.status:-1}catch(e){return-1}}function ds(t){try{return t.a?t.a.responseText:""}catch(e){return Ga(t.b,"Can not get responseText: "+e.message),""}}function ps(t,e){return e+" ["+t.R+" "+t.l+" "+fs(t)+"]"}function vs(t){var e=ks;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function gs(t,e,n){t.a=!0,t.c=n,t.f=!e,ws(t)}function ys(t){if(t.a){if(!t.v)throw new Is(t);t.v=!1}}function ms(t,e){bs(t,null,e,void 0)}function bs(t,e,n,r){t.g.push([e,n,r]),t.a&&ws(t)}function _s(t){return X(t.g,(function(t){return y(t[1])}))}function ws(t){if(t.h&&t.a&&_s(t)){var e=t.h,n=Ss[e];n&&(l.clearTimeout(n.a),delete Ss[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(L(e)||"function"===typeof l.Promise&&e instanceof l.Promise)&&(r=!0,t.i=!0)}catch(u){e=u,t.f=!0,_s(t)||(n=!0)}}t.c=e,r&&(s=E(t.m,t,!0),r=E(t.m,t,!1),e instanceof vs?(bs(e,s,r),e.C=!0):e.then(s,r)),n&&(e=new Es(e),Ss[e.a]=e,t.h=e.a)}function Is(){M.call(this)}function Ts(){M.call(this)}function Es(t){this.a=l.setTimeout(E(this.c,this),0),this.b=t}n=Za.prototype,n.Ma=function(){"undefined"!=typeof c&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ga(this.b,ps(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(Ga(this.b,ps(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),cs(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),cs(this,!0)),Za.ab.Da.call(this)},n.Vb=function(){this.xa||(this.O||this.i||this.f?us(this):this.Jc())},n.Jc=function(){us(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ts:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Fa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Ga(this.b,"Can not get response: "+e.message),null}},vs.prototype.cancel=function(t){if(this.a)this.c instanceof vs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ts(this),ys(this),gs(this,!1,t))}},vs.prototype.m=function(t,e){this.i=!1,gs(this,t,e)},vs.prototype.then=function(t,e,n){var r,i,o=new Re((function(t,e){r=t,i=e}));return bs(this,r,(function(t){t instanceof Ts?o.cancel():i(t)})),o.then(t,e,n)},vs.prototype.$goog_Thenable=!0,C(Is,M),Is.prototype.message="Deferred has already fired",Is.prototype.name="AlreadyCalledError",C(Ts,M),Ts.prototype.message="Deferred was canceled",Ts.prototype.name="CanceledError",Es.prototype.c=function(){throw delete Ss[this.a],this.b};var Ss={};function Os(t){var e={},n=e.document||document,r=xt(t).toString(),i=Se(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new vs(o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout((function(){As(i,!0);var t=new Ps(xs,"Timeout reached for loading script "+r);ys(a),gs(a,!1,t)}),u),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(As(i,e.xd||!1,s),ys(a),gs(a,!0,null))},i.onerror=function(){As(i,!0,s);var t=new Ps(Ns,"Error while loading script "+r);ys(a),gs(a,!1,t)},o=e.attributes||{},It(o,{type:"text/javascript",charset:"UTF-8"}),be(i,o),Qt(i,t),Cs(n).appendChild(i),a}function Cs(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}function ks(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&As(t,!0,this.Ma)}}function As(t,e,n){null!=n&&l.clearTimeout(n),t.onload=p,t.onerror=p,t.onreadystatechange=p,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ns=0,xs=1;function Ps(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),M.call(this,n),this.code=t}function Rs(t){this.f=t}function Ds(t,n,r){if(this.c=t,t=n||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ms,this.g=_t(t.secureTokenHeaders||Fs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Us,this.a=_t(t.firebaseHeaders||qs),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==Hr(),r=l.XMLHttpRequest||r&&e["default"].INTERNAL.node&&e["default"].INTERNAL.node.XMLHttpRequest,!r&&!Wr())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Wr()?this.f=new za(self):Gr()?this.f=new Rs(r):this.f=new Pa,this.b=null}C(Ps,M),C(Rs,ka),Rs.prototype.a=function(){return new this.f},Rs.prototype.b=function(){return{}};var js,Ls="idToken",Ms=new fi(3e4,6e4),Fs={"Content-Type":"application/x-www-form-urlencoded"},Us=new fi(3e4,6e4),qs={"Content-Type":"application/json"};function Vs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Bs(t,e){e&&(t.l=Ks("https://securetoken.googleapis.com/v1/token",e),t.h=Ks("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ks("https://identitytoolkit.googleapis.com/v2/",e))}function Ks(t,e){return t=ir(t),e=ir(e.url),t.f=t.a+t.f,Zn(t,e.c),t.a=e.a,tr(t,e.g),t.toString()}function Ws(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Hs(t,e,n,r,i,o,a){Rr()||Wr()?t=E(t.u,t):(js||(js=new Re((function(t,e){$s(t,e)}))),t=E(t.s,t)),t(e,n,r,i,o,a)}Ds.prototype.T=function(){return this.b},Ds.prototype.u=function(t,e,n,r,i,o){if(Wr()&&("undefined"===typeof l.fetch||"undefined"===typeof l.Headers||"undefined"===typeof l.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Za(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Un(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(ds(this))||null}catch(n){t=null}e&&e(t)})),qn(a,"ready",(function(){s&&clearTimeout(s),un(this)})),qn(a,"timeout",(function(){s&&clearTimeout(s),un(this),e&&e(null)})),rs(a,t,n,r,i)};var Gs=new Et(kt,"https://apis.google.com/js/client.js?onload=%{onload}"),zs="__fcb"+Math.floor(1e6*Math.random()).toString();function $s(t,e){if(((window.gapi||{}).client||{}).request)t();else{l[zs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=Pt(Gs,{onload:zs});ms(Os(n),(function(){e(Error("CORS_UNSUPPORTED"))}))}}function Qs(t,e){return new Re((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Hs(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Xu(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",gr(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}function Ys(t,e,n,r,i,o,a){var s=ir(e+n);nr(s,"key",t.c),a&&nr(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&nr(s,c,i[c]);return new Re((function(e,n){Hs(t,s.toString(),(function(t){t?t.error?n(Xu(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:Tr(si(i)),t.a,t.v.get())}))}function Xs(t){if(t=t.email,"string"!==typeof t||!Ur.test(t))throw new A("invalid-email")}function Js(t){"email"in t&&Xs(t)}function Zs(t,e){return Qu(t,bu,{identifier:e,continueUri:ri()?Nr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}function tu(t){return Qu(t,xu,{}).then((function(t){return t.authorizedDomains||[]}))}function eu(t){if(!t[Ls]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,_t(t));throw new A("internal-error")}}function nu(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}Ds.prototype.s=function(t,e,n,r,i){var o=this;js.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ds.prototype.zb=function(){return Qu(this,Mu,{})},Ds.prototype.Bb=function(t,e){return Qu(this,ju,{idToken:t,email:e})},Ds.prototype.Cb=function(t,e){return Qu(this,Lu,{idToken:t,password:e})};var ru={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function iu(t,e){return Qu(t,Du,e)}function ou(t,e){return Qu(t,Fu,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}function au(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function su(t,e){return Qu(t,Uu,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}function uu(t,e,n){return Qu(t,wu,{idToken:e,deleteProvider:n})}function cu(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function lu(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(t=new pr(t.postBody),mr(t,"nonce")&&(e.nonce=t.get("nonce")))),e}function hu(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Ca(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Ca(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Ca(t)):t.errorMessage&&(e=Yu(t.errorMessage)),e)throw e;eu(t)}function fu(t,e){return e.returnIdpCredential=!0,Qu(t,qu,e)}function du(t,e){return e.returnIdpCredential=!0,Qu(t,Bu,e)}function pu(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Qu(t,Vu,e)}function vu(t){if(!t.oobCode)throw new A("invalid-action-code")}n=Ds.prototype,n.Db=function(t,e){var n={idToken:t},r=[];return mt(ru,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Qu(this,ju,n)},n.vb=function(t,e){return t={requestType:"PASSWORD_RESET",email:t},It(t,e),Qu(this,Nu,t)},n.wb=function(t,e){return t={requestType:"EMAIL_SIGNIN",email:t},It(t,e),Qu(this,Cu,t)},n.ub=function(t,e){return t={requestType:"VERIFY_EMAIL",idToken:t},It(t,e),Qu(this,ku,t)},n.Eb=function(t,e,n){return t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},It(t,n),Qu(this,Au,t)},n.fb=function(t){return Qu(this,Hu,t)},n.nb=function(t,e){return Qu(this,Ru,{oobCode:t,newPassword:e})},n.Ra=function(t){return Qu(this,yu,{oobCode:t})},n.jb=function(t){return Qu(this,gu,{oobCode:t})};var gu={endpoint:"setAccountInfo",A:vu,Z:"email",B:!0},yu={endpoint:"resetPassword",A:vu,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},B:!0},mu={endpoint:"signupNewUser",A:function(t){if(Xs(t),!t.password)throw new A("weak-password")},G:eu,V:!0,B:!0},bu={endpoint:"createAuthUri",B:!0},_u={endpoint:"deleteAccount",N:["idToken"]},wu={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Iu={endpoint:"emailLinkSignin",N:["email","oobCode"],A:Xs,G:eu,V:!0,B:!0},Tu={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:Xs,G:eu,V:!0},Eu={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:au,G:eu,B:!0,Na:!0},Su={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:au,G:eu,B:!0,Na:!0},Ou={endpoint:"getAccountInfo"},Cu={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");Xs(t)},Z:"email",B:!0},ku={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Au={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Nu={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");Xs(t)},Z:"email",B:!0},xu={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Pu={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},Ru={endpoint:"resetPassword",A:vu,Z:"email",B:!0},Du={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},ju={endpoint:"setAccountInfo",N:["idToken"],A:Js,V:!0},Lu={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(Js(t),!t.password)throw new A("weak-password")},G:eu,V:!0},Mu={endpoint:"signupNewUser",G:eu,V:!0,B:!0},Fu={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Uu={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},qu={endpoint:"verifyAssertion",A:cu,Ya:lu,G:hu,V:!0,B:!0},Vu={endpoint:"verifyAssertion",A:cu,Ya:lu,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw Yu(t.errorMessage);eu(t)},V:!0,B:!0},Bu={endpoint:"verifyAssertion",A:function(t){if(cu(t),!t.idToken)throw new A("internal-error")},Ya:lu,G:hu,V:!0},Ku={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:eu,V:!0,B:!0},Wu={endpoint:"verifyPassword",A:function(t){if(Xs(t),!t.password)throw new A("wrong-password")},G:eu,V:!0,B:!0},Hu={endpoint:"verifyPhoneNumber",A:nu,G:eu,B:!0},Gu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");nu(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Ca(t);eu(t)}},zu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:nu,G:eu,B:!0},$u={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ls]^!!t.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function Qu(t,e,n){if(!Ci(n,e.N))return Ve(new A("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return qe(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),Ys(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function Yu(t){return Xu({error:{errors:[{message:t}],code:400,message:t}})}function Xu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},It(r,e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=ai(t)),new A("internal-error",e)}function Ju(t){this.b=t,this.a=null,this.rb=Zu(this)}function Zu(t){return ac().then((function(){return new Re((function(e,n){ti("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:ti("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ic.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}function tc(t,e){return t.rb.then((function(){return new Re((function(n){t.a.send(e.type,e,n,ti("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}function ec(t,e){t.rb.then((function(){t.a.register("authEvent",e,ti("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}var nc=new Et(kt,"https://apis.google.com/js/api.js?onload=%{onload}"),rc=new fi(3e4,6e4),ic=new fi(5e3,15e3),oc=null;function ac(){return oc||(oc=new Re((function(t,e){function n(){hi(),ti("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){hi(),e(Error("Network Error"))},timeout:rc.get()})}if(ti("gapi.iframes.Iframe"))t();else if(ti("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){ti("gapi.load")?n():e(Error("Network Error"))},r=Pt(nc,{onload:r}),qe(Os(r)).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw oc=null,t})))}function sc(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?(t=ir(this.g.url),t=or(t.c,t.a,t.g,"/emulator/auth/iframe")):t=or("https",this.l,null,"/__/auth/iframe"),this.a=t,nr(this.a,"apiKey",this.h),nr(this.a,"appName",this.i),this.b=null,this.c=[]}function uc(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function cc(t){try{return e["default"].app(t).auth().Ga()}catch(n){return[]}}function lc(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function hc(t){var e=Nr();return tu(t).then((function(t){t:{var n=ir(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=ir(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Fr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Sa(Nr())}))}function fc(t){return t.m||(t.m=qr().then((function(){if(!t.u){var e=t.c,n=t.i,r=cc(t.b),i=new sc(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=rt(r||[]),t.u=i.toString()}t.v=new Ju(t.u),vc(t)}))),t.m}function dc(t){return t.l||(t.C=t.c?Jr(t.c,cc(t.b)):null,t.l=new Ds(t.g,j(t.i),t.C),t.f&&Bs(t.l,t.f)),t.l}function pc(t,e,n,r,i,o,a,s,u,c,l,h){return t=new uc(t,e,n,r,i,h),t.l=o,t.g=a,t.i=s,t.b=_t(u||null),t.f=c,t.yb(l).toString()}function vc(t){if(!t.v)throw Error("IfcHandler must be initialized!");ec(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=_a(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return n={},n.status=r?"ACK":"ERROR",qe(n)}return n.status="ERROR",qe(n)}))}function gc(t){var e={type:"webStorageSupport"};return fc(t).then((function(){return tc(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))}function yc(t){if(this.a=t||e["default"].INTERNAL.reactNative&&e["default"].INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function mc(t){this.b=t,this.a={},this.f=E(this.c,this)}sc.prototype.toString=function(){return this.f?nr(this.a,"v",this.f):yr(this.a.b,"v"),this.b?nr(this.a,"eid",this.b):yr(this.a.b,"eid"),this.c.length?nr(this.a,"fw",this.c.join(",")):yr(this.a.b,"fw"),this.a.toString()},uc.prototype.yb=function(t){return this.h=t,this},uc.prototype.toString=function(){if(this.v){var t=ir(this.v.url);t=or(t.c,t.a,t.g,"/emulator/auth/handler")}else t=or("https",this.u,null,"/__/auth/handler");if(nr(t,"apiKey",this.s),nr(t,"appName",this.c),nr(t,"authType",this.m),this.a.isOAuthProvider){var n=this.a;try{var r=e["default"].app(this.c).auth().la()}catch(u){r=null}for(var i in n.ob=r,nr(t,"providerId",this.a.providerId),r=this.a,n=si(r.Ib),n)n[i]=n[i].toString();i=r.Qc,n=_t(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}r.pb&&r.ob&&!n[r.pb]&&(n[r.pb]=r.ob),bt(n)||nr(t,"customParameters",ai(n))}if("function"===typeof this.a.Qb&&(r=this.a.Qb(),r.length&&nr(t,"scopes",r.join(","))),this.l?nr(t,"redirectUrl",this.l):yr(t.b,"redirectUrl"),this.g?nr(t,"eventId",this.g):yr(t.b,"eventId"),this.i?nr(t,"v",this.i):yr(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!rr(t,s)&&nr(t,s,this.b[s]);return this.h?nr(t,"tid",this.h):yr(t.b,"tid"),this.f?nr(t,"eid",this.f):yr(t.b,"eid"),s=cc(this.c),s.length&&nr(t,"fw",s.join(",")),t.toString()},n=lc.prototype,n.Ob=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){gc(o).then((function(n){n||(t&&jr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return Mr(t)})).then((function(){if(!a)return Kn(n).then((function(){e(r)}))}))},n.Xb=function(){var t=Zr();return!oi(t)&&!li(t)},n.Tb=function(){return!1},n.Mb=function(t,e,n,r,i,o,a,s){if(!t)return Ve(new A("popup-blocked"));if(a&&!oi())return this.ma().o((function(e){jr(t),i(e)})),r(),qe();this.a||(this.a=hc(dc(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw jr(t),i(e),e}));return r(),e})).then((function(){if(ma(n),!a){var r=pc(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f);xr(r,t)}})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},n.Nb=function(t,e,n,r){this.a||(this.a=hc(dc(this)));var i=this;return this.a.then((function(){ma(e);var o=pc(i.s,i.g,i.b,t,e,Nr(),n,i.c,void 0,i.i,r,i.f);xr(o)})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},n.ma=function(){var t=this;return fc(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new A("network-request-failed")}))},n.$b=function(){return!0},n.Ea=function(t){this.h.push(t)},n.Sa=function(t){et(this.h,(function(e){return e==t}))},n=yc.prototype,n.get=function(t){return qe(this.a.getItem(t)).then((function(t){return t&&ui(t)}))},n.set=function(t,e){return qe(this.a.setItem(t,ai(e)))},n.U=function(t){return qe(this.a.removeItem(t))},n.ca=function(){},n.ia=function(){};var bc,_c=[];function wc(){var t=Wr()?self:null;if(z(_c,(function(n){n.b==t&&(e=n)})),!e){var e=new mc(t);_c.push(e)}return e}function Ic(t,e,n){bt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tc(t){this.a=t}function Ec(t){this.c=t,this.b=!1,this.a=[]}function Sc(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ve(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Re((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:h,onMessage:o},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Oc(t,c),e})).o((function(e){throw Oc(t,c),e}))}function Oc(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),et(t.a,(function(t){return t==e}))}}function Cc(){if(!Pc())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Wr()&&self?(this.v=wc(),Ic(this.v,"keyChanged",(function(e,n){return Mc(t).then((function(e){return 0<e.length&&z(t.a,(function(t){t(e)})),{keyProcessed:Z(e,n.key)}}))})),Ic(this.v,"ping",(function(){return qe(["keyChanged"])}))):mi().then((function(e){(t.h=e)&&(t.g=new Ec(new Tc(e)),Sc(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Z(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function kc(t){return new Re((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}function Ac(t){return new Re((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?e(r):kc(t).then((function(){return Ac(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Nc(t){return t.i||(t.i=Ac(t)),t.i}function xc(t,e){function n(i,o){Nc(t).then(e).then(i).o((function(e){if(!(3<++r))return Nc(t).then((function(e){return e.close(),t.i=void 0,n(i,o)})).o((function(t){o(t)}));o(e)}))}var r=0;return new Re(n)}function Pc(){try{return!!l.indexedDB}catch(Zd){return!1}}function Rc(t){return t.objectStore("firebaseLocalStorage")}function Dc(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function jc(t){return new Re((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Lc(t,e){return t.g&&t.h&&yi()===t.h?Sc(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):qe()}function Mc(t){return Nc(t).then((function(t){var e=Rc(Dc(t,!1));return e.getAll?jc(e.getAll()):new Re((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e["continue"]()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=Pr(t.c,n),t.c=n}return r}))}function Fc(t){function e(){t.f=setTimeout((function(){t.l=Mc(t).then((function(e){0<e.length&&z(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Uc(t),e()}function Uc(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function qc(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=qe().then((function(){if(Pc()){var t=ci(),r="__sak"+t;return bc||(bc=new Cc),n=bc,n.set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){z(e.a,(function(e){e(t)}))})),t}))}function Vc(){this.a={},this.type="inMemory"}function Bc(){if(!Wc()){if("Node"==Hr())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Kc()||e["default"].INTERNAL.node.localStorage,this.type="localStorage"}function Kc(){try{var t=l.localStorage,e=ci();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Wc(){var t="Node"==Hr();if(t=Kc()||t&&e["default"].INTERNAL.node&&e["default"].INTERNAL.node.localStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(n){return!1}}function Hc(){this.type="nullStorage"}function Gc(){if(!$c()){if("Node"==Hr())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=zc()||e["default"].INTERNAL.node.sessionStorage,this.type="sessionStorage"}function zc(){try{var t=l.sessionStorage,e=ci();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function $c(){var t="Node"==Hr();if(t=zc()||t&&e["default"].INTERNAL.node&&e["default"].INTERNAL.node.sessionStorage,!t)return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(n){return!1}}function Qc(){var t={};t.Browser=Jc,t.Node=Zc,t.ReactNative=tl,t.Worker=el,this.a=t[Hr()]}mc.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,(function(e){i.push(qe().then((function(){return e(t.origin,t.data.data)})))})),We(i).then((function(r){var i=[];z(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),z(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Tc.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ec.prototype.close=function(){for(;0<this.a.length;)Oc(this,this.a[0]);this.b=!0},n=Cc.prototype,n.set=function(t,e){var n=this,r=!1;return xc(this,(function(e){return e=Rc(Dc(e,!0)),jc(e.get(t))})).then((function(i){return xc(n,(function(o){if(o=Rc(Dc(o,!0)),i)return i.value=e,jc(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,jc(o.add(a))}))})).then((function(){return n.c[t]=e,Lc(n,t)})).oa((function(){r&&n.b--}))},n.get=function(t){return xc(this,(function(e){return jc(Rc(Dc(e,!1)).get(t))})).then((function(t){return t&&t.value}))},n.U=function(t){var e=this,n=!1;return xc(this,(function(r){return n=!0,e.b++,jc(Rc(Dc(r,!0))["delete"](t))})).then((function(){return delete e.c[t],Lc(e,t)})).oa((function(){n&&e.b--}))},n.ca=function(t){0==this.a.length&&Fc(this),this.a.push(t)},n.ia=function(t){et(this.a,(function(e){return e==t})),0==this.a.length&&Uc(this)},n=qc.prototype,n.get=function(t){return this.b.then((function(e){return e.get(t)}))},n.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},n.U=function(t){return this.b.then((function(e){return e.U(t)}))},n.ca=function(t){this.a.push(t)},n.ia=function(t){et(this.a,(function(e){return e==t}))},n=Vc.prototype,n.get=function(t){return qe(this.a[t])},n.set=function(t,e){return this.a[t]=e,qe()},n.U=function(t){return delete this.a[t],qe()},n.ca=function(){},n.ia=function(){},n=Bc.prototype,n.get=function(t){var e=this;return qe().then((function(){var n=e.a.getItem(t);return ui(n)}))},n.set=function(t,e){var n=this;return qe().then((function(){var r=ai(e);null===r?n.U(t):n.a.setItem(t,r)}))},n.U=function(t){var e=this;return qe().then((function(){e.a.removeItem(t)}))},n.ca=function(t){l.window&&Sn(l.window,"storage",t)},n.ia=function(t){l.window&&An(l.window,"storage",t)},n=Hc.prototype,n.get=function(){return qe(null)},n.set=function(){return qe()},n.U=function(){return qe()},n.ca=function(){},n.ia=function(){},n=Gc.prototype,n.get=function(t){var e=this;return qe().then((function(){var n=e.a.getItem(t);return ui(n)}))},n.set=function(t,e){var n=this;return qe().then((function(){var r=ai(e);null===r?n.U(t):n.a.setItem(t,r)}))},n.U=function(t){var e=this;return qe().then((function(){e.a.removeItem(t)}))},n.ca=function(){},n.ia=function(){};var Yc,Xc,Jc={F:Bc,bb:Gc},Zc={F:Bc,bb:Gc},tl={F:yc,bb:Hc},el={F:Bc,bb:Hc},nl={rd:"local",NONE:"none",td:"session"};function rl(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in nl)if(nl[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(Hr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Pc()&&"none"!==t)throw n;break;default:if(!ei()&&"none"!==t)throw n}}function il(){var t=!(li(Zr())||!Kr()),e=oi(),n=ei();this.m=t,this.h=e,this.l=n,this.a={},Yc||(Yc=new Qc),t=Yc;try{this.g=!Ar()&&gi()||!l.indexedDB?new t.a.F:new qc(Wr()?new Vc:new t.a.F)}catch(r){this.g=new Vc,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new Vc}this.v=new Vc,this.f=E(this.Yb,this),this.b={}}function ol(){return Xc||(Xc=new il),Xc}function al(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function sl(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ul(t,e,n){var r=sl(e,n),i=al(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=ui(l.localStorage.getItem(r))}catch(s){}if(a&&!o)return l.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&l.localStorage.removeItem(r)}))}function cl(t,e,n){return n=sl(e,n),"local"==e.F&&(t.b[n]=null),al(t,e.F).U(n)}function ll(t){hl(t),t.c=setInterval((function(){for(var e in t.a){var n=l.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new pn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}function hl(t){t.c&&(clearInterval(t.c),t.c=null)}function fl(t){this.a=t,this.b=ol()}n=il.prototype,n.get=function(t,e){return al(this,t.F).get(sl(t,e))},n.set=function(t,e,n){var r=sl(t,n),i=this,o=al(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},n.addListener=function(t,e,n){t=sl(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),bt(this.a)&&(al(this,"local").ca(this.f),this.h||(Ar()||!gi())&&l.indexedDB||!this.l||ll(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},n.removeListener=function(t,e,n){t=sl(t,e),this.a[t]&&(et(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),bt(this.a)&&(al(this,"local").ia(this.f),hl(this))},n.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?al(this,"local").ia(this.f):hl(this),this.m)if(n=l.localStorage.getItem(e),r=t.a.newValue,r!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.mb(e))},re&&ge&&10==ge&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,E(this.mb,this))},n.mb=function(t){this.a[t]&&z(this.a[t],(function(t){t()}))};var dl,pl={name:"authEvent",F:"local"};function vl(t){return t.b.get(pl,t.a).then((function(t){return _a(t)}))}function gl(){this.a=ol()}function yl(){this.b=-1}function ml(t,e){this.b=bl,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===dl&&(dl=l.Int32Array?new Int32Array(Ol):Ol),this.reset()}C(ml,yl);for(var bl=64,_l=bl-1,wl=[],Il=0;Il<_l;Il++)wl[Il]=0;var Tl=nt(128,wl);function El(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=c&l^~c&h,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,a=a+(0|dl[e])|0,a=o+(a+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Sl(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(El(t),i=0);else{if(!g(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(El(t),i=0)}}t.c=i,t.g+=n}ml.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):rt(this.h)};var Ol=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Cl(){ml.call(this,8,kl)}C(Cl,ml);var kl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Al(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new gl,this.g=new fl(this.h),this.f=null,this.b=[],this.a=this.c=null}function Nl(t){return new A("invalid-cordova-configuration",t)}function xl(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}function Pl(t){var e=new Cl;Sl(e,t),t=[];var n=8*e.g;56>e.c?Sl(e,Tl,56-e.c):Sl(e,Tl,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(El(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return yo(t)}function Rl(t,e,n,r,i){var o=xl(),a=new ba(e,r,null,o,new A("no-auth-event"),null,i),s=ti("BuildInfo.packageName",l);if("string"!==typeof s)throw new A("invalid-cordova-configuration");var u=ti("BuildInfo.displayName",l),c={};if(Zr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!Zr().toLowerCase().match(/android/))return Ve(new A("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=Pl(o),c.sessionId=o;var h=pc(t.v,t.i,t.l,e,n,null,r,t.m,c,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(pl,a.w(),e)})).then((function(){var e=ti("cordova.plugins.browsertab.isAvailable",l);if("function"!==typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if(n=ti("cordova.plugins.browsertab.openUrl",l),"function"!==typeof n)throw new A("invalid-cordova-configuration");n(h)}else{if(n=ti("cordova.InAppBrowser.open",l),"function"!==typeof n)throw new A("invalid-cordova-configuration");e=Zr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}function Dl(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function jl(t){return t.f||(t.f=t.ma().then((function(){return new Re((function(e){function n(r){return e(r),t.Sa(n),!1}t.Ea(n),Ml(t)}))}))),t.f}function Ll(t){var e=null;return vl(t.g).then((function(n){return e=n,n=t.g,cl(n.b,pl,n.a)})).then((function(){return e}))}function Ml(t){function e(e){r=!0,i&&i.cancel(),Ll(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;i=Fo(e.url),-1!=i.indexOf("/__/auth/callback")&&(o=ir(i),o=ui(rr(o,"firebaseError")||null),o=(o="object"===typeof o?N(o):null)?new ba(r.c,r.b,null,null,o,null,r.T()):new ba(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Dl(t,i)}))}var n=new ba("unknown",null,null,null,new A("no-auth-event")),r=!1,i=Kn(500).then((function(){return Ll(t).then((function(){r||Dl(t,n)}))})),o=l.handleOpenURL;l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(ti("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},Ta||(Ta=new wa),Ea(e)}function Fl(t){this.a=t,this.b=ol()}n=Al.prototype,n.ma=function(){return this.Ia?this.Ia:this.Ia=Vr().then((function(){if("function"!==typeof ti("universalLinks.subscribe",l))throw Nl("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof ti("BuildInfo.packageName",l))throw Nl("cordova-plugin-buildinfo is not installed");if("function"!==typeof ti("cordova.plugins.browsertab.openUrl",l))throw Nl("cordova-plugin-browsertab is not installed");if("function"!==typeof ti("cordova.InAppBrowser.open",l))throw Nl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},n.Ob=function(t,e){return e(new A("operation-not-supported-in-this-environment")),qe()},n.Mb=function(){return Ve(new A("operation-not-supported-in-this-environment"))},n.$b=function(){return!1},n.Xb=function(){return!0},n.Tb=function(){return!0},n.Nb=function(t,e,n,r){if(this.c)return Ve(new A("redirect-operation-pending"));var i=this,o=l.document,a=null,s=null,u=null,c=null;return this.c=qe().then((function(){return ma(e),jl(i)})).then((function(){return Rl(i,t,e,n,r)})).then((function(){return new Re((function(t,e){s=function(){var e=ti("cordova.plugins.browsertab.close",l);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),u=function(){a||(a=Kn(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},c=function(){di()&&u()},o.addEventListener("resume",u,!1),Zr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(t){return Ll(i).then((function(){throw t}))}))})).oa((function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Sa(s),i.c=null}))},n.Ea=function(t){this.b.push(t),jl(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new ba("unknown",null,null,null,new A("no-auth-event")),t(e))}))},n.Sa=function(t){et(this.b,(function(e){return e==t}))};var Ul={name:"pendingRedirect",F:"session"};function ql(t){return t.b.set(Ul,"pending",t.a)}function Vl(t){return cl(t.b,Ul,t.a)}function Bl(t){return t.b.get(Ul,t.a).then((function(t){return"pending"==t}))}function Kl(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=E(this.s,this),this.b=new ih,this.C=new fh,this.g=new Fl(nh(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Wl(this.D,this.v,this.m,x,this.J)}function Wl(t,n,r,i,o){var a=e["default"].SDK_VERSION||null;return Br()?new Al(t,n,r,a,i,o):new lc(t,n,r,a,i,o)}function Hl(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Gl(t){t.a.Xb()&&Hl(t).o((function(e){var n=new ba("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Jl(e)&&t.s(n)})),t.a.Tb()||oh(t.b)}function zl(t,e){Z(t.h,e)||t.h.push(e),t.f||Bl(t.g).then((function(e){e?Vl(t.g).then((function(){Hl(t).o((function(e){var n=new ba("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Jl(e)&&t.s(n)}))})):Gl(t)})).o((function(){Gl(t)}))}function $l(t,e){et(t.h,(function(t){return t==e}))}Kl.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Wl(this.D,this.v,this.m,null,this.J),this.i={}},Kl.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return oh(this.b),e};var Ql=new fi(2e3,1e4),Yl=new fi(3e4,6e4);function Xl(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Jl(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Zl(t,e,n,r,i){var o;return ql(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Jl(e))throw new A("operation-not-supported-in-this-environment");return o=e,Vl(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Re((function(){})):Vl(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function th(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Ql.get())}Kl.prototype.qa=function(){return this.b.qa()};var eh={};function nh(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function rh(t,e,n,r){var i=nh(e,n,r);return eh[i]||(eh[i]=new Kl(t,e,n,r)),eh[i]}function ih(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function oh(t){t.g||(t.g=!0,lh(t,!1,null,null))}function ah(t){t.g&&!t.i&&lh(t,!1,null,null)}function sh(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){lh(t,s,e,null)})).o((function(e){lh(t,s,null,e)}))}function uh(t,e){if(t.b=function(){return Ve(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}function ch(t,e){if(t.b=function(){return qe(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function lh(t,e,n,r){e?r?uh(t,r):ch(t,n):ch(t,{user:null}),t.f=[],t.c=[]}function hh(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=Kn(Yl.get()).then((function(){t.b||(t.g=!0,lh(t,!0,null,e))}))}function fh(){}function dh(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}function ph(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function vh(t,e){this.a=e,Ti(this,"verificationId",t)}function gh(t,e,n,r){return new va(t).fb(e,n).then((function(t){return new vh(t,r)}))}function yh(t){var e=Eo(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ei(this,{token:t,expirationTime:vi(1e3*e.exp),authTime:vi(1e3*e.auth_time),issuedAtTime:vi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function mh(t,e,n){var r=e&&e[_h];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=_t(e),this.g=n,this.c=new Uo(null,r),this.b=[];var i=this;z(e[bh]||[],(function(t){(t=Ni(t))&&i.b.push(t)})),Ti(this,"auth",this.a),Ti(this,"session",this.c),Ti(this,"hints",this.b)}ih.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ih.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(lh(this,!0,null,t.a),qe()):e.Fa(n,r)?sh(this,t,e):Ve(new A("invalid-auth-event")):(lh(this,!1,null,null),qe())}else Ve(new A("invalid-auth-event"))},ih.prototype.qa=function(){var t=this;return new Re((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),hh(t))}))},fh.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),qe()):e.Fa(n,r)?dh(t,e):Ve(new A("invalid-auth-event"))}else Ve(new A("invalid-auth-event"))},vh.prototype.confirm=function(t){return t=ga(this.verificationId,t),this.a(t)};var bh="mfaInfo",_h="mfaPendingCredential";function wh(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new mh(t,e,n),Ti(this,"resolver",this.b)}function Ih(t,e,n){if(t&&m(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new wh(e,t.serverResponse,n,t.message)}catch(r){}return null}function Th(){}function Eh(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),It(n,{phoneVerificationInfo:pa(t.a)}),Qu(e,Eu,n)}))}function Sh(t,e,n){return n.Ha().then((function(n){return n={mfaPendingCredential:n},It(n,{phoneVerificationInfo:pa(t.a)}),Qu(e,Su,n)}))}function Oh(t){Ti(this,"factorId",t.fa),this.a=t}function Ch(t){if(Oh.call(this,t),this.a.fa!=va.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function kh(t,e){for(var n in dn.call(this,t),e)this[n]=e[n]}function Ah(t,e){this.a=t,this.b=[],this.c=E(this.yc,this),Sn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Ri]=t.uid),t.displayName&&(r[xi]=t.displayName),t.enrollmentTime&&(r[Pi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Di]=t.phoneNumber);try{e=new ji(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),xh(this,n)}function Nh(t){var e=[];return z(t.mfaInfo||[],(function(t){(t=Ni(t))&&e.push(t)})),e}function xh(t,e){t.b=e,Ti(t,"enrolledFactors",e)}function Ph(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Rh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function Dh(t,e){t.stop(),t.b=Kn(Rh(t,e)).then((function(){return pi()})).then((function(){return t.h()})).then((function(){Dh(t,!0)})).o((function(e){t.i(e)&&Dh(t,!1)}))}function jh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function Lh(t,e){"undefined"===typeof e&&(t.b?(e=t.b,e=e.a-e.g):e=0),t.c=Date.now()+1e3*e}function Mh(t,e){t.b=To(e[Ls]||""),t.a=e.refreshToken,e=e.expiresIn,Lh(t,"undefined"!==typeof e?Number(e):void 0)}function Fh(t,e){t.b=e.b,t.a=e.a,t.c=e.c}function Uh(t,e){return Qs(t.f,e).then((function(e){return t.b=To(e.access_token),t.a=e.refresh_token,Lh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function qh(t,e){this.a=t||null,this.b=e||null,Ei(this,{lastSignInTime:vi(e||null),creationTime:vi(t||null)})}function Vh(t){return new qh(t.a,t.b)}function Bh(t,e,n,r,i,o){Ei(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Kh(t,n,r){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=e["default"].SDK_VERSION?Jr(e["default"].SDK_VERSION):null;this.a=new Ds(this.l,j(x),i),t.emulatorConfig&&Bs(this.a,t.emulatorConfig),this.b=new jh(this.a),Jh(this,n[Ls]),Mh(this.b,n),Ti(this,"refreshToken",this.b.a),nf(this,r||{}),Fn.call(this),this.R=!1,this.s&&ni()&&(this.i=rh(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=Qh(this),this.aa=E(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){Bs(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Gh(o,t.f)},this.ba=null,this.O=new Ah(this,r),Ti(this,"multiFactor",this.O)}function Wh(t,e){t.ja&&An(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&Sn(e,"languageCodeChanged",t.Oa)}function Hh(t,e){t.X&&An(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&Sn(e,"emulatorConfigChanged",t.Aa)}function Gh(t,n){t.$=n,Ws(t.a,e["default"].SDK_VERSION?Jr(e["default"].SDK_VERSION,t.$):null)}function zh(t,e){t.ba&&An(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&Sn(e,"frameworkChanged",t.Ba)}function $h(t){try{return e["default"].app(t.m).auth()}catch(n){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Qh(t){return new Ph((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}function Yh(t){t.D||t.u.b||(t.u.start(),An(t,"tokenChanged",t.aa),Sn(t,"tokenChanged",t.aa))}function Xh(t){An(t,"tokenChanged",t.aa),t.u.stop()}function Jh(t,e){t.za=e,Ti(t,"_lat",e)}function Zh(t,e){et(t.S,(function(t){return t==e}))}function tf(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return We(e).then((function(){return t}))}function ef(t){t.i&&!t.R&&(t.R=!0,zl(t.i,t))}function nf(t,e){Ei(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new qh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function rf(){}function of(t){return qe().then((function(){if(t.D)throw new A("app-deleted")}))}function af(t){return Y(t.providerData,(function(t){return t.providerId}))}function sf(t,e){e&&(uf(t,e.providerId),t.providerData.push(e))}function uf(t,e){et(t.providerData,(function(t){return t.providerId==e}))}function cf(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ti(t,e,n)}function lf(t,e){t!=e&&(Ei(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Ti(t,"metadata",Vh(e.metadata)):Ti(t,"metadata",new qh),z(e.providerData,(function(e){sf(t,e)})),Fh(t.b,e.b),Ti(t,"refreshToken",t.b.a),xh(t.O,e.O.b))}function hf(t){return t.I().then((function(e){var n=t.isAnonymous;return df(t,e).then((function(){return n||cf(t,"isAnonymous",!1),e}))}))}function ff(t,e){e[Ls]&&t.za!=e[Ls]&&(Mh(t.b,e),t.dispatchEvent(new kh("tokenChanged")),Jh(t,e[Ls]),cf(t,"refreshToken",t.b.a))}function df(t,e){return Qu(t.a,Ou,{idToken:e}).then(E(t.Kc,t))}function pf(t){return(t=t.providerUserInfo)&&t.length?Y(t,(function(t){return new Bh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}function vf(t,e){return hf(t).then((function(){if(Z(af(t),e))return tf(t).then((function(){throw new A("provider-already-linked")}))}))}function gf(t,e,n){var r=ya(e);return e=Ao(e),Si({user:t,credential:r,additionalUserInfo:e,operationType:n})}function yf(t,e){return ff(t,e),t.reload().then((function(){return t}))}function mf(t,n,r,i,o){if(!ni())return Ve(new A("operation-not-supported-in-this-environment"));if(t.h&&!o)return Ve(t.h);var a=ko(r.providerId),s=ci(t.uid+":::"),u=null;(!oi()||Kr())&&t.s&&r.isOAuthProvider&&(u=pc(t.s,t.l,t.m,n,r,null,s,e["default"].SDK_VERSION||null,null,null,t.tenantId));var c=Lr(u,a&&a.ua,a&&a.ta);return i=i().then((function(){if(_f(t),!o)return t.I().then((function(){}))})).then((function(){return Xl(t.i,c,n,r,s,!!u,t.tenantId)})).then((function(){return new Re((function(e,r){t.na(n,null,new A("cancelled-popup-request"),t.g||null),t.f=e,t.C=r,t.g=s,t.c=th(t.i,t,n,c,s)}))})).then((function(t){return c&&jr(c),t?Si(t):null})).o((function(t){throw c&&jr(c),t})),wf(t,i,o)}function bf(t,e,n,r,i){if(!ni())return Ve(new A("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ve(t.h);var o=null,a=ci(t.uid+":::");return r=r().then((function(){if(_f(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,tf(t)})).then((function(e){return t.ha&&(e=t.ha,e=e.b.set(Cf,t.w(),e.a)),e})).then((function(){return Zl(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return kf(t.ha);throw o})).then((function(){if(o)throw o})),wf(t,r,i)}function _f(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new A("internal-error");throw new A("auth-domain-config-required")}}function wf(t,e,n){var r=If(t,e,n);return t.J.push(r),r.oa((function(){tt(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Ih(e.w(),$h(t),E(t.jc,t))),n||e}))}function If(t,e,n){return t.h&&!n?(e.cancel(),Ve(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new kh("userInvalidated")),t.h=e),e}))}function Tf(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ls]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Kh(e,n,t);return t.providerData&&z(t.providerData,(function(t){t&&sf(i,Si(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Ef(t,e,n,r){var i=new Kh(t,e);return n&&(i.ha=n),r&&Gh(i,r),i.reload().then((function(){return i}))}function Sf(t,e,n,r){var i=t.b,o={};return o[Ls]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Kh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Gh(e,r),lf(e,t),e}function Of(t){this.a=t,this.b=ol()}mh.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=_t(e.f);return delete n[bh],delete n[_h],It(n,t),e.g(n)}))},C(wh,A),Th.prototype.sb=function(t,e,n){return e.type==qo?Eh(this,t,e,n):Sh(this,t,e)},C(Oh,Th),C(Ch,Oh),C(kh,dn),n=Ah.prototype,n.yc=function(t){xh(this,Nh(t.hd))},n.Rb=function(){return this.a.I().then((function(t){return new Uo(t,null)}))},n.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return ff(n.a,t),n.a.reload()}))},n.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Qu(r,$u,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=Q(e.b,(function(t){return t.uid!=n}));return xh(e,r),ff(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},n.w=function(){return{multiFactor:{enrolledFactors:Y(this.b,(function(t){return t.w()}))}}},Ph.prototype.start=function(){this.a=this.c,Dh(this,!0)},Ph.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},jh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},jh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ve(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Uh(this,{grant_type:"refresh_token",refresh_token:this.a}):qe(null):qe({accessToken:this.b.toString(),refreshToken:this.a})},qh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(Kh,Fn),Kh.prototype.wa=function(t){this.ya=t,Vs(this.a,t)},Kh.prototype.la=function(){return this.ya},Kh.prototype.Ga=function(){return rt(this.$)},Kh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Ti(Kh.prototype,"providerId","firebase"),n=Kh.prototype,n.reload=function(){var t=this;return wf(this,of(this).then((function(){return hf(t).then((function(){return tf(t)})).then(rf)})))},n.oc=function(t){return this.I(t).then((function(t){return new yh(t)}))},n.I=function(t){var e=this;return wf(this,of(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.za&&(Jh(e,t.accessToken),e.dispatchEvent(new kh("tokenChanged"))),cf(e,"refreshToken",t.refreshToken),t.accessToken})))},n.Kc=function(t){if(t=t.users,!t||!t.length)throw new A("internal-error");t=t[0],nf(this,{uid:t.localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=pf(t),n=0;n<e.length;n++)sf(this,e[n]);cf(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new kh("userReloaded",{hd:t}))},n.Lc=function(t){return wi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},n.tb=function(t){var e=this,n=null;return wf(this,t.c(this.a,this.uid).then((function(t){return ff(e,t),n=gf(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},n.Cc=function(t){return wi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},n.qb=function(t){var e=this,n=null;return wf(this,vf(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=gf(e,t,"link"),yf(e,t)})).then((function(){return n})))},n.Dc=function(t,e){var n=this;return wf(this,vf(this,"phone").then((function(){return gh($h(n),t,e,E(n.qb,n))})))},n.Mc=function(t,e){var n=this;return wf(this,qe().then((function(){return gh($h(n),t,e,E(n.tb,n))})),!0)},n.Bb=function(t){var e=this;return wf(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return ff(e,t),e.reload()})))},n.ed=function(t){var e=this;return wf(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return ff(e,t),e.reload()})))},n.Cb=function(t){var e=this;return wf(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return ff(e,t),e.reload()})))},n.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return of(this);var e=this;return wf(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return ff(e,t),cf(e,"displayName",t.displayName||null),cf(e,"photoURL",t.photoUrl||null),z(e.providerData,(function(t){"password"===t.providerId&&(Ti(t,"displayName",e.displayName),Ti(t,"photoURL",e.photoURL))})),tf(e)})).then(rf))},n.cd=function(t){var e=this;return wf(this,hf(this).then((function(n){return Z(af(e),t)?uu(e.a,n,[t]).then((function(t){var n={};return z(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),z(af(e),(function(t){n[t]||uf(e,t)})),n[va.PROVIDER_ID]||Ti(e,"phoneNumber",null),tf(e)})):tf(e).then((function(){throw new A("no-such-provider")}))})))},n.delete=function(){var t=this;return wf(this,this.I().then((function(e){return Qu(t.a,_u,{idToken:e})})).then((function(){t.dispatchEvent(new kh("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");Wh(t,null),Hh(t,null),zh(t,null),t.J=[],t.D=!0,Xh(t),Ti(t,"refreshToken",null),t.i&&$l(t.i,t)}))},n.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},n.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?E(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?E(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?E(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?E(this.Lb,this):null},n.Ec=function(t){var e=this;return mf(this,"linkViaPopup",t,(function(){return vf(e,t.providerId).then((function(){return tf(e)}))}),!1)},n.Nc=function(t){return mf(this,"reauthViaPopup",t,(function(){return qe()}),!0)},n.Fc=function(t){var e=this;return bf(this,"linkViaRedirect",t,(function(){return vf(e,t.providerId)}),!1)},n.Oc=function(t){return bf(this,"reauthViaRedirect",t,(function(){return qe()}),!0)},n.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return du(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=gf(i,t,"link"),yf(i,t)})).then((function(){return o})),wf(this,n)},n.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null,a=qe().then((function(){return Ko(pu(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=gf(i,t,"reauthenticate"),ff(i,t),i.h=null,i.reload()})).then((function(){return o}));return wf(this,a,!0)},n.ub=function(t){var e=this,n=null;return wf(this,this.I().then((function(e){return n=e,"undefined"===typeof t||bt(t)?{}:go(new oo(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},n.Eb=function(t,e){var n=this,r=null;return wf(this,this.I().then((function(t){return r=t,"undefined"===typeof e||bt(e)?{}:go(new oo(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},n.jc=function(t){var e=null,n=this;return t=Ko(qe(t),n.uid).then((function(t){return e=gf(n,t,"reauthenticate"),ff(n,t),n.h=null,n.reload()})).then((function(){return e})),wf(this,t,!0)},n.toJSON=function(){return this.w()},n.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&It(t,this.metadata.w()),z(this.providerData,(function(e){t.providerData.push(Oi(e))})),It(t,this.O.w()),t};var Cf={name:"redirectUser",F:"session"};function kf(t){return cl(t.b,Cf,t.a)}function Af(t,e){return t.b.get(Cf,t.a).then((function(t){return t&&e&&(t.authDomain=e),Tf(t||{})}))}function Nf(t){this.a=t,this.b=ol(),this.c=null,this.f=Pf(this),this.b.addListener(Df("local"),this.a,E(this.g,this))}function xf(t,e){var n,r=[];for(n in nl)nl[n]!==e&&r.push(cl(t.b,Df(nl[n]),t.a));return r.push(cl(t.b,Rf,t.a)),Ke(r)}function Pf(t){var e=Df("local"),n=Df("session"),r=Df("none");return ul(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Rf,t.a).then((function(t){return t?Df(t):e}))}))}))})).then((function(e){return t.c=e,xf(t,e.F)})).o((function(){t.c||(t.c=e)}))}Nf.prototype.g=function(){var t=this,e=Df("local");Uf(this,(function(){return qe().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return xf(t,"local").then((function(){t.c=e}))}))}))};var Rf={name:"persistence",F:"session"};function Df(t){return{name:"authUser",F:t}}function jf(t){return Uf(t,(function(){return t.b.set(Rf,t.c.F,t.a)}))}function Lf(t,e){return Uf(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function Mf(t){return Uf(t,(function(){return cl(t.b,t.c,t.a)}))}function Ff(t,e,n){return Uf(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Tf(t||{})}))}))}function Uf(t,e){return t.f=t.f.then(e,e),t.f}function qf(t){if(this.l=!1,Ti(this,"settings",new ph),Ti(this,"app",t),!ed(this).options||!ed(this).options.apiKey)throw new A("invalid-api-key");t=e["default"].SDK_VERSION?Jr(e["default"].SDK_VERSION):null,this.a=new Ds(ed(this).options&&ed(this).options.apiKey,j(x),t),this.R=[],this.s=[],this.O=[],this.hb=e["default"].INTERNAL.createSubscribe(E(this.zc,this)),this.X=void 0,this.bc=e["default"].INTERNAL.createSubscribe(E(this.Ac,this)),Yf(this,null),this.i=new Nf(ed(this).options.apiKey+":"+ed(this).name),this.D=new Of(ed(this).options.apiKey+":"+ed(this).name),this.$=ad(this,Jf(this)),this.h=ad(this,Zf(this)),this.ba=!1,this.ja=E(this.Zc,this),this.Ba=E(this.da,this),this.ya=E(this.mc,this),this.za=E(this.wc,this),this.Aa=E(this.xc,this),this.b=null,zf(this),this.INTERNAL={},this.INTERNAL["delete"]=E(this.delete,this),this.INTERNAL.logFramework=E(this.Gc,this),this.u=0,Fn.call(this),Hf(this),this.J=[],this.P=null}function Vf(t){dn.call(this,"languageCodeChanged"),this.h=t}function Bf(t){dn.call(this,"emulatorConfigChanged"),this.c=t}function Kf(t){dn.call(this,"frameworkChanged"),this.f=t}function Wf(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!t&&qr().then((function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}))}function Hf(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=ir(this.P.url);t=Si({protocol:t.c,host:t.a,port:t.g,options:Si({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}function Gf(t){return t.Oa||Ve(new A("auth-domain-config-required"))}function zf(t){var e=ed(t).options.authDomain,n=ed(t).options.apiKey;e&&ni()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=rh(e,n,ed(t).name,t.P),zl(t.b,t),nd(t)&&ef(nd(t)),t.m){ef(t.m);var r=t.m;r.wa(t.la()),Wh(r,t),r=t.m,Gh(r,t.J),zh(r,t),r=t.m,Bs(r.a,t.P),Hh(r,t),t.m=null}return t.b}})))}function $f(t){if(!ni())return Ve(new A("operation-not-supported-in-this-environment"));var e=Gf(t).then((function(){return t.b.qa()})).then((function(t){return t?Si(t):null}));return ad(t,e)}function Qf(t,e){var n={};return n.apiKey=ed(t).options.apiKey,n.authDomain=ed(t).options.authDomain,n.appName=ed(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return Ef(n,e,t.D,t.Ga())})).then((function(e){return nd(t)&&e.uid==nd(t).uid?(lf(nd(t),e),t.da(e)):(Yf(t,e),ef(e),t.da(e))})).then((function(){id(t)}))}function Yf(t,e){nd(t)&&(Zh(nd(t),t.Ba),An(nd(t),"tokenChanged",t.ya),An(nd(t),"userDeleted",t.za),An(nd(t),"userInvalidated",t.Aa),Xh(nd(t))),e&&(e.S.push(t.Ba),Sn(e,"tokenChanged",t.ya),Sn(e,"userDeleted",t.za),Sn(e,"userInvalidated",t.Aa),0<t.u&&Yh(e)),Ti(t,"currentUser",e),e&&(e.wa(t.la()),Wh(e,t),Gh(e,t.J),zh(e,t),Bs(e.a,t.P),Hh(e,t))}function Xf(t){var e=Af(t.D,ed(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),kf(t.D)}));return ad(t,e)}function Jf(t){var e=ed(t).options.authDomain,n=Xf(t).then((function(){return Ff(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Lf(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Mf(t.i)}))):null})).then((function(e){Yf(t,e||null)}));return ad(t,n)}function Zf(t){return t.$.then((function(){return $f(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Df("local"),e.a,t.ja)}}))}function td(t,e){var n=null,r=null;return ad(t,e.then((function(e){return n=ya(e),r=Ao(e),Qf(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Ih(e.w(),t,E(t.kc,t))),n||e})).then((function(){return Si({user:nd(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ed(t){return t.app}function nd(t){return t.currentUser}function rd(t){return nd(t)&&nd(t)._lat||null}function id(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](rd(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](rd(t))}}function od(t,e){t.O.push(e),ad(t,t.h.then((function(){!t.l&&Z(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(rd(t)))})))}function ad(t,e){return t.R.push(e),e.oa((function(){tt(t.R,e)})),e}function sd(){}function ud(){this.a={},this.b=1e12}Nf.prototype.xb=function(t){var e=null,n=this;return rl(t),Uf(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,xf(n,t)})).then((function(){if(n.c=Df(t),e)return n.b.set(n.c,e,n.a)})):qe()}))},C(qf,Fn),C(Vf,dn),C(Bf,dn),C(Kf,dn),n=qf.prototype,n.xb=function(t){return t=this.i.xb(t),ad(this,t)},n.wa=function(t){this.aa===t||this.l||(this.aa=t,Vs(this.a,this.aa),this.dispatchEvent(new Vf(this.la())))},n.la=function(){return this.aa},n.fd=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},n.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,Wf(e),this.P={url:t,ec:e},this.settings.ib=!0,Bs(this.a,this.P),this.dispatchEvent(new Bf(this.P))}},n.Gc=function(t){this.J.push(t),Ws(this.a,e["default"].SDK_VERSION?Jr(e["default"].SDK_VERSION,this.J):null),this.dispatchEvent(new Kf(this.J))},n.Ga=function(){return rt(this.J)},n.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},n.T=function(){return this.S},n.toJSON=function(){return{apiKey:ed(this).options.apiKey,authDomain:ed(this).options.authDomain,appName:ed(this).name,currentUser:nd(this)&&nd(this).w()}},n.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},n.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?E(this.ic,this):null},n.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return td(i,fu(i.a,o))}))},n.Xc=function(t){if(!ni())return Ve(new A("operation-not-supported-in-this-environment"));var n=this,r=ko(t.providerId),i=ci(),o=null;(!oi()||Kr())&&ed(this).options.authDomain&&t.isOAuthProvider&&(o=pc(ed(this).options.authDomain,ed(this).options.apiKey,ed(this).name,"signInViaPopup",t,null,i,e["default"].SDK_VERSION||null,null,null,this.T(),this.P));var a=Lr(o,r&&r.ua,r&&r.ta);return r=Gf(this).then((function(e){return Xl(e,a,"signInViaPopup",t,i,!!o,n.T())})).then((function(){return new Re((function(t,e){n.na("signInViaPopup",null,new A("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=i,n.c=th(n.b,n,"signInViaPopup",a,i)}))})).then((function(t){return a&&jr(a),t?Si(t):null})).o((function(t){throw a&&jr(a),t})),ad(this,r)},n.Yc=function(t){if(!ni())return Ve(new A("operation-not-supported-in-this-environment"));var e=this,n=Gf(this).then((function(){return jf(e.i)})).then((function(){return Zl(e.b,"signInViaRedirect",t,void 0,e.T())}));return ad(this,n)},n.qa=function(){var t=this;return $f(this).then((function(e){return t.b&&ah(t.b.b),e})).o((function(e){throw t.b&&ah(t.b.b),e}))},n.dd=function(t){if(!t)return Ve(new A("null-user"));if(this.S!=t.tenantId)return Ve(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=ed(this).options.apiKey,n.authDomain=ed(this).options.authDomain,n.appName=ed(this).name;var r=Sf(t,n,e.D,e.Ga());return ad(this,this.h.then((function(){if(ed(e).options.apiKey!=t.l)return r.reload()})).then((function(){return nd(e)&&t.uid==nd(e).uid?(lf(nd(e),t),e.da(t)):(Yf(e,r),ef(r),e.da(r))})).then((function(){id(e)})))},n.Ab=function(){var t=this,e=this.h.then((function(){return t.b&&ah(t.b.b),nd(t)?(Yf(t,null),Mf(t.i).then((function(){id(t)}))):qe()}));return ad(this,e)},n.Zc=function(){var t=this;return Ff(this.i,ed(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=nd(t)&&e){n=nd(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return lf(nd(t),e),nd(t).I();(nd(t)||e)&&(Yf(t,e),e&&(ef(e),e.ha=t.D),t.b&&zl(t.b,t),id(t))}}))},n.da=function(t){return Lf(this.i,t)},n.mc=function(){id(this),this.da(nd(this))},n.wc=function(){this.Ab()},n.xc=function(){this.Ab()},n.kc=function(t){var e=this;return this.h.then((function(){return td(e,qe(t))}))},n.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(nd(e))}))},n.Ac=function(t){var e=this;od(this,(function(){t.next(nd(e))}))},n.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(nd(r)):"function"===typeof t.next&&t.next(nd(r))})),this.hb(t,e,n)},n.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"===typeof t?t(nd(r)):"function"===typeof t.next&&t.next(nd(r))})),this.bc(t,e,n)},n.nc=function(t){var e=this,n=this.h.then((function(){return nd(e)?nd(e).I(t).then((function(t){return{accessToken:t}})):null}));return ad(this,n)},n.Tc=function(t){var e=this;return this.h.then((function(){return td(e,Qu(e.a,Ku,{token:t}))})).then((function(t){var n=t.user;return cf(n,"isAnonymous",!1),e.da(n),t}))},n.Uc=function(t,e){var n=this;return this.h.then((function(){return td(n,Qu(n.a,Wu,{email:t,password:e}))}))},n.dc=function(t,e){var n=this;return this.h.then((function(){return td(n,Qu(n.a,mu,{email:t,password:e}))}))},n.$a=function(t){var e=this;return this.h.then((function(){return td(e,t.ka(e.a))}))},n.Sc=function(t){return wi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},n.zb=function(){var t=this;return this.h.then((function(){var e=nd(t);if(e&&e.isAnonymous){var n=Si({providerId:null,isNewUser:!1});return Si({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return td(t,t.a.zb()).then((function(e){var n=e.user;return cf(n,"isAnonymous",!0),t.da(n),e}))}))},n.getUid=function(){return nd(this)&&nd(this).uid||null},n.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&nd(this)&&Yh(nd(this))},n.Pc=function(t){var e=this;z(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&nd(this)&&Xh(nd(this)),this.removeAuthTokenListener(t)},n.addAuthTokenListener=function(t){var e=this;this.s.push(t),ad(this,this.h.then((function(){e.l||Z(e.s,t)&&t(rd(e))})))},n.removeAuthTokenListener=function(t){et(this.s,(function(e){return e==t}))},n.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i,t.b.removeListener(Df("local"),t.a,this.ja)),this.b&&($l(this.b,this),ah(this.b.b)),Promise.resolve()},n.hc=function(t){return ad(this,Zs(this.a,t))},n.Bc=function(t){return!!ha(t)},n.wb=function(t,e){var n=this;return ad(this,qe().then((function(){var t=new oo(e);if(!t.c)throw new A("argument-error",uo+" must be true when sending sign in link to email");return go(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},n.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},n.nb=function(t,e){return ad(this,this.a.nb(t,e).then((function(){})))},n.Ra=function(t){return ad(this,this.a.Ra(t).then((function(t){return new Li(t)})))},n.jb=function(t){return ad(this,this.a.jb(t).then((function(){})))},n.vb=function(t,e){var n=this;return ad(this,qe().then((function(){return"undefined"===typeof e||bt(e)?{}:go(new oo(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},n.Wc=function(t,e){return ad(this,gh(this,t,e,E(this.$a,this)))},n.Vc=function(t,e){var n=this;return ad(this,qe().then((function(){var r=e||Nr(),i=la(t,r);if(r=ha(r),!r)throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.$a(i)})))},sd.prototype.render=function(){},sd.prototype.reset=function(){},sd.prototype.getResponse=function(){},sd.prototype.execute=function(){};var cd=null;function ld(t,e){return(e=hd(e))&&t.a[e]||null}function hd(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function fd(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=me(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Sn(this.f,"click",this.i)}function dd(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function pd(){}function vd(){}ud.prototype.render=function(t,e){return this.a[this.b.toString()]=new fd(t,e),this.b++},ud.prototype.reset=function(t){var e=ld(this,t);t=hd(t),e&&t&&(e.delete(),delete this.a[t])},ud.prototype.getResponse=function(t){return(t=ld(this,t))?t.getResponse():null},ud.prototype.execute=function(t){(t=ld(this,t))&&t.execute()},fd.prototype.getResponse=function(){return dd(this),this.b},fd.prototype.execute=function(){dd(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=zr();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},fd.prototype.delete=function(){dd(this),this.g=!0,clearTimeout(this.a),this.a=null,An(this.f,"click",this.i)},Ti(pd,"FACTOR_ID","phone"),vd.prototype.g=function(){return cd||(cd=new ud),qe(cd)},vd.prototype.c=function(){};var gd=null;function yd(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var md=new Et(kt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),bd=new fi(3e4,6e4);yd.prototype.g=function(t){var e=this;return new Re((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),bd.get());if(!l.grecaptcha||t!==e.f&&!e.b){l[e.a]=function(){if(l.grecaptcha){e.f=t;var o=l.grecaptcha.render;l.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(l.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete l[e.a]};var o=Pt(md,{onload:e.a,hl:t||""});qe(Os(o)).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))}else clearTimeout(i),n(l.grecaptcha)}))},yd.prototype.c=function(){this.b--};var _d=null;function wd(t,e,n,r,i,o,a){if(Ti(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(gd||(gd=new vd),a=gd):(_d||(_d=new yd),a=_d),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ed])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Sd],!l.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!me(e)||!this.i&&me(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ds(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var u=this.a[Id];this.a[Id]=function(t){if(Od(s,t),"function"===typeof u)u(t);else if("string"===typeof u){var e=ti(u,l);"function"===typeof e&&e(t)}};var c=this.a[Td];this.a[Td]=function(){if(Od(s,null),"function"===typeof c)c();else if("string"===typeof c){var t=ti(c,l);"function"===typeof t&&t()}}}var Id="callback",Td="expired-callback",Ed="sitekey",Sd="size";function Od(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Cd(t,e){et(t.l,(function(t){return t==e}))}function kd(t,e){return t.h.push(e),e.oa((function(){tt(t.h,e)})),e}function Ad(t){if(t.D)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Nd(t,n,r){var i=!1;try{this.b=r||e["default"].app()}catch(s){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");r=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=e["default"].SDK_VERSION?Jr(e["default"].SDK_VERSION,a):null,wd.call(this,r,t,n,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),a,j(x),i)}function xd(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Pd.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Pd[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}n=wd.prototype,n.Ia=function(){var t=this;return this.f?this.f:this.f=kd(this,qe().then((function(){if(ri()&&!Wr())return qr();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,Qu(t.s,Pu,{})})).then((function(e){t.a[Ed]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},n.render=function(){Ad(this);var t=this;return kd(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=me(e);e=Te("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},n.verify=function(){Ad(this);var t=this;return kd(this,this.render().then((function(e){return new Re((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(Cd(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},n.reset=function(){Ad(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){Ad(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=me(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},C(Nd,wd);var Pd="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Rd(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function Dd(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function jd(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:m}}function Ld(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function Md(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Fd(){return{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}}}function Ud(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof qf)}}}function qd(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof e["default"].app.App)}}}function Vd(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Bd(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}}function Kd(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Wd(t,e){return m(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function Hd(t){return m(t)&&"string"===typeof t.uid}function Gd(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}}function zd(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function $d(t,e){for(var n in e){var r=e[n].name;t[r]=Xd(r,t[n],e[n].j)}}function Qd(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:S((function(t){return this[t]}),n),set:S((function(t,e,n,r){xd(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function Yd(t,e,n,r){t[e]=Xd(e,n,r)}function Xd(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return xd(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=Jd(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}function Jd(t){return t=t.split("."),t[t.length-1]}$d(qf.prototype,{jb:{name:"applyActionCode",j:[Rd("code")]},Ra:{name:"checkActionCode",j:[Rd("code")]},nb:{name:"confirmPasswordReset",j:[Rd("code"),Rd("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Rd("email"),Rd("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Rd("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Rd("emailLink")]},Hc:{name:"onAuthStateChanged",j:[zd(jd(),Ld(),"nextOrObserver"),Ld("opt_error",!0),Ld("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[zd(jd(),Ld(),"nextOrObserver"),Ld("opt_error",!0),Ld("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Rd("email"),zd(jd("opt_actionCodeSettings",!0),Md(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Rd("email"),jd("actionCodeSettings")]},xb:{name:"setPersistence",j:[Rd("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Vd()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Vd()]},Tc:{name:"signInWithCustomToken",j:[Rd("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Rd("email"),Rd("password")]},Vc:{name:"signInWithEmailLink",j:[Rd("email"),Rd("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Rd("phoneNumber"),Gd()]},Xc:{name:"signInWithPopup",j:[Kd()]},Yc:{name:"signInWithRedirect",j:[Kd()]},dd:{name:"updateCurrentUser",j:[zd(function(t){return{name:"user",K:"an instance of Firebase User",optional:!!t,M:function(t){return!!(t&&t instanceof Kh)}}}(),Md(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Rd(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Rd("url"),jd("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Rd("code")]}}),Qd(qf.prototype,{lc:{name:"languageCode",kb:zd(Rd(),Md(),"languageCode")},ti:{name:"tenantId",kb:zd(Rd(),Md(),"tenantId")}}),qf.Persistence=nl,qf.Persistence.LOCAL="local",qf.Persistence.SESSION="session",qf.Persistence.NONE="none",$d(Kh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Dd("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Dd("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Vd()]},qb:{name:"linkWithCredential",j:[Vd()]},Dc:{name:"linkWithPhoneNumber",j:[Rd("phoneNumber"),Gd()]},Ec:{name:"linkWithPopup",j:[Kd()]},Fc:{name:"linkWithRedirect",j:[Kd()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Vd()]},tb:{name:"reauthenticateWithCredential",j:[Vd()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Rd("phoneNumber"),Gd()]},Nc:{name:"reauthenticateWithPopup",j:[Kd()]},Oc:{name:"reauthenticateWithRedirect",j:[Kd()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[zd(jd("opt_actionCodeSettings",!0),Md(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Rd(null,!0)]},cd:{name:"unlink",j:[Rd("provider")]},Bb:{name:"updateEmail",j:[Rd("email")]},Cb:{name:"updatePassword",j:[Rd("password")]},ed:{name:"updatePhoneNumber",j:[Vd("phone")]},Db:{name:"updateProfile",j:[jd("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Rd("email"),zd(jd("opt_actionCodeSettings",!0),Md(null,!0),"opt_actionCodeSettings",!0)]}}),$d(ud.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$d(sd.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$d(Re.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qd(ph.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Dd("appVerificationDisabledForTesting")}}),$d(vh.prototype,{confirm:{name:"confirm",j:[Rd("verificationCode")]}}),Yd(Bo,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[Qo,ua,da,Go],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[zd(Rd(),jd(),"json")]),Yd(ca,"credential",(function(t,e){return new sa(t,e)}),[Rd("email"),Rd("password")]),$d(sa.prototype,{w:{name:"toJSON",j:[Rd(null,!0)]}}),$d(Zo.prototype,{Ca:{name:"addScope",j:[Rd("scope")]},Ka:{name:"setCustomParameters",j:[jd("customOAuthParameters")]}}),Yd(Zo,"credential",ta,[zd(Rd(),jd(),"token")]),Yd(ca,"credentialWithLink",la,[Rd("email"),Rd("emailLink")]),$d(ea.prototype,{Ca:{name:"addScope",j:[Rd("scope")]},Ka:{name:"setCustomParameters",j:[jd("customOAuthParameters")]}}),Yd(ea,"credential",na,[zd(Rd(),jd(),"token")]),$d(ra.prototype,{Ca:{name:"addScope",j:[Rd("scope")]},Ka:{name:"setCustomParameters",j:[jd("customOAuthParameters")]}}),Yd(ra,"credential",ia,[zd(Rd(),zd(jd(),Md()),"idToken"),zd(Rd(),Md(),"accessToken",!0)]),$d(oa.prototype,{Ka:{name:"setCustomParameters",j:[jd("customOAuthParameters")]}}),Yd(oa,"credential",aa,[zd(Rd(),jd(),"token"),Rd("secret",!0)]),$d(Jo.prototype,{Ca:{name:"addScope",j:[Rd("scope")]},credential:{name:"credential",j:[zd(Rd(),zd(jd(),Md()),"optionsOrIdToken"),zd(Rd(),Md(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[jd("customOAuthParameters")]}}),$d(zo.prototype,{w:{name:"toJSON",j:[Rd(null,!0)]}}),$d(Wo.prototype,{w:{name:"toJSON",j:[Rd(null,!0)]}}),Yd(va,"credential",ga,[Rd("verificationId"),Rd("verificationCode")]),$d(va.prototype,{fb:{name:"verifyPhoneNumber",j:[zd(Rd(),function(t,e){return{name:t||"phoneInfoOptions",K:"valid phone info options",optional:!!e,M:function(t){return!!t&&(t.session&&t.phoneNumber?Wd(t.session,qo)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?Wd(t.session,Vo)&&Hd(t.multiFactorHint):t.session&&t.multiFactorUid?Wd(t.session,Vo)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}}}(),"phoneInfoOptions"),Gd()]}}),$d(fa.prototype,{w:{name:"toJSON",j:[Rd(null,!0)]}}),$d(A.prototype,{toJSON:{name:"toJSON",j:[Rd(null,!0)]}}),$d(Oa.prototype,{toJSON:{name:"toJSON",j:[Rd(null,!0)]}}),$d(Sa.prototype,{toJSON:{name:"toJSON",j:[Rd(null,!0)]}}),$d(wh.prototype,{toJSON:{name:"toJSON",j:[Rd(null,!0)]}}),$d(mh.prototype,{Rc:{name:"resolveSignIn",j:[Bd()]}}),$d(Ah.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Bd(),Rd("displayName",!0)]},bd:{name:"unenroll",j:[zd({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Hd},Rd(),"multiFactorInfoIdentifier")]}}),$d(Nd.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Yd(Yi,"parseLink",io,[Rd("link")]),Yd(pd,"assertion",(function(t){return new Ch(t)}),[Vd("phone")]),function(){if("undefined"===typeof e["default"]||!e["default"].INTERNAL||!e["default"].INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Mi,VERIFY_AND_CHANGE_EMAIL:Ui,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:qf,AuthCredential:Bo,Error:A};Yd(t,"EmailAuthProvider",ca,[]),Yd(t,"FacebookAuthProvider",Zo,[]),Yd(t,"GithubAuthProvider",ea,[]),Yd(t,"GoogleAuthProvider",ra,[]),Yd(t,"TwitterAuthProvider",oa,[]),Yd(t,"OAuthProvider",Jo,[Rd("providerId")]),Yd(t,"SAMLAuthProvider",Xo,[Rd("providerId")]),Yd(t,"PhoneAuthProvider",va,[Ud()]),Yd(t,"RecaptchaVerifier",Nd,[zd(Rd(),Fd(),"recaptchaContainer"),jd("recaptchaParameters",!0),qd()]),Yd(t,"ActionCodeURL",Yi,[]),Yd(t,"PhoneMultiFactorGenerator",pd,[]),e["default"].INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return t=t.getProvider("app").getImmediate(),new qf(t)},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),e["default"].INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return t=t.getProvider("auth").getImmediate(),{getUid:E(t.getUid,t),getToken:E(t.nc,t),addAuthTokenListener:E(t.cc,t),removeAuthTokenListener:E(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e["default"].registerVersion("@firebase/auth","0.16.6"),e["default"].INTERNAL.extendNamespace({User:Kh})}()}).apply("undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n("c8ba"))},c04e:function(t,e,n){var r=n("861d");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},c430:function(t,e){t.exports=!1},c68e:function(t,e,n){"use strict";var r=n("cc84"),i=(n("a8e9"),n("abfd"),n("c7b2"),n("945c")),o=n("ffa6"),a={Firestore:i["b"],GeoPoint:i["g"],Timestamp:i["a"],Blob:i["l"],Transaction:i["f"],WriteBatch:i["d"],DocumentReference:i["i"],DocumentSnapshot:i["c"],Query:i["j"],QueryDocumentSnapshot:i["k"],QuerySnapshot:i["t"],CollectionReference:i["m"],FieldPath:i["s"],FieldValue:i["o"],setLogLevel:i["h"],CACHE_SIZE_UNLIMITED:i["n"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function s(t){!function(t,e){t.INTERNAL.registerComponent(new o["Component"]("firestore",(function(t){var n=t.getProvider("app").getImmediate();return e(n,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},a)))}(t,(function(t,e){return new i["b"](t,new i["q"](t,e),new i["e"])})),t.registerVersion("@firebase/firestore","2.3.2")}s(r["default"])},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var r=n("da84"),i=n("ce4e"),o="__core-js_shared__",a=r[o]||i(o,{});t.exports=a},c7b2:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Er})),n.d(e,"b",(function(){return Or})),n.d(e,"c",(function(){return Sr})),n.d(e,"d",(function(){return Cr})),n.d(e,"e",(function(){return kr})),n.d(e,"f",(function(){return Ar})),n.d(e,"g",(function(){return Ir})),n.d(e,"h",(function(){return Tr}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var a,s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},u=u||{},c=s||self;function l(){}function h(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function d(t){return Object.prototype.hasOwnProperty.call(t,p)&&t[p]||(t[p]=++v)}var p="closure_uid_"+(1e9*Math.random()>>>0),v=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function m(t,e,n){return m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y,m.apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function _(){return Date.now()}function w(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function I(){this.j=this.j,this.i=this.i}var T=0;I.prototype.j=!1,I.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0!=T))d(this)},I.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},S=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function O(t){t:{for(var e=Un,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}function C(t){return Array.prototype.concat.apply([],arguments)}function k(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function A(t){return/^[\s\xa0]*$/.test(t)}var N,x=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function P(t,e){return-1!=t.indexOf(e)}function R(t,e){return t<e?-1:t>e?1:0}t:{var D=c.navigator;if(D){var j=D.userAgent;if(j){N=j;break t}}N=""}function L(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function M(t){var e={};for(var n in t)e[n]=t[n];return e}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function q(t){return q[" "](t),t}function V(t,e){var n=tt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}q[" "]=l;var B,K=P(N,"Opera"),W=P(N,"Trident")||P(N,"MSIE"),H=P(N,"Edge"),G=H||W,z=P(N,"Gecko")&&!(P(N.toLowerCase(),"webkit")&&!P(N,"Edge"))&&!(P(N,"Trident")||P(N,"MSIE"))&&!P(N,"Edge"),$=P(N.toLowerCase(),"webkit")&&!P(N,"Edge");function Q(){var t=c.document;return t?t.documentMode:void 0}t:{var Y="",X=function(){var t=N;return z?/rv:([^\);]+)(\)|;)/.exec(t):H?/Edge\/([\d\.]+)/.exec(t):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):$?/WebKit\/(\S+)/.exec(t):K?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(X&&(Y=X?X[1]:""),W){var J=Q();if(null!=J&&J>parseFloat(Y)){B=String(J);break t}}B=Y}var Z,tt={};function et(t){return V(t,(function(){for(var e=0,n=x(String(B)).split("."),r=x(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=R(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||R(0==a[2].length,0==s[2].length)||R(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(c.document&&W){var nt=Q();Z=nt||(parseInt(B,10)||void 0)}else Z=void 0;var rt=Z,it=!W||9<=Number(rt),ot=W&&!et("9"),at=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",l,e),c.removeEventListener("test",l,e)}catch(n){}return t}();function st(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ut(t,e){if(st.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(z){t:{try{q(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:ct[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}st.prototype.b=function(){this.defaultPrevented=!0},w(ut,st);var ct={2:"touch",3:"pen",4:"mouse"};ut.prototype.b=function(){ut.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ot)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var lt="closure_listenable_"+(1e6*Math.random()|0),ht=0;function ft(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ht,this.Y=this.Z=!1}function dt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function pt(t){this.src=t,this.a={},this.b=0}function vt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=E(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(dt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function gt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}pt.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.a[o],t||(t=this.a[o]=[],this.b++);var a=gt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):(e=new ft(e,this.src,o,!!r,i),e.Z=n,t.push(e)),e};var yt="closure_lm_"+(1e6*Math.random()|0),mt={};function bt(t,e,n,r,i){if(r&&r.once)return It(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=Nt(n),t&&t[lt]?t.va(e,n,f(r)?!!r.capture:!!r,i):_t(t,e,n,!1,r,i)}function _t(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i;if(a&&!it)return null;var s=kt(t);if(s||(t[yt]=s=new pt(t)),n=s.add(e,n,r,a,o),n.proxy)return n;if(r=wt(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)at||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(St(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function wt(){var t=Ct,e=it?function(n){return t.call(e.src,e.listener,n)}:function(n){if(n=t.call(e.src,e.listener,n),!n)return n};return e}function It(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)It(t,e[o],n,r,i);return null}return n=Nt(n),t&&t[lt]?t.wa(e,n,f(r)?!!r.capture:!!r,i):_t(t,e,n,!0,r,i)}function Tt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Tt(t,e[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=Nt(n),t&&t[lt]?(t=t.c,e=String(e).toString(),e in t.a&&(o=t.a[e],n=gt(o,n,r,i),-1<n&&(dt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=kt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=gt(e,n,r,i)),(n=-1<t?e[t]:null)&&Et(n))}function Et(t){if("number"!==typeof t&&t&&!t.Y){var e=t.src;if(e&&e[lt])vt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(St(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=kt(e))?(vt(n,t),0==n.b&&(n.src=null,e[yt]=null)):dt(t)}}}function St(t){return t in mt?mt[t]:mt[t]="on"+t}function Ot(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Et(t),n.call(r,e)}function Ct(t,e){if(t.Y)return!0;if(!it){if(!e)t:{e=["window","event"];for(var n=c,r=0;r<e.length;r++)if(n=n[e[r]],null==n){e=null;break t}e=n}return e=new ut(e,this),Ot(t,e)}return Ot(t,new ut(e,this))}function kt(t){return t=t[yt],t instanceof pt?t:null}var At="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nt(t){return"function"===typeof t?t:(t[At]||(t[At]=function(e){return t.handleEvent(e)}),t[At])}function xt(){I.call(this),this.c=new pt(this),this.J=this,this.C=null}function Pt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"===typeof e)e=new st(e,t);else if(e instanceof st)e.target=e.target||t;else{var i=e;e=new st(r,t),U(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=Rt(a,r,!0,e)&&i}if(a=e.a=t,i=Rt(a,r,!0,e)&&i,i=Rt(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)a=e.a=n[o],i=Rt(a,r,!1,e)&&i}function Rt(t,e,n,r){if(e=t.c.a[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&vt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}w(xt,I),xt.prototype[lt]=!0,a=xt.prototype,a.addEventListener=function(t,e,n,r){bt(this,t,e,n,r)},a.removeEventListener=function(t,e,n,r){Tt(this,t,e,n,r)},a.G=function(){if(xt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)dt(n[r]);delete e.a[t],e.b--}}this.C=null},a.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},a.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Dt=c.JSON.stringify;function jt(){this.b=this.a=null}var Lt,Mt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Ut}),(function(t){t.reset()}));function Ft(){var t=Wt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ut(){this.next=this.b=this.a=null}function qt(t){c.setTimeout((function(){throw t}),0)}function Vt(t,e){Lt||Bt(),Kt||(Lt(),Kt=!0),Wt.add(t,e)}function Bt(){var t=c.Promise.resolve(void 0);Lt=function(){t.then(Ht)}}jt.prototype.add=function(t,e){var n=Mt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ut.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ut.prototype.reset=function(){this.next=this.b=this.a=null};var Kt=!1,Wt=new jt;function Ht(){for(var t;t=Ft();){try{t.a.call(t.b)}catch(n){qt(n)}var e=Mt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Kt=!1}function Gt(t,e){xt.call(this),this.b=t||1,this.a=e||c,this.f=m(this.Za,this),this.g=_()}function zt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function $t(t,e,n){if("function"===typeof t)n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Qt(t){t.a=$t((function(){t.a=null,t.c&&(t.c=!1,Qt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}w(Gt,xt),a=Gt.prototype,a.aa=!1,a.M=null,a.Za=function(){if(this.aa){var t=_()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Pt(this,"tick"),this.aa&&(zt(this),this.start()))}},a.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=_())},a.G=function(){Gt.X.G.call(this),zt(this),delete this.a};var Yt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return i(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Qt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(c.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(I);function Xt(t){I.call(this),this.b=t,this.a={}}w(Xt,I);var Jt=[];function Zt(t,e,n,r){Array.isArray(n)||(n&&(Jt[0]=n.toString()),n=Jt);for(var i=0;i<n.length;i++){var o=bt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function te(t){L(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Et(t)}),t),t.a={}}function ee(){this.a=!0}function ne(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}function re(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}function ie(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+ae(t,n)+(r?" "+r:"")}))}function oe(t,e){t.info((function(){return"TIMEOUT: "+e}))}function ae(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Dt(n)}catch(s){return e}}Xt.prototype.G=function(){Xt.X.G.call(this),te(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ee.prototype.info=function(){};var se={},ue=null;function ce(){return ue=ue||new xt}function le(t){st.call(this,se.Fa,t)}function he(t){var e=ce();Pt(e,new le(e,t))}function fe(t,e){st.call(this,se.STAT_EVENT,t),this.stat=e}function de(t){var e=ce();Pt(e,new fe(e,t))}function pe(t){st.call(this,se.Ga,t)}function ve(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){t()}),e)}se.Fa="serverreachability",w(le,st),se.STAT_EVENT="statevent",w(fe,st),se.Ga="timingevent",w(pe,st);var ge={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ye={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function me(){}function be(t){var e;return(e=t.a)||(e=t.a={}),e}function _e(){}me.prototype.a=null;var we,Ie={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Te(){st.call(this,"d")}function Ee(){st.call(this,"c")}function Se(){}function Oe(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Xt(this),this.P=Ce,t=G?125:void 0,this.R=new Gt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}w(Te,st),w(Ee,st),w(Se,me),we=new Se;var Ce=45e3,ke={},Ae={};function Ne(t,e,n){t.H=1,t.i=tn($e(e)),t.j=n,t.I=!0,xe(t,null)}function xe(t,e){t.u=_(),De(t),t.l=$e(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),gn(n.b,"t",r),t.D=0,t.a=vr(t.g,t.g.C?e:null),0<t.O&&(t.F=new Yt(m(t.Ca,t,t.a),t.O)),Zt(t.J,t.a,"readystatechange",t.Xa),e=t.B?M(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),he(1),ne(t.c,t.m,t.l,t.f,t.S,t.j)}function Pe(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Re(t,n);if(i==Ae){4==e&&(t.h=4,de(14),r=!1),ie(t.c,t.f,null,"[Incomplete Response]");break}if(i==ke){t.h=4,de(15),ie(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ie(t.c,t.f,i,null),Ue(t,i)}4==e&&0==n.length&&(t.h=1,de(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,e=t.g,e.a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),sr(e),e.F=!0,de(11))):(ie(t.c,t.f,n,"[Invalid Chunked Response]"),Fe(t),Me(t))}function Re(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ae:(n=Number(e.substring(n,r)),isNaN(n)?ke:(r+=1,r+n>e.length?Ae:(e=e.substr(r,n),t.D=r+n,e)))}function De(t){t.T=_()+t.P,je(t,t.P)}function je(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ve(m(t.Va,t),e)}function Le(t){t.o&&(c.clearTimeout(t.o),t.o=null)}function Me(t){0==t.g.v||t.A||lr(t.g,t)}function Fe(t){Le(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,zt(t.R),te(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ue(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||En(n.b,t)))if(n.I=t.N,!t.C&&En(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;cr(n),Xn(n)}ar(n),de(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ve(m(n.Sa,n),6e3));if(1>=Tn(n.b)&&n.ea){try{n.ea()}catch(g){}n.ea=void 0}}else fr(n,11)}else if((t.C||n.a==t)&&cr(n),!A(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"===typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(P(l,"spdy")||P(l,"quic")||P(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Sn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ze(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=_()-t.u,n.c.info("Handshake RTT: "+n.N+"ms")),u=n;var d=t;if(u.la=pr(u,u.C?u.ga:null,u.fa),d.C){On(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(Le(p),De(p)),u.a=d}else or(u);0<n.g.length&&tr(n)}else"stop"!=i[0]&&"close"!=i[0]||fr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?fr(n,7):Yn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);he(4)}catch(g){}}function qe(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"===typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Ve(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"===typeof t)S(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(h(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=qe(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Be(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Be)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ke(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];We(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)r=t.a[e],We(i,r)||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function We(t,e){return Object.prototype.hasOwnProperty.call(t,e)}a=Oe.prototype,a.setTimeout=function(t){this.P=t},a.Xa=function(t){t=t.target;var e=this.F;e&&3==Hn(t)?e.f():this.Ca(t)},a.Ca=function(t){try{if(t==this.a)t:{var e=Hn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!G&&!this.a.$())){this.A||4!=e||7==n||he(8==n||0>=r?3:2),Le(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,re(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,de(12),Fe(this),Me(this);break t}ie(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ue(this,u)}this.I?(Pe(this,e,o),G&&this.b&&3==e&&(Zt(this.J,this.R,"tick",this.Wa),this.R.start())):(ie(this.c,this.f,o,null),Ue(this,o)),4==e&&Fe(this),this.b&&!this.A&&(4==e?lr(this.g,this):(this.b=!1,De(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,de(12)):(this.h=0,de(13)),Fe(this),Me(this)}}}catch(c){}},a.Wa=function(){if(this.a){var t=Hn(this.a),e=this.a.$();this.D<e.length&&(Le(this),Pe(this,t,e),this.b&&4!=t&&De(this))}},a.cancel=function(){this.A=!0,Fe(this)},a.Va=function(){this.o=null;var t=_();0<=t-this.T?(oe(this.c,this.l),2!=this.H&&(he(3),de(17)),Fe(this),this.h=2,Me(this)):je(this,this.T-t)},a=Be.prototype,a.K=function(){Ke(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},a.L=function(){return Ke(this),this.a.concat()},a.get=function(t,e){return We(this.b,t)?this.b[t]:e},a.set=function(t,e){We(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},a.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var He=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ge(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ze(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ze){this.a=void 0!==e?e:t.a,Qe(this,t.f),this.j=t.j,Ye(this,t.c),Xe(this,t.h),this.g=t.g,e=t.b;var n=new fn;n.c=e.c,e.a&&(n.a=new Be(e.a),n.b=e.b),Je(this,n),this.i=t.i}else t&&(n=String(t).match(He))?(this.a=!!e,Qe(this,n[1]||"",!0),this.j=rn(n[2]||""),Ye(this,n[3]||"",!0),Xe(this,n[4]),this.g=rn(n[5]||"",!0),Je(this,n[6]||"",!0),this.i=rn(n[7]||"")):(this.a=!!e,this.b=new fn(null,this.a))}function $e(t){return new ze(t)}function Qe(t,e,n){t.f=n?rn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ye(t,e,n){t.c=n?rn(e,!0):e}function Xe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Je(t,e,n){e instanceof fn?(t.b=e,mn(t.b,t.a)):(n||(e=on(e,ln)),t.b=new fn(e,t.a))}function Ze(t,e,n){t.b.set(e,n)}function tn(t){return Ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function en(t){return t instanceof ze?$e(t):new ze(t,void 0)}function nn(t,e,n,r){var i=new ze(null,void 0);return t&&Qe(i,t),e&&Ye(i,e),n&&Xe(i,n),r&&(i.g=r),i}function rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function on(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,an),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function an(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}ze.prototype.toString=function(){var t=[],e=this.f;e&&t.push(on(e,sn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(on(e,sn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,null!=n&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(on(n,"/"==n.charAt(0)?cn:un,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",on(n,hn)),t.join("")};var sn=/[#\/\?@]/g,un=/[#\?:]/g,cn=/[#\?]/g,ln=/[#\?@]/g,hn=/#/g;function fn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function dn(t){t.a||(t.a=new Be,t.b=0,t.c&&Ge(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function pn(t,e){dn(t),e=yn(t,e),We(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,t=t.a,We(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ke(t)))}function vn(t,e){return dn(t),e=yn(t,e),We(t.a.b,e)}function gn(t,e,n){pn(t,e),0<n.length&&(t.c=null,t.a.set(yn(t,e),k(n)),t.b+=n.length)}function yn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function mn(t,e){e&&!t.f&&(dn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(pn(this,e),gn(this,n,t))}),t)),t.f=e}a=fn.prototype,a.add=function(t,e){dn(this),this.c=null,t=yn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},a.forEach=function(t,e){dn(this),this.a.forEach((function(n,r){S(n,(function(n){t.call(e,n,r,this)}),this)}),this)},a.L=function(){dn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},a.K=function(t){dn(this);var e=[];if("string"===typeof t)vn(this,t)&&(e=C(e,this.a.get(yn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=C(e,t[n])}return e},a.set=function(t,e){return dn(this),this.c=null,t=yn(this,t),vn(this,t)&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},a.get=function(t,e){return t?(t=this.K(t),0<t.length?String(t[0]):e):e},a.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var bn=function(){function t(t,e){this.b=t,this.a=e}return t}();function _n(t){this.g=t||wn,c.PerformanceNavigationTiming?(t=c.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(c.ia&&c.ia.ya&&c.ia.ya()&&c.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var wn=10;function In(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Tn(t){return t.b?1:t.a?t.a.size:0}function En(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Sn(t,e){t.a?t.a.add(e):t.b=e}function On(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Cn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=o(t.a.values()),a=i.next();!a.done;a=i.next()){var s=a.value;r=r.concat(s.s)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return k(t.c)}function kn(){}function An(){this.a=new kn}function Nn(t,e,n){var r=n||"";try{Ve(t,(function(t,n){var i=t;f(t)&&(i=Dt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function xn(t,e){var n=new ee;if(c.Image){var r=new Image;r.onload=b(Pn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=b(Pn,n,r,"TestLoadImage: error",!1,e),r.onabort=b(Pn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=b(Pn,n,r,"TestLoadImage: timeout",!1,e),c.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function Pn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}_n.prototype.cancel=function(){var t,e;if(this.c=Cn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=o(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(a){t={error:a}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},kn.prototype.stringify=function(t){return c.JSON.stringify(t,void 0)},kn.prototype.parse=function(t){return c.JSON.parse(t,void 0)};var Rn=c.JSON.parse;function Dn(t){xt.call(this),this.headers=new Be,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=jn,this.D=this.F=!1}w(Dn,xt);var jn="",Ln=/^https?$/i,Mn=["POST","PUT"];function Fn(t){return W&&et(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function Un(t){return"content-type"==t.toLowerCase()}function qn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Vn(t),Kn(t)}function Vn(t){t.u||(t.u=!0,Pt(t,"complete"),Pt(t,"error"))}function Bn(t){if(t.b&&"undefined"!=typeof u&&(!t.s[1]||4!=Hn(t)||2!=t.W()))if(t.l&&4==Hn(t))$t(t.za,0,t);else if(Pt(t,"readystatechange"),4==Hn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(He)[1]||null;if(!o&&c.self&&c.self.location){var a=c.self.location.protocol;o=a.substr(0,a.length-1)}i=!Ln.test(o?o.toLowerCase():"")}e=i}var s=e;if(s)Pt(t,"complete"),Pt(t,"success");else{t.h=6;try{var l=2<Hn(t)?t.a.statusText:""}catch(n){l=""}t.f=l+" ["+t.W()+"]",Vn(t)}}finally{Kn(t)}}}function Kn(t,e){if(t.a){Wn(t);var n=t.a,r=t.s[0]?l:null;t.a=null,t.s=null,e||Pt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Wn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(c.clearTimeout(t.m),t.m=null)}function Hn(t){return t.a?t.a.readyState:0}function Gn(t){var e="";return L(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function zn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=Gn(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Ze(t,e,n))}function $n(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qn(t){this.pa=0,this.g=[],this.c=new ee,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=$n("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=$n("baseRetryDelayMs",5e3,t),this.Ra=$n("retryDelaySeedMs",1e4,t),this.Ma=$n("forwardChannelMaxRetries",2,t),this.ma=$n("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new _n(t&&t.concurrentRequestLimit),this.ka=new An,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Yn(t){if(Jn(t),3==t.v){var e=t.R++,n=$e(t.B);Ze(n,"SID",t.J),Ze(n,"RID",e),Ze(n,"TYPE","terminate"),rr(t,n),e=new Oe(t,t.c,e,void 0),e.H=2,e.i=tn($e(n)),n=!1,c.navigator&&c.navigator.sendBeacon&&(n=c.navigator.sendBeacon(e.i.toString(),"")),!n&&c.Image&&((new Image).src=e.i,n=!0),n||(e.a=vr(e.g,null),e.a.ba(e.i)),e.u=_(),De(e)}dr(t)}function Xn(t){t.a&&(sr(t),t.a.cancel(),t.a=null)}function Jn(t){Xn(t),t.j&&(c.clearTimeout(t.j),t.j=null),cr(t),t.b.cancel(),t.h&&("number"===typeof t.h&&c.clearTimeout(t.h),t.h=null)}function Zn(t,e){t.g.push(new bn(t.Oa++,e)),3==t.v&&tr(t)}function tr(t){In(t.b)||t.h||(t.h=!0,Vt(t.Ba,t),t.u=0)}function er(t,e){return!(Tn(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma))&&(t.h=ve(m(t.Ba,t,e),hr(t,t.u)),t.u++,!0))}function nr(t,e){var n;n=e?e.f:t.R++;var r=$e(t.B);Ze(r,"SID",t.J),Ze(r,"RID",n),Ze(r,"AID",t.P),rr(t,r),t.i&&t.l&&zn(r,t.i,t.l),n=new Oe(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ir(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Sn(t.b,n),Ne(n,r,e)}function rr(t,e){t.f&&Ve({},(function(t,n){Ze(e,n,t)}))}function ir(t,e,n){n=Math.min(t.g.length,n);var r=t.f?m(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(c-=o,0>c)o=Math.max(0,i[u].b-100),s=!1;else try{Nn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function or(t){t.a||t.j||(t.T=1,Vt(t.Aa,t),t.o=0)}function ar(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=ve(m(t.Aa,t),hr(t,t.o)),t.o++,!0)}function sr(t){null!=t.s&&(c.clearTimeout(t.s),t.s=null)}function ur(t){t.a=new Oe(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=$e(t.la);Ze(e,"RID","rpc"),Ze(e,"SID",t.J),Ze(e,"CI",t.H?"0":"1"),Ze(e,"AID",t.P),rr(t,e),Ze(e,"TYPE","xmlhttp"),t.i&&t.l&&zn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=tn($e(e)),n.j=null,n.I=!0,xe(n,t)}function cr(t){null!=t.m&&(c.clearTimeout(t.m),t.m=null)}function lr(t,e){var n=null;if(t.a==e){cr(t),sr(t),t.a=null;var r=2}else{if(!En(t.b,e))return;n=e.s,On(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=_()-e.u;var i=t.u;r=ce(),Pt(r,new pe(r,n,e,i)),tr(t)}else or(t);else if(i=e.h,3==i||0==i&&0<t.I||!(1==r&&er(t,e)||2==r&&ar(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:fr(t,5);break;case 4:fr(t,10);break;case 3:fr(t,6);break;default:fr(t,2)}}function hr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function fr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=m(t.Ya,t);n||(n=new ze("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||Qe(n,"https"),tn(n)),xn(n.toString(),r)}else de(2);t.v=0,t.f&&t.f.ra(e),dr(t),Jn(t)}function dr(t){t.v=0,t.I=-1,t.f&&(0==Cn(t.b).length&&0==t.g.length||(t.b.c.length=0,k(t.g),t.g.length=0),t.f.qa())}function pr(t,e,n){var r=en(n);if(""!=r.c)e&&Ye(r,e+"."+r.c),Xe(r,r.h);else{var i=c.location;r=nn(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&L(t.V,(function(t,e){Ze(r,e,t)})),e=t.A,n=t.na,e&&n&&Ze(r,e,n),Ze(r,"VER",t.ha),rr(t,r),r}function vr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return e=new Dn(t.Na),e.F=t.C,e}function gr(){}function yr(){if(W&&!(10<=Number(rt)))throw Error("Environmental error: no available transport.")}function mr(t,e){xt.call(this),this.a=new Qn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!A(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.a.A=e,t=this.b,null!==t&&e in t&&(t=this.b,e in t&&delete t[e])),this.f=new wr(this)}function br(t){Te.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function _r(){Ee.call(this),this.status=1}function wr(t){this.a=t}a=Dn.prototype,a.ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?be(this.H):be(we),this.a.onreadystatechange=m(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void qn(this,o)}t=n||"";var i=new Be(this.headers);r&&Ve(r,(function(t,e){i.set(e,t)})),r=O(i.L()),n=c.FormData&&t instanceof c.FormData,!(0<=E(Mn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Wn(this),0<this.o&&((this.D=Fn(this.a))?(this.a.timeout=this.o,this.a.ontimeout=m(this.xa,this)):this.m=$t(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){qn(this,o)}},a.xa=function(){"undefined"!=typeof u&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Pt(this,"timeout"),this.abort(8))},a.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Pt(this,"complete"),Pt(this,"abort"),Kn(this))},a.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Kn(this,!0)),Dn.X.G.call(this)},a.za=function(){this.j||(this.A||this.l||this.g?Bn(this):this.Ua())},a.Ua=function(){Bn(this)},a.W=function(){try{return 2<Hn(this)?this.a.status:-1}catch(t){return-1}},a.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},a.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Rn(e)}},a.ua=function(){return this.h},a.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},a=Qn.prototype,a.ha=8,a.v=1,a.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Oe(this,this.c,t,void 0),r=this.l;if(this.O&&(r?(r=M(r),U(r,this.O)):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(o="__data__"in o.a&&(o=o.a.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(e+=o,4096<e){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ir(this,n,e),i=$e(this.B),Ze(i,"RID",t),Ze(i,"CVER",22),this.A&&Ze(i,"X-HTTP-Session-Id",this.A),rr(this,i),this.i&&r&&zn(i,this.i,r),Sn(this.b,n),this.Ia&&Ze(i,"TYPE","init"),this.da?(Ze(i,"$req",e),Ze(i,"SID","null"),n.U=!0,Ne(n,i,null)):Ne(n,i,e),this.v=2}}else 3==this.v&&(t?nr(this,t):0==this.g.length||In(this.b)||nr(this))},a.Aa=function(){if(this.j=null,ur(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ve(m(this.Ta,this),t)}},a.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,de(10),Xn(this),ur(this))},a.Sa=function(){null!=this.m&&(this.m=null,Xn(this),ar(this),de(19))},a.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),de(2)):(this.c.info("Failed to ping google.com"),de(1))},a=gr.prototype,a.ta=function(){},a.sa=function(){},a.ra=function(){},a.qa=function(){},a.Ja=function(){},yr.prototype.a=function(t,e){return new mr(t,e)},w(mr,xt),mr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;de(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=pr(t,null,t.fa),tr(t)},mr.prototype.close=function(){Yn(this.a)},mr.prototype.h=function(t){if("string"===typeof t){var e={};e.__data__=t,Zn(this.a,e)}else this.l?(e={},e.__data__=Dt(t),Zn(this.a,e)):Zn(this.a,t)},mr.prototype.G=function(){this.a.f=null,delete this.f,Yn(this.a),delete this.a,mr.X.G.call(this)},w(br,Te),w(_r,Ee),w(wr,gr),wr.prototype.ta=function(){Pt(this.a,"a")},wr.prototype.sa=function(t){Pt(this.a,new br(t))},wr.prototype.ra=function(t){Pt(this.a,new _r(t))},wr.prototype.qa=function(){Pt(this.a,"b")},yr.prototype.createWebChannel=yr.prototype.a,mr.prototype.send=mr.prototype.h,mr.prototype.open=mr.prototype.g,mr.prototype.close=mr.prototype.close,ge.NO_ERROR=0,ge.TIMEOUT=8,ge.HTTP_ERROR=6,ye.COMPLETE="complete",_e.EventType=Ie,Ie.OPEN="a",Ie.CLOSE="b",Ie.ERROR="c",Ie.MESSAGE="d",xt.prototype.listen=xt.prototype.va,Dn.prototype.listenOnce=Dn.prototype.wa,Dn.prototype.getLastError=Dn.prototype.Qa,Dn.prototype.getLastErrorCode=Dn.prototype.ua,Dn.prototype.getStatus=Dn.prototype.W,Dn.prototype.getResponseJson=Dn.prototype.Pa,Dn.prototype.getResponseText=Dn.prototype.$,Dn.prototype.send=Dn.prototype.ba;var Ir=function(){return new yr},Tr=function(){return ce()},Er=ge,Sr=ye,Or=se,Cr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},kr=_e,Ar=Dn}).call(this,n("c8ba"))},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},ca84:function(t,e,n){var r=n("5135"),i=n("fc6a"),o=n("4d64").indexOf,a=n("d012");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);while(e.length>u)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},cc12:function(t,e,n){var r=n("da84"),i=n("861d"),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},cc84:function(t,e,n){"use strict";n.r(e),n.d(e,"firebase",(function(){return F}));var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.create;Object.create;var i,o,a=n("a8e9"),s=n("ffa6"),u=n("abfd"),c=(i={},i["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),l=new a["ErrorFactory"]("app","Firebase",c),h="@firebase/app",f="0.6.22",d="@firebase/analytics",p="@firebase/app-check",v="@firebase/auth",g="@firebase/database",y="@firebase/functions",m="@firebase/installations",b="@firebase/messaging",_="@firebase/performance",w="@firebase/remote-config",I="@firebase/storage",T="@firebase/firestore",E="firebase-wrapper",S="[DEFAULT]",O=(o={},o[h]="fire-core",o[d]="fire-analytics",o[p]="fire-app-check",o[v]="fire-auth",o[g]="fire-rtdb",o[y]="fire-fn",o[m]="fire-iid",o[b]="fire-fcm",o[_]="fire-perf",o[w]="fire-rc",o[I]="fire-gcs",o[T]="fire-fst",o["fire-js"]="fire-js",o[E]="fire-js-all",o),C=new u["Logger"]("@firebase/app"),k=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(a["deepCopy"])(t),this.container=new s["ComponentContainer"](e.name),this._addComponent(new s["Component"]("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=S),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=S),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){C.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();k.prototype.name&&k.prototype.options||k.prototype.delete||console.log("dc");var A="8.6.1";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t){var e={},n=new Map,r={__esModule:!0,initializeApp:c,app:o,registerVersion:d,setLogLevel:u["setLogLevel"],onLog:p,apps:null,SDK_VERSION:A,INTERNAL:{registerComponent:f,removeApp:i,components:n,useAsService:v}};function i(t){delete e[t]}function o(t){if(t=t||S,!Object(a["contains"])(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(n,i){if(void 0===i&&(i={}),"object"!==typeof i||null===i){var o=i;i={name:o}}var s=i;void 0===s.name&&(s.name=S);var u=s.name;if("string"!==typeof u||!u)throw l.create("bad-app-name",{appName:String(u)});if(Object(a["contains"])(e,u))throw l.create("duplicate-app",{appName:u});var c=new t(n,s,r);return e[u]=c,c}function h(){return Object.keys(e).map((function(t){return e[t]}))}function f(i){var s=i.name;if(n.has(s))return C.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===i.type?r[s]:null;if(n.set(s,i),"PUBLIC"===i.type){var u=function(t){if(void 0===t&&(t=o()),"function"!==typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==i.serviceProps&&Object(a["deepExtend"])(u,i.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,i.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var f=h[c];e[f]._addComponent(i)}return"PUBLIC"===i.type?r[s]:null}function d(t,e,n){var r,i=null!==(r=O[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void C.warn(u.join(" "))}f(new s["Component"](i+"-version",(function(){return{library:i,version:e}}),"VERSION"))}function p(t,e){if(null!==t&&"function"!==typeof t)throw l.create("invalid-log-argument");Object(u["setUserLogHandler"])(t,e)}function v(t,e){if("serverAuth"===e)return null;var n=e;return n}return r["default"]=r,Object.defineProperty(r,"apps",{get:h}),o["App"]=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(){var t=N(k);function e(e){Object(a["deepExtend"])(t,e)}return t.INTERNAL=r(r({},t.INTERNAL),{createFirebaseNamespace:x,extendNamespace:e,createSubscribe:a["createSubscribe"],ErrorFactory:a["ErrorFactory"],deepExtend:a["deepExtend"]}),t}var P=x(),R=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map((function(t){if(D(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(t,e){t.INTERNAL.registerComponent(new s["Component"]("platform-logger",(function(t){return new R(t)}),"PRIVATE")),t.registerVersion(h,f,e),t.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Object(a["isBrowser"])()&&void 0!==self.firebase){C.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var L=self.firebase.SDK_VERSION;L&&L.indexOf("LITE")>=0&&C.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var M=P.initializeApp;P.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(a["isNode"])()&&C.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),M.apply(void 0,t)};var F=P;j(F);e["default"]=F},cca6:function(t,e,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cdf9:function(t,e,n){var r=n("825a"),i=n("861d"),o=n("f069");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},ce4e:function(t,e,n){var r=n("da84"),i=n("9112");t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("428f"),i=n("da84"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},d2bb:function(t,e,n){var r=n("825a"),i=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},d44e:function(t,e,n){var r=n("9bf2").f,i=n("5135"),o=n("b622"),a=o("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dd40:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},df75:function(t,e,n){var r=n("ca84"),i=n("7839");t.exports=Object.keys||function(t){return r(t,i)}},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){n=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":t.slice(n,r)}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),a="/"===o(t,-1);return t=n(i(t.split("/"),(function(t){return!!t})),!r).join("/"),t||r||(t="."),t&&a&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,i=!0,o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),47===e){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=r(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){n=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===n+1?"":t.slice(e,r)};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},e163:function(t,e,n){var r=n("5135"),i=n("7b0b"),o=n("f772"),a=n("e177"),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},e177:function(t,e,n){var r=n("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,n){"use strict";var r=n("fc6a"),i=n("44d2"),o=n("3f8c"),a=n("69f3"),s=n("7dd0"),u="Array Iterator",c=a.set,l=a.getterFor(u);t.exports=s(Array,"Array",(function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},e2cc:function(t,e,n){var r=n("6eeb");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e6cf:function(t,e,n){"use strict";var r,i,o,a,s=n("23e7"),u=n("c430"),c=n("da84"),l=n("d066"),h=n("fea9"),f=n("6eeb"),d=n("e2cc"),p=n("d2bb"),v=n("d44e"),g=n("2626"),y=n("861d"),m=n("1c0b"),b=n("19aa"),_=n("8925"),w=n("2266"),I=n("1c7e"),T=n("4840"),E=n("2cf4").set,S=n("b575"),O=n("cdf9"),C=n("44de"),k=n("f069"),A=n("e667"),N=n("69f3"),x=n("94ca"),P=n("b622"),R=n("6069"),D=n("605d"),j=n("2d00"),L=P("species"),M="Promise",F=N.get,U=N.set,q=N.getterFor(M),V=h&&h.prototype,B=h,K=V,W=c.TypeError,H=c.document,G=c.process,z=k.f,$=z,Q=!!(H&&H.createEvent&&c.dispatchEvent),Y="function"==typeof PromiseRejectionEvent,X="unhandledrejection",J="rejectionhandled",Z=0,tt=1,et=2,nt=1,rt=2,it=!1,ot=x(M,(function(){var t=_(B)!==String(B);if(!t&&66===j)return!0;if(u&&!K["finally"])return!0;if(j>=51&&/native code/.test(B))return!1;var e=new B((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))},r=e.constructor={};return r[L]=n,it=e.then((function(){}))instanceof n,!it||!t&&R&&!Y})),at=ot||!I((function(t){B.all(t)["catch"]((function(){}))})),st=function(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e},ut=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;S((function(){var r=t.value,i=t.state==tt,o=0;while(n.length>o){var a,s,u,c=n[o++],l=i?c.ok:c.fail,h=c.resolve,f=c.reject,d=c.domain;try{l?(i||(t.rejection===rt&&ft(t),t.rejection=nt),!0===l?a=r:(d&&d.enter(),a=l(r),d&&(d.exit(),u=!0)),a===c.promise?f(W("Promise-chain cycle")):(s=st(a))?s.call(a,h,f):h(a)):f(r)}catch(p){d&&!u&&d.exit(),f(p)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&lt(t)}))}},ct=function(t,e,n){var r,i;Q?(r=H.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},!Y&&(i=c["on"+t])?i(r):t===X&&C("Unhandled promise rejection",n)},lt=function(t){E.call(c,(function(){var e,n=t.facade,r=t.value,i=ht(t);if(i&&(e=A((function(){D?G.emit("unhandledRejection",r,n):ct(X,n,r)})),t.rejection=D||ht(t)?rt:nt,e.error))throw e.value}))},ht=function(t){return t.rejection!==nt&&!t.parent},ft=function(t){E.call(c,(function(){var e=t.facade;D?G.emit("rejectionHandled",e):ct(J,e,t.value)}))},dt=function(t,e,n){return function(r){t(e,r,n)}},pt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=et,ut(t,!0))},vt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw W("Promise can't be resolved itself");var r=st(e);r?S((function(){var n={done:!1};try{r.call(e,dt(vt,n,t),dt(pt,n,t))}catch(i){pt(n,i,t)}})):(t.value=e,t.state=tt,ut(t,!1))}catch(i){pt({done:!1},i,t)}}};if(ot&&(B=function(t){b(this,B,M),m(t),r.call(this);var e=F(this);try{t(dt(vt,e),dt(pt,e))}catch(n){pt(e,n)}},K=B.prototype,r=function(t){U(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Z,value:void 0})},r.prototype=d(K,{then:function(t,e){var n=q(this),r=z(T(this,B));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=D?G.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=Z&&ut(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=F(t);this.promise=t,this.resolve=dt(vt,e),this.reject=dt(pt,e)},k.f=z=function(t){return t===B||t===o?new i(t):$(t)},!u&&"function"==typeof h&&V!==Object.prototype)){a=V.then,it||(f(V,"then",(function(t,e){var n=this;return new B((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),f(V,"catch",K["catch"],{unsafe:!0}));try{delete V.constructor}catch(gt){}p&&p(V,K)}s({global:!0,wrap:!0,forced:ot},{Promise:B}),v(B,M,!1,!0),g(M),o=l(M),s({target:M,stat:!0,forced:ot},{reject:function(t){var e=z(this);return e.reject.call(void 0,t),e.promise}}),s({target:M,stat:!0,forced:u||ot},{resolve:function(t){return O(u&&this===o?B:this,t)}}),s({target:M,stat:!0,forced:at},{all:function(t){var e=this,n=z(e),r=n.resolve,i=n.reject,o=A((function(){var n=m(e.resolve),o=[],a=0,s=1;w(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=z(e),r=n.reject,i=A((function(){var i=m(e.resolve);w(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e71f:function(t,e,n){"use strict";n("c68e")},e893:function(t,e,n){var r=n("5135"),i=n("56ef"),o=n("06cf"),a=n("9bf2");t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e947:function(t,e,n){"use strict";(function(t,e){var r=n("cc84"),i=n("ffa6"),o=n("a8e9"),a=n("9802"),s=n("abfd"),u="@firebase/database",c="0.10.2",l="";function h(t){l=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o["stringify"])(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o["jsonEval"])(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),d=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o["contains"])(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),p=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new f(e)}}catch(n){}return new d},v=p("localStorage"),g=p("sessionStorage"),y=new s["Logger"]("@firebase/database"),m=function(){var t=1;return function(){return t++}}(),b=function(t){var e=Object(o["stringToByteArray"])(t),n=new o["Sha1"];n.update(e);var r=n.digest();return o["base64"].encodeByteArray(r)},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"===typeof i&&"number"===typeof i.length?n+=_.apply(null,i):n+="object"===typeof i?Object(o["stringify"])(i):i,n+=" "}return n},w=null,I=!0,T=function(t,e){Object(o["assert"])(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(y.logLevel=s["LogLevel"].VERBOSE,w=y.log.bind(y),e&&g.set("logging_enabled",!0)):"function"===typeof t?w=t:(w=null,g.remove("logging_enabled"))},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===I&&(I=!1,null===w&&!0===g.get("logging_enabled")&&T(!0)),w){var n=_.apply(null,t);w(n)}},S=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];E.apply(void 0,Object(a["f"])([t],Object(a["e"])(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,Object(a["f"])([],Object(a["e"])(t)));y.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,Object(a["f"])([],Object(a["e"])(t)));throw y.error(n),new Error(n)},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_.apply(void 0,Object(a["f"])([],Object(a["e"])(t)));y.warn(n)},A=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&k("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},N=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},x=function(t){if(Object(o["isNodeSdk"])()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}},P="[MIN_NAME]",R="[MAX_NAME]",D=function(t,e){if(t===e)return 0;if(t===P||e===R)return-1;if(e===P||t===R)return 1;var n=z(t),r=z(e);return null!==n?null!==r?n-r===0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},L=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o["stringify"])(e))},M=function(t){if("object"!==typeof t||null===t)return Object(o["stringify"])(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o["stringify"])(e[i]),r+=":",r+=M(t[e[i]]);return r+="}",r},F=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var q=function(t){Object(o["assert"])(!N(t),"Invalid JSON number");var e,n,r,i,a,s=11,u=52,c=(1<<s-1)-1;0===t?(n=0,r=0,e=1/t===-1/0?1:0):(e=t<0,t=Math.abs(t),t>=Math.pow(2,1-c)?(i=Math.min(Math.floor(Math.log(t)/Math.LN2),c),n=i+c,r=Math.round(t*Math.pow(2,u-i)-Math.pow(2,u))):(n=0,r=Math.round(t/Math.pow(2,1-c-u))));var l=[];for(a=u;a;a-=1)l.push(r%2?1:0),r=Math.floor(r/2);for(a=s;a;a-=1)l.push(n%2?1:0),n=Math.floor(n/2);l.push(e?1:0),l.reverse();var h=l.join(""),f="";for(a=0;a<64;a+=8){var d=parseInt(h.substr(a,8),2).toString(16);1===d.length&&(d="0"+d),f+=d}return f.toLowerCase()},V=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},B=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI};function K(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var W=new RegExp("^-?(0*)\\d{1,10}$"),H=-2147483648,G=2147483647,z=function(t){if(W.test(t)){var e=Number(t);if(e>=H&&e<=G)return e}return null},$=function(t){try{t()}catch(e){setTimeout((function(){var t=e.stack||"";throw k("Exception was thrown by user callback.",t),e}),Math.floor(0))}},Q=function(){var t="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return t.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Y=function(t,e){var n=setTimeout(t,e);return"object"===typeof n&&n["unref"]&&n["unref"](),n},X=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null===e||void 0===e?void 0:e.getImmediate({optional:!0}),this.appCheck||null===e||void 0===e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){k('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),J=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',k(t)},t}(),Z=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),tt="5",et="v",nt="s",rt="r",it="f",ot=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,at="ls",st="p",ut="ac",ct="websocket",lt="long_polling",ht=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=v.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&v.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function ft(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dt(t,e,n){var r;if(Object(o["assert"])("string"===typeof e,"typeof type must == string"),Object(o["assert"])("object"===typeof n,"typeof params must == object"),e===ct)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==lt)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}ft(t)&&(n["ns"]=t.namespace);var i=[];return U(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o["contains"])(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o["deepCopy"])(this.counters_)},t}(),vt={},gt={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){var e=t.toString();return vt[e]||(vt[e]=new pt),vt[e]}function mt(t,e){var n=t.toString();return gt[n]||(gt[n]=e()),gt[n]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&$((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;while(this.pendingResponses[this.currentResponseNum]){var o=r();if("break"===o)break}},t}(),_t="start",wt="close",It="pLPCommand",Tt="pRTLPCB",Et="id",St="pw",Ot="ser",Ct="cb",kt="seg",At="ts",Nt="d",xt="dframe",Pt=1870,Rt=30,Dt=Pt-Rt,jt=25e3,Lt=3e4,Mt=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(t),this.stats_=yt(e),this.urlFn=function(t){return s.appCheckToken&&(t[ut]=s.appCheckToken),dt(e,lt,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new bt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(Lt)),x((function(){if(!n.isClosed_){n.scriptTagHolder=new Ft((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(a["e"])(t,5),i=r[0],o=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===_t)n.id=o,n.password=s;else{if(i!==wt)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(a["e"])(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={};t[_t]="t",t[Ot]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t[Ct]=n.scriptTagHolder.uniqueCallbackIdentifier),t[et]=tt,n.transportSessionId&&(t[nt]=n.transportSessionId),n.lastSessionId&&(t[at]=n.lastSessionId),n.applicationId&&(t[st]=n.applicationId),n.appCheckToken&&(t[ut]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&ot.test(location.hostname)&&(t[rt]=it);var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!Object(o["isNodeSdk"])()&&(!!t.forceAllow_||!t.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!V()&&!B())},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o["stringify"])(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o["base64Encode"])(e),r=F(n,Dt),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o["isNodeSdk"])()){this.myDisconnFrame=document.createElement("iframe");var n={};n[xt]="t",n[Et]=t,n[St]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o["stringify"])(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Ft=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o["isNodeSdk"])())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window[It+this.uniqueCallbackIdentifier]=e,window[Tt+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var s=document.domain;a='<script>document.domain="'+s+'";<\/script>'}var u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(c){E("frame writing exception"),c.stack&&E(c.stack),E(c)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{var e=t.contentWindow.document;e||E("No IE domain setting required")}catch(r){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){this.myID=t,this.myPW=e,this.alive=!0;while(this.newRequest_());},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[Et]=this.myID,t[St]=this.myPW,t[Ot]=this.currentSerial;var e=this.urlFn(t),n="",r=0;while(this.pendingSegs.length>0){var i=this.pendingSegs[0];if(!(i.d.length+Rt+n.length<=Pt))break;var o=this.pendingSegs.shift();n=n+"&"+kt+r+"="+o.seg+"&"+At+r+"="+o.ts+"&"+Nt+r+"="+o.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(jt)),o=function(){clearTimeout(i),r()};this.addTag(t,o)},t.prototype.addTag=function(t,e){var n=this;Object(o["isNodeSdk"])()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){E("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Ut=16384,qt=45e3,Vt=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!==typeof MozWebSocket?Vt=MozWebSocket:"undefined"!==typeof WebSocket&&(Vt=WebSocket);var Bt=function(){function e(t,n,r,i,o,a,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=yt(n),this.connURL=e.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,e,n,r){var i={};return i[et]=tt,!Object(o["isNodeSdk"])()&&"undefined"!==typeof location&&location.hostname&&ot.test(location.hostname)&&(i[rt]=it),e&&(i[nt]=e),n&&(i[at]=n),r&&(i[ut]=r),dt(t,ct,i)},e.prototype.open=function(e,n){var r=this;this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,v.set("previous_websocket_failure",!0);try{if(Object(o["isNodeSdk"])()){var i=this.nodeAdmin?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/"+tt+"/"+l+"/"+t.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?a.headers["Authorization"]=this.authToken||"":a.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var s=Object({NODE_ENV:"production",BASE_URL:"/"}),u=0===this.connURL.indexOf("wss://")?s["HTTPS_PROXY"]||s["https_proxy"]:s["HTTP_PROXY"]||s["http_proxy"];u&&(a["proxy"]={origin:u}),this.mySock=new Vt(this.connURL,[],a)}else{a={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Vt(this.connURL,[],a)}}catch(h){this.log_("Error instantiating WebSocket.");var c=h.message||h.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&r.log_(e),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Vt&&!e.forceDisallow_},e.previouslyFailed=function(){return v.isInMemoryStorage||!0===v.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){v.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o["jsonEval"])(e);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(Object(o["assert"])(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t["data"];if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(t){this.resetKeepAlive();var e=Object(o["stringify"])(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=F(e,Ut);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(qt))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Kt=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Mt,Bt]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Bt&&Bt["isAvailable"](),o=i&&!Bt.previouslyFailed();if(e.webSocketOnly&&(i||k("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Bt];else{var s=this.transports_=[];try{for(var u=Object(a["g"])(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l["isAvailable"]()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Wt=6e4,Ht=5e3,Gt=10240,zt=102400,$t="t",Qt="d",Yt="s",Xt="r",Jt="e",Zt="o",te="a",ee="n",ne="p",re="h",ie=function(){function t(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new Kt(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e["healthyTimeout"]||0;i>0&&(this.healthyTimeout_=Y((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>zt?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>Gt?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if($t in t){var e=t[$t];e===te?this.upgradeIfSecondaryHealthy_():e===Xt?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):e===Zt&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=L("t",t),n=L("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ne,d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:te,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ee,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=L("t",t),n=L("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=L($t,t);if(Qt in t){var n=t[Qt];if(e===re)this.onHandshake_(n);else if(e===ee){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===Yt?this.onConnectionShutdown_(n):e===Xt?this.onReset_(n):e===Jt?O("Server Error: "+n):e===Zt?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),tt!==n&&k("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Y((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(Wt))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Y((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(Ht))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ne,d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(v.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),oe=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ae=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o["assert"])(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(a["f"])([],Object(a["e"])(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o["assert"])(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),se=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Object(o["isMobileCordova"])()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(a["c"])(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o["assert"])("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ae),ue=32,ce=768,le=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(){return new le("")}function fe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function de(t){return t.pieces_.length-t.pieceNum_}function pe(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new le(t.pieces_,e)}function ve(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ge(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ye(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function me(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new le(e,0)}function be(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof le)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new le(n,0)}function _e(t){return t.pieceNum_>=t.pieces_.length}function we(t,e){var n=fe(t),r=fe(e);if(null===n)return e;if(n===r)return we(pe(t),pe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ie(t,e){for(var n=ye(t,0),r=ye(e,0),i=0;i<n.length&&i<r.length;i++){var o=D(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Te(t,e){if(de(t)!==de(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ee(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(de(t)>de(e))return!1;while(n<t.pieces_.length){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Se=function(){function t(t,e){this.errorPrefix_=e,this.parts_=ye(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o["stringLength"])(this.parts_[n]);ke(this)}return t}();function Oe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(o["stringLength"])(e),ke(t)}function Ce(t){var e=t.parts_.pop();t.byteLength_-=Object(o["stringLength"])(e),t.parts_.length>0&&(t.byteLength_-=1)}function ke(t){if(t.byteLength_>ce)throw new Error(t.errorPrefix_+"has a key path longer than "+ce+" bytes ("+t.byteLength_+").");if(t.parts_.length>ue)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ue+") or object contains a cycle "+Ae(t))}function Ae(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne,xe,Pe=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(n="visibilitychange",e="hidden"):"undefined"!==typeof document["mozHidden"]?(n="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document["msHidden"]?(n="msvisibilitychange",e="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(a["c"])(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o["assert"])("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ae),Re=1e3,De=3e5,je=3e3,Le=3e4,Me=1.3,Fe=3e4,Ue="server_kill",qe=3,Ve=function(t){function e(n,r,i,a,s,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=s,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=S("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Re,h.maxReconnectDelay_=De,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(o["isNodeSdk"])())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Pe.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&se.getInstance().on("online",h.onOnline_,h),h}return Object(a["c"])(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o["stringify"])(i)),Object(o["assert"])(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o["Deferred"],r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t["d"];"ok"===t["s"]?(e.onDataUpdate_(r["p"],i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[a];void 0!==t&&i===t&&(delete e.outstandingGets_[a],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),je),this.connected_&&this.sendGet_(a),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Object(o["assert"])(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(o["assert"])(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i},s="q";t.tag&&(a["q"]=r._queryObject,a["t"]=t.tag),a["h"]=t.hashFn(),this.sendRequest(s,a,(function(a){var s=a["d"],u=a["s"];e.warnOnListenWarnings_(s,r);var c=n.listens.get(i)&&n.listens.get(i).get(o);c===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"===typeof t&&Object(o["contains"])(t,"w")){var n=Object(o["safeGet"])(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();k("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e=t&&40===t.length;(e||Object(o["isAdmin"])(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Le)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o["isValidFormat"])(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r["noauth"]=!0:"object"===typeof this.authOverride_&&(r["authvar"]=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n["s"],i=n["d"]||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e["s"],r=e["d"]||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(o["assert"])(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t},o="n";r&&(i["q"]=n,i["t"]=r),this.sendRequest(o,i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t["s"],t["d"])}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o["h"]=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r["s"],r["d"])}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){var n=t["s"];if("ok"!==n){var r=t["d"];e.log_("reportStats","Error sending stats: "+r)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o["stringify"])(t));var e=t["r"],n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t["b"]))}else{if("error"in t)throw"A server-side error has occurred: "+t["error"];"a"in t&&this.onDataPush_(t["a"],t["b"])}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e["p"],e["d"],!1,e["t"]):"m"===t?this.onDataUpdate_(e["p"],e["d"],!0,e["t"]):"c"===t?this.onListenRevoked_(e["p"],e["q"]):"ac"===t?this.onAuthRevoked_(e["s"],e["d"]):"apc"===t?this.onAppCheckRevoked_(e["s"],e["d"]):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(o["stringify"])(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o["assert"])(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Re,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Re,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var t=(new Date).getTime()-this.lastConnectionEstablishedTime_;t>Fe&&(this.reconnectDelay_=Re),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Me)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(a["b"])(this,void 0,void 0,(function(){var t,n,r,i,s,u,c,l,h,f,d,p,v,g,y=this;return Object(a["d"])(this,(function(m){switch(m.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())},h=function(t){Object(o["assert"])(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)])];case 2:return d=a["e"].apply(void 0,[m.sent(),2]),p=d[0],v=d[1],u?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,c=new ie(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){k(t+" ("+y.repoInfo_.toString()+")"),y.interrupt(Ue)}),s)),[3,4];case 3:return g=m.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&k(g),l()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){E("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){E("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o["isEmpty"])(this.interruptReasons_)&&(this.reconnectDelay_=Re,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return M(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new le(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){E("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qe&&(this.reconnectDelay_=Le,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){E("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qe&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t["msg"].replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(a["g"])(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,Object(a["g"])(s.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);while(this.onDisconnectRequestQueue_.length){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o["isNodeSdk"])()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+l.replace(/\./g,"-")]=1,Object(o["isMobileCordova"])()?t["framework.cordova"]=1:Object(o["isReactNative"])()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=se.getInstance().currentlyOnline();return Object(o["isEmpty"])(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(oe),Be=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ke=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Be(P,t),r=new Be(P,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Be.MIN},t}(),We=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["c"])(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Ne},set:function(t){Ne=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return D(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o["assertionError"])("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Be.MIN},e.prototype.maxPost=function(){return new Be(R,Ne)},e.prototype.makePost=function(t,e){return Object(o["assert"])("string"===typeof t,"KeyIndex indexValue must always be a string."),new Be(t,Ne)},e.prototype.toString=function(){return".key"},e}(Ke),He=new We,Ge=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];var o=1;while(!t.isEmpty())if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_){e=e.left;while(!e.isEmpty())this.nodeStack_.push(e),e=e.right}else{e=e.right;while(!e.isEmpty())this.nodeStack_.push(e),e=e.left}return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),ze=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Qe.EMPTY_NODE,this.right=null!=o?o:Qe.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Qe.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},t.prototype.remove=function(t,e){var n,r;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Qe.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),$e=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ze(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Qe=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ze.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ze.BLACK,null,null))},t.prototype.get=function(t){var e,n=this.root_;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){var e,n=this.root_,r=null;while(!n.isEmpty()){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return r?r.key:null;n=n.left;while(!n.right.isEmpty())n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ge(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ge(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ge(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ge(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new $e,t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ye(t,e){return D(t.name,e.name)}function Xe(t,e){return D(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){xe=t}var Ze,tn,en,nn=function(t){return"number"===typeof t?"number:"+q(t):"string:"+t},rn=function(t){if(t.isLeafNode()){var e=t.val();Object(o["assert"])("string"===typeof e||"number"===typeof e||"object"===typeof e&&Object(o["contains"])(e,".sv"),"Priority must be a string or number.")}else Object(o["assert"])(t===xe||t.isEmpty(),"priority of unexpected type.");Object(o["assert"])(t===xe||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},on=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o["assert"])(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),rn(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ze},set:function(t){Ze=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _e(e)?this:".priority"===fe(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=fe(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o["assert"])(".priority"!==r||1===de(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(pe(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+nn(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?q(this.value_):this.value_,this.lazyHash_=b(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o["assert"])(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o["assert"])(i>=0,"Unknown leaf type: "+n),Object(o["assert"])(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();function an(t){tn=t}function sn(t){en=t}var un,cn,ln=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["c"])(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?D(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Be.MIN},e.prototype.maxPost=function(){return new Be(R,new on("[PRIORITY-POST]",en))},e.prototype.makePost=function(t,e){var n=tn(t);return new Be(e,new on("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ke),hn=new ln,fn=Math.log(2),dn=function(){function t(t){var e=function(t){return parseInt(Math.log(t)/fn,10)},n=function(t){return parseInt(Array(t+1).join("1"),2)};this.count=e(t+1),this.current_=this.count-1;var r=n(this.count);this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),pn=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new ze(a,o.node,ze.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new ze(a,o.node,ze.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new ze(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,ze.BLACK):(s(h,ze.BLACK),s(h,ze.RED))}return o},a=new dn(t.length),s=o(a);return new Qe(r||e,s)},vn={},gn=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o["assert"])(vn&&hn,"ChildrenNode.ts has not been loaded"),un=un||new t({".priority":vn},{".priority":hn}),un},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o["safeGet"])(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Qe?e:null},t.prototype.hasIndex=function(t){return Object(o["contains"])(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o["assert"])(e!==He,"KeyIndex always exists and isn't meant to be added to the IndexMap.");var r,i=[],s=!1,u=n.getIterator(Be.Wrap),c=u.getNext();while(c)s=s||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=s?pn(i,e.getCompare()):vn;var l=e.toString(),h=Object(a["a"])({},this.indexSet_);h[l]=e;var f=Object(a["a"])({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this,i=Object(o["map"])(this.indexes_,(function(t,i){var a=Object(o["safeGet"])(r.indexSet_,i);if(Object(o["assert"])(a,"Missing index implementation for "+i),t===vn){if(a.isDefinedOn(e.node)){var s=[],u=n.getIterator(Be.Wrap),c=u.getNext();while(c)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),pn(s,a.getCompare())}return vn}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Be(e.name,l))),h.insert(e,e.node)}));return new t(i,this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){var r=Object(o["map"])(this.indexes_,(function(t){if(t===vn)return t;var r=n.get(e.name);return r?t.remove(new Be(e.name,r)):t}));return new t(r,this.indexSet_)},t}(),yn=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&rn(this.priorityNode_),this.children_.isEmpty()&&Object(o["assert"])(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return cn||(cn=new t(new Qe(Xe),null,gn.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||cn},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?cn:e},t.prototype.getChild=function(t){var e=fe(t);return null===e?this:this.getImmediateChild(e).getChild(pe(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o["assert"])(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Be(e,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?cn:this.priorityNode_;return new t(i,s,a)},t.prototype.updateChild=function(t,e){var n=fe(t);if(null===n)return e;Object(o["assert"])(".priority"!==fe(t)||1===de(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pe(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(hn,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+nn(this.getPriority().val())+":"),this.forEachChild(hn,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":b(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Be(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Be(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Be(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));var r=this.children_.getIteratorFrom(t.name,Be.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)<0)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));var r=this.children_.getReverseIteratorFrom(t.name,Be.Wrap),i=r.peek();while(null!=i&&e.compare(i,t)>0)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===bn?-1:0},t.prototype.withIndex=function(e){if(e===He||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===He||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){var n=this.getIterator(hn),r=e.getIterator(hn),i=n.getNext(),o=r.getNext();while(i&&o){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===He?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),mn=function(t){function e(){return t.call(this,new Qe(Xe),yn.EMPTY_NODE,gn.Default)||this}return Object(a["c"])(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return yn.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(yn),bn=new mn;Object.defineProperties(Be,{MIN:{value:new Be(P,yn.EMPTY_NODE)},MAX:{value:new Be(R,bn)}}),We.__EMPTY_NODE=yn.EMPTY_NODE,on.__childrenNodeConstructor=yn,Je(bn),sn(bn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _n=!0;function wn(t,e){if(void 0===e&&(e=null),null===t)return yn.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),Object(o["assert"])(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t){var n=t;return new on(n,wn(e))}if(t instanceof Array||!_n){var r=yn.EMPTY_NODE;return U(t,(function(e,n){if(Object(o["contains"])(t,e)&&"."!==e.substring(0,1)){var i=wn(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(e,i))}})),r.updatePriority(wn(e))}var i=[],a=!1,s=t;if(U(s,(function(t,e){if("."!==t.substring(0,1)){var n=wn(e);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Be(t,n)))}})),0===i.length)return yn.EMPTY_NODE;var u=pn(i,Ye,(function(t){return t.name}),Xe);if(a){var c=pn(i,hn.getCompare());return new yn(u,wn(e),new gn({".priority":c},{".priority":hn}))}return new yn(u,wn(e),gn.Default)}an(wn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var In=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o["assert"])(!_e(e)&&".priority"!==fe(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(a["c"])(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?D(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=wn(t),r=yn.EMPTY_NODE.updateChild(this.indexPath_,n);return new Be(e,r)},e.prototype.maxPost=function(){var t=yn.EMPTY_NODE.updateChild(this.indexPath_,bn);return new Be(R,t)},e.prototype.toString=function(){return ye(this.indexPath_,0).join("/")},e}(Ke),Tn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["c"])(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?D(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Be.MIN},e.prototype.maxPost=function(){return Be.MAX},e.prototype.makePost=function(t,e){var n=wn(t);return new Be(e,n)},e.prototype.toString=function(){return".value"},e}(Ke),En=new Tn,Sn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",On="-",Cn="z",kn=786,An=function(){var t=0,e=[];return function(n){var r,i=n===t;t=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Sn.charAt(n%64),n=Math.floor(n/64);Object(o["assert"])(0===n,"Cannot push at time == 0");var s=a.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=Sn.charAt(e[r]);return Object(o["assert"])(20===s.length,"nextPushId: Length should be 20."),s}}(),Nn=function(t){if(t===""+G)return On;var e=z(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<kn)return n.push(On),n.join("");var i=n.length-1;while(i>=0&&n[i]===Cn)i--;if(-1===i)return R;var o=n[i],a=Sn.charAt(Sn.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},xn=function(t){if(t===""+H)return P;var e=z(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return n[n.length-1]===On?1===n.length?""+G:(delete n[n.length-1],n.join("")):(n[n.length-1]=Sn.charAt(Sn.indexOf(n[n.length-1])-1),n.join("")+Cn.repeat(kn-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pn(t){return{type:"value",snapshotNode:t}}function Rn(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Dn(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function jn(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Ln(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,a){Object(o["assert"])(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(Dn(e,s)):Object(o["assert"])(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(Rn(e,n)):a.trackChildChange(jn(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(hn,(function(t,r){e.hasChild(t)||n.trackChildChange(Dn(t,r))})),e.isLeafNode()||e.forEachChild(hn,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(jn(e,r,i))}else n.trackChildChange(Rn(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?yn.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Fn=function(){function t(e){this.indexedFilter_=new Mn(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Be(e,n))||(n=yn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=yn.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(yn.EMPTY_NODE);var i=this;return e.forEachChild(hn,(function(t,e){i.matches(new Be(t,e))||(r=r.updateImmediateChild(t,yn.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Un=function(){function t(t){this.rangedFilter_=new Fn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Be(e,n))||(n=yn.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=yn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=yn.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);var o=0;while(i.hasNext()&&o<this.limit_){var a=i.getNext(),s=void 0;if(s=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!s)break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=e.withIndex(this.index_),r=r.updatePriority(yn.EMPTY_NODE);var u=void 0,c=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;var f=!1;while(i.hasNext()){a=i.getNext();!f&&l(u,a)<=0&&(f=!0);s=f&&o<this.limit_&&l(a,c)<=0;s?o++:r=r.updateImmediateChild(a.name,yn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;Object(o["assert"])(u.numChildren()===this.limit_,"");var c=new Be(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);while(null!=d&&(d.name===e||u.hasChild(d.name)))d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c),v=h&&!n.isEmpty()&&p>=0;if(v)return null!=i&&i.trackChildChange(jn(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Dn(e,f));var g=u.updateImmediateChild(e,yn.EMPTY_NODE),y=null!=d&&this.rangedFilter_.matches(d);return y?(null!=i&&i.trackChildChange(Rn(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(Dn(l.name,l.node)),i.trackChildChange(Rn(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,yn.EMPTY_NODE)):t},t}(),qn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hn}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o["assert"])(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o["assert"])(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:P},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o["assert"])(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o["assert"])(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:R},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o["assert"])(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===hn},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t){return t.loadsAllData()?new Mn(t.getIndex()):t.hasLimit()?new Un(t):new Fn(t)}function Bn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Kn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Wn(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Hn(t,e,n){var r;if(t.index_===He)"string"===typeof e&&(e=Nn(e)),r=Wn(t,e,n);else{var i=void 0;i=null==n?R:Nn(n),r=Wn(t,e,i)}return r.startAfterSet_=!0,r}function Gn(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function zn(t,e,n){var r,i;return t.index_===He?("string"===typeof e&&(e=xn(e)),i=Gn(t,e,n)):(r=null==n?P:xn(n),i=Gn(t,e,r)),i.endBeforeSet_=!0,i}function $n(t,e){var n=t.copy();return n.index_=e,n}function Qn(t){var e,n={};return t.isDefault()||(t.index_===hn?e="$priority":t.index_===En?e="$value":t.index_===He?e="$key":(Object(o["assert"])(t.index_ instanceof In,"Unrecognized index type!"),e=t.index_.toString()),n["orderBy"]=Object(o["stringify"])(e),t.startSet_&&(n["startAt"]=Object(o["stringify"])(t.indexStartValue_),t.startNameSet_&&(n["startAt"]+=","+Object(o["stringify"])(t.indexStartName_))),t.endSet_&&(n["endAt"]=Object(o["stringify"])(t.indexEndValue_),t.endNameSet_&&(n["endAt"]+=","+Object(o["stringify"])(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n["limitToFirst"]=t.limit_:n["limitToLast"]=t.limit_)),n}function Yn(t){var e={};if(t.startSet_&&(e["sp"]=t.indexStartValue_,t.startNameSet_&&(e["sn"]=t.indexStartName_)),t.endSet_&&(e["ep"]=t.indexEndValue_,t.endNameSet_&&(e["en"]=t.indexEndName_)),t.limitSet_){e["l"]=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e["vf"]=n}return t.index_!==hn&&(e["i"]=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=S("p:rest:"),o.listens_={},o}return Object(a["c"])(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o["assert"])(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var a=this,s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Qn(t._queryParams);this.restRequest_(s+".json",l,(function(t,e){var n,l=e;(404===t&&(l=null,t=null),null===t&&a.onDataUpdate_(s,l,!1,r),Object(o["safeGet"])(a.listens_,u)===c)&&(n=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(n,null))}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Qn(t._queryParams),r=t._path.toString(),i=new o["Deferred"];return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e["format"]="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var s=Object(a["e"])(i,2),u=s[0],c=s[1];u&&u.accessToken&&(e["auth"]=u.accessToken),c&&c.token&&(e["ac"]=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o["querystring"])(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(o["jsonEval"])(h.responseText)}catch(e){k("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&k("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()}))},e}(oe),Jn=function(){function t(){this.rootNode_=yn.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Zn(){return{value:null,children:new Map}}function tr(t,e,n){if(_e(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=fe(e);t.children.has(r)||t.children.set(r,Zn());var i=t.children.get(r);e=pe(e),tr(i,e,n)}}function er(t,e){if(_e(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(hn,(function(e,n){tr(t,new le(e),n)})),er(t,e)}if(t.children.size>0){var r=fe(e);if(e=pe(e),t.children.has(r)){var i=er(t.children.get(r),e);i&&t.children.delete(r)}return 0===t.children.size}return!0}function nr(t,e,n){null!==t.value?n(e,t.value):rr(t,(function(t,r){var i=new le(e.toString()+"/"+t);nr(r,i,n)}))}function rr(t,e){t.children.forEach((function(t,n){e(n,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ir,or=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(a["a"])({},t);return this.last_&&U(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),ar=1e4,sr=3e4,ur=3e5,cr=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new or(t);var n=ar+(sr-ar)*Math.random();Y(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;U(e,(function(e,i){i>0&&Object(o["contains"])(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Y(this.reportStats_.bind(this),Math.floor(2*Math.random()*ur))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){t.statsToReport_[e]=!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fr(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dr(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t){t[t["OVERWRITE"]=0]="OVERWRITE",t[t["MERGE"]=1]="MERGE",t[t["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",t[t["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(ir||(ir={}));var pr,vr=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ir.ACK_USER_WRITE,this.source=hr()}return t.prototype.operationForChild=function(e){if(_e(this.path)){if(null!=this.affectedTree.value)return Object(o["assert"])(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new le(e));return new t(he(),n,this.revert)}return Object(o["assert"])(fe(this.path)===e,"operationForChild called for unrelated child."),new t(pe(this.path),this.affectedTree,this.revert)},t}(),gr=function(){function t(t,e){this.source=t,this.path=e,this.type=ir.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _e(this.path)?new t(this.source,he()):new t(this.source,pe(this.path))},t}(),yr=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ir.OVERWRITE}return t.prototype.operationForChild=function(e){return _e(this.path)?new t(this.source,he(),this.snap.getImmediateChild(e)):new t(this.source,pe(this.path),this.snap)},t}(),mr=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ir.MERGE}return t.prototype.operationForChild=function(e){if(_e(this.path)){var n=this.children.subtree(new le(e));return n.isEmpty()?null:n.value?new yr(this.source,he(),n.value):new t(this.source,he(),n)}return Object(o["assert"])(fe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,pe(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),br=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_e(t))return this.isFullyInitialized()&&!this.filtered_;var e=fe(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),_r=function(){function t(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}return t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(Ln(e.childName,e.snapshotNode))})),Ir(t,i,"child_removed",e,r,n),Ir(t,i,"child_added",e,r,n),Ir(t,i,"child_moved",o,r,n),Ir(t,i,"child_changed",e,r,n),Ir(t,i,"value",e,r,n),i}function Ir(t,e,n,r,i,o){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return Er(t,e,n)})),a.forEach((function(n){var r=Tr(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Tr(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Er(t,e,n){if(null==e.childName||null==n.childName)throw Object(o["assertionError"])("Should only compare child_ events.");var r=new Be(e.childName,e.snapshotNode),i=new Be(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,e){return{eventCache:t,serverCache:e}}function Or(t,e,n,r){return Sr(new br(e,n,r),t.serverCache)}function Cr(t,e,n,r){return Sr(t.eventCache,new br(e,n,r))}function kr(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ar(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nr=function(){return pr||(pr=new Qe(j)),pr},xr=function(){function t(t,e){void 0===e&&(e=Nr()),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return U(e,(function(t,e){n=n.set(new le(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:he(),value:this.value};if(_e(t))return null;var n=fe(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pe(t),e);if(null!=i){var o=be(new le(n),i.path);return{path:o,value:i.value}}return null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(_e(e))return this;var n=fe(e),r=this.children.get(n);return null!==r?r.subtree(pe(e)):new t(null)},t.prototype.set=function(e,n){if(_e(e))return new t(n,this.children);var r=fe(e),i=this.children.get(r)||new t(null),o=i.set(pe(e),n),a=this.children.insert(r,o);return new t(this.value,a)},t.prototype.remove=function(e){if(_e(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=fe(e),r=this.children.get(n);if(r){var i=r.remove(pe(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_e(t))return this.value;var e=fe(t),n=this.children.get(e);return n?n.get(pe(t)):null},t.prototype.setTree=function(e,n){if(_e(e))return n;var r=fe(e),i=this.children.get(r)||new t(null),o=i.setTree(pe(e),n),a=void 0;return a=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,a)},t.prototype.fold=function(t){return this.fold_(he(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(be(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,he(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_e(t))return null;var i=fe(t),o=this.children.get(i);return o?o.findOnPath_(pe(t),be(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,he(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_e(e))return this;this.value&&r(n,this.value);var i=fe(e),o=this.children.get(i);return o?o.foreachOnPath_(pe(e),be(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(he(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(be(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Pr=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new xr(null))},t}();function Rr(t,e,n){if(_e(e))return new Pr(new xr(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=we(i,e);return o=o.updateChild(a,n),new Pr(t.writeTree_.set(i,o))}var s=new xr(n),u=t.writeTree_.setTree(e,s);return new Pr(u)}function Dr(t,e,n){var r=t;return U(n,(function(t,n){r=Rr(r,be(e,t),n)})),r}function jr(t,e){if(_e(e))return Pr.empty();var n=t.writeTree_.setTree(e,new xr(null));return new Pr(n)}function Lr(t,e){return null!=Mr(t,e)}function Mr(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(we(n.path,e)):null}function Fr(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(hn,(function(t,n){e.push(new Be(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Be(t,n.value))})),e}function Ur(t,e){if(_e(e))return t;var n=Mr(t,e);return new Pr(null!=n?new xr(n):t.writeTree_.subtree(e))}function qr(t){return t.writeTree_.isEmpty()}function Vr(t,e){return Br(he(),t.writeTree_,e)}function Br(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(Object(o["assert"])(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Br(be(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(be(t,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,e){return fi(e,t)}function Wr(t,e,n,r,i){Object(o["assert"])(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Rr(t.visibleWrites,e,n)),t.lastWriteId=r}function Hr(t,e,n,r){Object(o["assert"])(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Dr(t.visibleWrites,e,n),t.lastWriteId=r}function Gr(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}function zr(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Object(o["assert"])(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);var i=r.visible,a=!1,s=t.allWrites.length-1;while(i&&s>=0){var u=t.allWrites[s];u.visible&&(s>=n&&$r(u,r.path)?i=!1:Ee(r.path,u.path)&&(a=!0)),s--}if(i){if(a)return Qr(t),!0;if(r.snap)t.visibleWrites=jr(t.visibleWrites,r.path);else{var c=r.children;U(c,(function(e){t.visibleWrites=jr(t.visibleWrites,be(r.path,e))}))}return!0}return!1}function $r(t,e){if(t.snap)return Ee(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ee(be(t.path,n),e))return!0;return!1}function Qr(t){t.visibleWrites=Xr(t.allWrites,Yr,he()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Yr(t){return t.visible}function Xr(t,e,n){for(var r=Pr.empty(),i=0;i<t.length;++i){var a=t[i];if(e(a)){var s=a.path,u=void 0;if(a.snap)Ee(n,s)?(u=we(n,s),r=Rr(r,u,a.snap)):Ee(s,n)&&(u=we(s,n),r=Rr(r,he(),a.snap.getChild(u)));else{if(!a.children)throw Object(o["assertionError"])("WriteRecord should have .snap or .children");if(Ee(n,s))u=we(n,s),r=Dr(r,u,a.children);else if(Ee(s,n))if(u=we(s,n),_e(u))r=Dr(r,he(),a.children);else{var c=Object(o["safeGet"])(a.children,fe(u));if(c){var l=c.getChild(pe(u));r=Rr(r,he(),l)}}}}}return r}function Jr(t,e,n,r,i){if(r||i){var o=Ur(t.visibleWrites,e);if(!i&&qr(o))return n;if(i||null!=n||Lr(o,he())){var a=function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ee(t.path,e)||Ee(e,t.path))},s=Xr(t.allWrites,a,e);l=n||yn.EMPTY_NODE;return Vr(s,l)}return null}var u=Mr(t.visibleWrites,e);if(null!=u)return u;var c=Ur(t.visibleWrites,e);if(qr(c))return n;if(null!=n||Lr(c,he())){var l=n||yn.EMPTY_NODE;return Vr(c,l)}return null}function Zr(t,e,n){var r=yn.EMPTY_NODE,i=Mr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(hn,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Ur(t.visibleWrites,e);return n.forEachChild(hn,(function(t,e){var n=Vr(Ur(o,new le(t)),e);r=r.updateImmediateChild(t,n)})),Fr(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}var a=Ur(t.visibleWrites,e);return Fr(a).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}function ti(t,e,n,r,i){Object(o["assert"])(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=be(e,n);if(Lr(t.visibleWrites,a))return null;var s=Ur(t.visibleWrites,a);return qr(s)?i.getChild(n):Vr(s,i.getChild(n))}function ei(t,e,n,r){var i=be(e,n),o=Mr(t.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n)){var a=Ur(t.visibleWrites,i);return Vr(a,r.getNode().getImmediateChild(n))}return null}function ni(t,e){return Mr(t.visibleWrites,e)}function ri(t,e,n,r,i,o,a){var s,u=Ur(t.visibleWrites,e),c=Mr(u,he());if(null!=c)s=c;else{if(null==n)return[];s=Vr(u,n)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[];var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();while(d&&l.length<i)0!==h(d,r)&&l.push(d),d=f.getNext();return l}function ii(){return{visibleWrites:Pr.empty(),allWrites:[],lastWriteId:-1}}function oi(t,e,n,r){return Jr(t.writeTree,t.treePath,e,n,r)}function ai(t,e){return Zr(t.writeTree,t.treePath,e)}function si(t,e,n,r){return ti(t.writeTree,t.treePath,e,n,r)}function ui(t,e){return ni(t.writeTree,be(t.treePath,e))}function ci(t,e,n,r,i,o){return ri(t.writeTree,t.treePath,e,n,r,i,o)}function li(t,e,n){return ei(t.writeTree,t.treePath,e,n)}function hi(t,e){return fi(be(t.treePath,e),t.writeTree)}function fi(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o["assert"])("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o["assert"])(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,jn(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Dn(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Rn(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o["assertionError"])("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,jn(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),pi=function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}(),vi=new pi,gi=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new br(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return li(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ar(this.viewCache_),i=ci(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function yi(t){return{filter:t}}function mi(t,e){Object(o["assert"])(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Object(o["assert"])(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function bi(t,e,n,r,i){var a,s,u=new di;if(n.type===ir.OVERWRITE){var c=n;c.source.fromUser?a=Ti(t,e,c.path,c.snap,r,i,u):(Object(o["assert"])(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered()&&!_e(c.path),a=Ii(t,e,c.path,c.snap,r,i,s,u))}else if(n.type===ir.MERGE){var l=n;l.source.fromUser?a=Si(t,e,l.path,l.children,r,i,u):(Object(o["assert"])(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),a=Ci(t,e,l.path,l.children,r,i,s,u))}else if(n.type===ir.ACK_USER_WRITE){var h=n;a=h.revert?Ni(t,e,h.path,r,i,u):ki(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ir.LISTEN_COMPLETE)throw Object(o["assertionError"])("Unknown operation type: "+n.type);a=Ai(t,e,n.path,r,u)}var f=u.getChanges();return _i(e,a,f),{viewCache:a,changes:f}}function _i(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=kr(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Pn(kr(e)))}}function wi(t,e,n,r,i,a){var s=e.eventCache;if(null!=ui(r,n))return e;var u=void 0,c=void 0;if(_e(n))if(Object(o["assert"])(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Ar(e),h=l instanceof yn?l:yn.EMPTY_NODE,f=ai(r,h);u=t.filter.updateFullNode(e.eventCache.getNode(),f,a)}else{var d=oi(r,Ar(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,a)}else{var p=fe(n);if(".priority"===p){Object(o["assert"])(1===de(n),"Can't have a priority with additional path components");var v=s.getNode();c=e.serverCache.getNode();var g=si(r,n,v,c);u=null!=g?t.filter.updatePriority(v,g):s.getNode()}else{var y=pe(n),m=void 0;if(s.isCompleteForChild(p)){c=e.serverCache.getNode();var b=si(r,n,s.getNode(),c);m=null!=b?s.getNode().getImmediateChild(p).updateChild(y,b):s.getNode().getImmediateChild(p)}else m=li(r,p,e.serverCache);u=null!=m?t.filter.updateChild(s.getNode(),p,m,y,i,a):s.getNode()}}return Or(e,u,s.isFullyInitialized()||_e(n),t.filter.filtersNodes())}function Ii(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(_e(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=fe(n);if(!c.isCompleteForPath(n)&&de(n)>1)return e;var d=pe(n),p=c.getNode().getImmediateChild(f),v=p.updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),v):l.updateChild(c.getNode(),f,v,d,vi,null)}var g=Cr(e,u,c.isFullyInitialized()||_e(n),l.filtersNodes()),y=new gi(i,g,o);return wi(t,g,n,i,y,s)}function Ti(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new gi(i,e,o);if(_e(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=Or(e,u,!0,t.filter.filtersNodes());else{var h=fe(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=Or(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=pe(n),d=c.getNode().getImmediateChild(h),p=void 0;if(_e(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===ve(f)&&v.getChild(me(f)).isEmpty()?v:v.updateChild(f,r):yn.EMPTY_NODE}if(d.equals(p))s=e;else{var g=t.filter.updateChild(c.getNode(),h,p,f,l,a);s=Or(e,g,c.isFullyInitialized(),t.filter.filtersNodes())}}}return s}function Ei(t,e){return t.eventCache.isCompleteForChild(e)}function Si(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=be(n,r);Ei(e,fe(c))&&(s=Ti(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=be(n,r);Ei(e,fe(c))||(s=Ti(t,s,c,u,i,o,a))})),s}function Oi(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function Ci(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_e(n)?r:new xr(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=e.serverCache.getNode().getImmediateChild(n),h=Oi(t,u,r);c=Ii(t,c,new le(n),h,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=e.serverCache.getNode().getImmediateChild(n),f=Oi(t,h,r);c=Ii(t,c,new le(n),f,i,o,a,s)}})),c}function ki(t,e,n,r,i,o,a){if(null!=ui(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_e(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ii(t,e,n,u.getNode().getChild(n),i,o,s,a);if(_e(n)){var c=new xr(null);return u.getNode().forEachChild(He,(function(t,e){c=c.set(new le(t),e)})),Ci(t,e,n,c,i,o,s,a)}return e}var l=new xr(null);return r.foreach((function(t,e){var r=be(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),Ci(t,e,n,l,i,o,s,a)}function Ai(t,e,n,r,i){var o=e.serverCache,a=Cr(e,o.getNode(),o.isFullyInitialized()||_e(n),o.isFiltered());return wi(t,a,n,r,vi,i)}function Ni(t,e,n,r,i,a){var s;if(null!=ui(r,n))return e;var u=new gi(r,e,i),c=e.eventCache.getNode(),l=void 0;if(_e(n)||".priority"===fe(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=oi(r,Ar(e));else{var f=e.serverCache.getNode();Object(o["assert"])(f instanceof yn,"serverChildren would be complete if leaf node"),h=ai(r,f)}h=h,l=t.filter.updateFullNode(c,h,a)}else{var d=fe(n),p=li(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),l=null!=p?t.filter.updateChild(c,d,p,pe(n),u,a):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,yn.EMPTY_NODE,pe(n),u,a):c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=oi(r,Ar(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,a)))}return s=e.serverCache.isFullyInitialized()||null!=ui(r,he()),Or(e,l,s,t.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xi,Pi=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new Mn(n.getIndex()),i=Vn(n);this.processor_=yi(i);var o=e.serverCache,a=e.eventCache,s=r.updateFullNode(yn.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(yn.EMPTY_NODE,a.getNode(),null),c=new br(s,o.isFullyInitialized(),r.filtersNodes()),l=new br(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Sr(l,c),this.eventGenerator_=new _r(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Ri(t){return t.viewCache_.serverCache.getNode()}function Di(t){return kr(t.viewCache_)}function ji(t,e){var n=Ar(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_e(e)&&!n.getImmediateChild(fe(e)).isEmpty())?n.getChild(e):null}function Li(t){return 0===t.eventRegistrations_.length}function Mi(t,e){t.eventRegistrations_.push(e)}function Fi(t,e,n){var r=[];if(n){Object(o["assert"])(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var a=[],s=0;s<t.eventRegistrations_.length;++s){var u=t.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(s+1));break}}else a.push(u)}t.eventRegistrations_=a}else t.eventRegistrations_=[];return r}function Ui(t,e,n,r){e.type===ir.MERGE&&null!==e.source.queryId&&(Object(o["assert"])(Ar(t.viewCache_),"We should always have a full cache before handling merges"),Object(o["assert"])(kr(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_,a=bi(t.processor_,i,e,n,r);return mi(t.processor_,a.viewCache),Object(o["assert"])(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,Vi(t,a.changes,a.viewCache.eventCache.getNode(),null)}function qi(t,e){var n=t.viewCache_.eventCache,r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(hn,(function(t,e){r.push(Rn(t,e))}))}return n.isFullyInitialized()&&r.push(Pn(n.getNode())),Vi(t,r,n.getNode(),e)}function Vi(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return wr(t.eventGenerator_,e,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bi,Ki=function(){function t(){this.views=new Map}return t}();function Wi(t){Object(o["assert"])(!xi,"__referenceConstructor has already been defined"),xi=t}function Hi(){return Object(o["assert"])(xi,"Reference.ts has not been loaded"),xi}function Gi(t){return 0===t.views.size}function zi(t,e,n,r){var i,s,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o["assert"])(null!=c,"SyncTree gave us an op for an invalid query."),Ui(c,e,n,r)}var l=[];try{for(var h=Object(a["g"])(t.views.values()),f=h.next();!f.done;f=h.next()){c=f.value;l=l.concat(Ui(c,e,n,r))}}catch(d){i={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}function $i(t,e,n,r,i){var o=e._queryIdentifier,a=t.views.get(o);if(!a){var s=oi(n,i?r:null),u=!1;s?u=!0:r instanceof yn?(s=ai(n,r),u=!1):(s=yn.EMPTY_NODE,u=!1);var c=Sr(new br(s,u,!1),new br(r,i,!1));return new Pi(e,c)}return a}function Qi(t,e,n,r,i,o){var a=$i(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),Mi(a,n),qi(a,n)}function Yi(t,e,n,r){var i,o,s=e._queryIdentifier,u=[],c=[],l=eo(t);if("default"===s)try{for(var h=Object(a["g"])(t.views.entries()),f=h.next();!f.done;f=h.next()){var d=Object(a["e"])(f.value,2),p=d[0],v=d[1];c=c.concat(Fi(v,n,r)),Li(v)&&(t.views.delete(p),v.query._queryParams.loadsAllData()||u.push(v.query))}}catch(g){i={error:g}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else{v=t.views.get(s);v&&(c=c.concat(Fi(v,n,r)),Li(v)&&(t.views.delete(s),v.query._queryParams.loadsAllData()||u.push(v.query)))}return l&&!eo(t)&&u.push(new(Hi())(e._repo,e._path)),{removed:u,events:c}}function Xi(t){var e,n,r=[];try{for(var i=Object(a["g"])(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Ji(t,e){var n,r,i=null;try{for(var o=Object(a["g"])(t.views.values()),s=o.next();!s.done;s=o.next()){var u=s.value;i=i||ji(u,e)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Zi(t,e){var n=e._queryParams;if(n.loadsAllData())return no(t);var r=e._queryIdentifier;return t.views.get(r)}function to(t,e){return null!=Zi(t,e)}function eo(t){return null!=no(t)}function no(t){var e,n;try{for(var r=Object(a["g"])(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){Object(o["assert"])(!Bi,"__referenceConstructor has already been defined"),Bi=t}function io(){return Object(o["assert"])(Bi,"Reference.ts has not been loaded"),Bi}var oo=1,ao=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new xr(null),this.pendingWriteTree_=ii(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t}();function so(t,e,n,r,i){return Wr(t.pendingWriteTree_,e,n,r,i),i?wo(t,new yr(hr(),e,n)):[]}function uo(t,e,n,r){Hr(t.pendingWriteTree_,e,n,r);var i=xr.fromObject(n);return wo(t,new mr(hr(),e,i))}function co(t,e,n){void 0===n&&(n=!1);var r=Gr(t.pendingWriteTree_,e),i=zr(t.pendingWriteTree_,e);if(i){var o=new xr(null);return null!=r.snap?o=o.set(he(),!0):U(r.children,(function(t){o=o.set(new le(t),!0)})),wo(t,new vr(r.path,o,n))}return[]}function lo(t,e,n){return wo(t,new yr(fr(),e,n))}function ho(t,e,n){var r=xr.fromObject(n);return wo(t,new mr(fr(),e,r))}function fo(t,e){return wo(t,new gr(fr(),e))}function po(t,e,n){var r=Co(t,n);if(r){var i=ko(r),o=i.path,a=i.queryId,s=we(o,e),u=new gr(dr(a),s);return Ao(t,o,u)}return[]}function vo(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||to(o,e))){var s=Yi(o,e,n,r);Gi(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),l=t.syncPointTree_.findOnPath(i,(function(t,e){return eo(e)}));if(c&&!l){var h=t.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=No(h),d=0;d<f.length;++d){var p=f[d],v=p.query,g=Eo(t,p);t.listenProvider_.startListening(xo(v),So(t,v),g.hashFn,g.onComplete)}}if(!l&&u.length>0&&!r)if(c){var y=null;t.listenProvider_.stopListening(xo(e),y)}else u.forEach((function(e){var n=t.queryToTagMap.get(Oo(e));t.listenProvider_.stopListening(xo(e),n)}));Po(t,u)}return a}function go(t,e,n,r){var i=Co(t,r);if(null!=i){var o=ko(i),a=o.path,s=o.queryId,u=we(a,e),c=new yr(dr(s),u,n);return Ao(t,a,c)}return[]}function yo(t,e,n,r){var i=Co(t,r);if(i){var o=ko(i),a=o.path,s=o.queryId,u=we(a,e),c=xr.fromObject(n),l=new mr(dr(s),u,c);return Ao(t,a,l)}return[]}function mo(t,e,n){var r=e._path,i=null,a=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=we(t,r);i=i||Ji(e,n),a=a||eo(e)}));var s,u=t.syncPointTree_.get(r);if(u?(a=a||eo(u),i=i||Ji(u,he())):(u=new Ki,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i)s=!0;else{s=!1,i=yn.EMPTY_NODE;var c=t.syncPointTree_.subtree(r);c.foreachChild((function(t,e){var n=Ji(e,he());n&&(i=i.updateImmediateChild(t,n))}))}var l=to(u,e);if(!l&&!e._queryParams.loadsAllData()){var h=Oo(e);Object(o["assert"])(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=Ro();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}var d=Kr(t.pendingWriteTree_,r),p=Qi(u,e,n,d,i,s);if(!l&&!a){var v=Zi(u,e);p=p.concat(Do(t,e,v))}return p}function bo(t,e,n){var r=!0,i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(function(t,n){var r=we(t,e),i=Ji(n,r);if(i)return i}));return Jr(i,e,o,n,r)}function _o(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=we(t,n);r=r||Ji(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||Ji(i,he()):(i=new Ki,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new br(r,!0,!1):null,s=Kr(t.pendingWriteTree_,e._path),u=$i(i,e,s,o?a.getNode():yn.EMPTY_NODE,o);return Di(u)}function wo(t,e){return Io(e,t.syncPointTree_,null,Kr(t.pendingWriteTree_,he()))}function Io(t,e,n,r){if(_e(t.path))return To(t,e,n,r);var i=e.get(he());null==n&&null!=i&&(n=Ji(i,he()));var o=[],a=fe(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=hi(r,a);o=o.concat(Io(s,u,c,l))}return i&&(o=o.concat(zi(i,t,r,n))),o}function To(t,e,n,r){var i=e.get(he());null==n&&null!=i&&(n=Ji(i,he()));var o=[];return e.children.inorderTraversal((function(e,i){var a=n?n.getImmediateChild(e):null,s=hi(r,e),u=t.operationForChild(e);u&&(o=o.concat(To(u,i,a,s)))})),i&&(o=o.concat(zi(i,t,r,n))),o}function Eo(t,e){var n=e.query,r=So(t,n);return{hashFn:function(){var t=Ri(e)||yn.EMPTY_NODE;return t.hash()},onComplete:function(e){if("ok"===e)return r?po(t,n._path,r):fo(t,n._path);var i=K(e,n);return vo(t,n,null,i)}}}function So(t,e){var n=Oo(e);return t.queryToTagMap.get(n)}function Oo(t){return t._path.toString()+"$"+t._queryIdentifier}function Co(t,e){return t.tagToQueryMap.get(e)}function ko(t){var e=t.indexOf("$");return Object(o["assert"])(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new le(t.substr(0,e))}}function Ao(t,e,n){var r=t.syncPointTree_.get(e);Object(o["assert"])(r,"Missing sync point for query tag that we're tracking");var i=Kr(t.pendingWriteTree_,e);return zi(r,n,i,null)}function No(t){return t.fold((function(t,e,n){if(e&&eo(e)){var r=no(e);return[r]}var i=[];return e&&(i=Xi(e)),U(n,(function(t,e){i=i.concat(e)})),i}))}function xo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(io())(t._repo,t._path):t}function Po(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=Oo(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function Ro(){return oo++}function Do(t,e,n){var r=e._path,i=So(t,e),a=Eo(t,n),s=t.listenProvider_.startListening(xo(e),i,a.hashFn,a.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o["assert"])(!eo(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!_e(t)&&e&&eo(e))return[no(e).query];var r=[];return e&&(r=r.concat(Xi(e).map((function(t){return t.query})))),U(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(xo(h),So(t,h))}return s}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jo=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){var n=this.node_.getImmediateChild(e);return new t(n)},t.prototype.node=function(){return this.node_},t}(),Lo=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=be(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return bo(this.syncTree_,this.path_)},t}(),Mo=function(t){return t=t||{},t["timestamp"]=t["timestamp"]||(new Date).getTime(),t},Fo=function(t,e,n){return t&&"object"===typeof t?(Object(o["assert"])(".sv"in t,"Unexpected leaf node or priority contents"),"string"===typeof t[".sv"]?Uo(t[".sv"],e,n):"object"===typeof t[".sv"]?qo(t[".sv"],e):void Object(o["assert"])(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Uo=function(t,e,n){switch(t){case"timestamp":return n["timestamp"];default:Object(o["assert"])(!1,"Unexpected server value: "+t)}},qo=function(t,e,n){t.hasOwnProperty("increment")||Object(o["assert"])(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t["increment"];"number"!==typeof r&&Object(o["assert"])(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o["assert"])(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i,s=a.getValue();return"number"!==typeof s?r:s+r},Vo=function(t,e,n,r){return Ko(e,new Lo(n,t),r)},Bo=function(t,e,n){return Ko(t,new jo(e),n)};function Ko(t,e,n){var r,i=t.getPriority().val(),o=Fo(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=Fo(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new on(s,wn(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new on(o))),u.forEachChild(hn,(function(t,i){var o=Ko(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wo=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}return t}();function Ho(t,e){var n=e instanceof le?e:new le(e),r=t,i=fe(n);while(null!==i){var a=Object(o["safeGet"])(r.node.children,i)||{children:{},childCount:0};r=new Wo(i,r,a),n=pe(n),i=fe(n)}return r}function Go(t){return t.node.value}function zo(t,e){t.node.value=e,ta(t)}function $o(t){return t.node.childCount>0}function Qo(t){return void 0===Go(t)&&!$o(t)}function Yo(t,e){U(t.node.children,(function(n,r){e(new Wo(n,t,r))}))}function Xo(t,e,n,r){n&&!r&&e(t),Yo(t,(function(t){Xo(t,e,!0,r)})),n&&r&&e(t)}function Jo(t,e,n){var r=n?t:t.parent;while(null!==r){if(e(r))return!0;r=r.parent}return!1}function Zo(t){return new le(null===t.parent?t.name:Zo(t.parent)+"/"+t.name)}function ta(t){null!==t.parent&&ea(t.parent,t.name,t)}function ea(t,e,n){var r=Qo(n),i=Object(o["contains"])(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,ta(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,ta(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var na=/[\[\].#$\/\u0000-\u001F\u007F]/,ra=/[\[\].#$\u0000-\u001F\u007F]/,ia=10485760,oa=function(t){return"string"===typeof t&&0!==t.length&&!na.test(t)},aa=function(t){return"string"===typeof t&&0!==t.length&&!ra.test(t)},sa=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),aa(t)},ua=function(t){return null===t||"string"===typeof t||"number"===typeof t&&!N(t)||t&&"object"===typeof t&&Object(o["contains"])(t,".sv")},ca=function(t,e,n,r){r&&void 0===e||la(Object(o["errorPrefix"])(t,"value"),e,n)},la=function(t,e,n){var r=n instanceof le?new Se(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Ae(r));if("function"===typeof e)throw new Error(t+"contains a function "+Ae(r)+" with contents = "+e.toString());if(N(e))throw new Error(t+"contains "+e.toString()+" "+Ae(r));if("string"===typeof e&&e.length>ia/3&&Object(o["stringLength"])(e)>ia)throw new Error(t+"contains a string greater than "+ia+" utf8 bytes "+Ae(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"===typeof e){var i=!1,a=!1;if(U(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(a=!0,!oa(e)))throw new Error(t+" contains an invalid key ("+e+") "+Ae(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');Oe(r,e),la(t,n,r),Ce(r)})),i&&a)throw new Error(t+' contains ".value" child '+Ae(r)+" in addition to actual children.")}},ha=function(t,e){var n,r;for(n=0;n<e.length;n++){r=e[n];for(var i=ye(r),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!oa(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Ie);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&Ee(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},fa=function(t,e,n,r){if(!r||void 0!==e){var i=Object(o["errorPrefix"])(t,"values");if(!e||"object"!==typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var a=[];U(e,(function(t,e){var r=new le(t);if(la(i,e,be(n,r)),".priority"===ve(r)&&!ua(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),ha(i,a)}},da=function(t,e,n){if(!n||void 0!==e){if(N(e))throw new Error(Object(o["errorPrefix"])(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ua(e))throw new Error(Object(o["errorPrefix"])(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pa=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o["errorPrefix"])(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},va=function(t,e,n,r){if((!r||void 0!==n)&&!oa(n))throw new Error(Object(o["errorPrefix"])(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ga=function(t,e,n,r){if((!r||void 0!==n)&&!aa(n))throw new Error(Object(o["errorPrefix"])(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ya=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ga(t,e,n,r)},ma=function(t,e){if(".info"===fe(e))throw new Error(t+" failed = Can't modify data under /.info/")},ba=function(t,e){var n=e.path.toString();if("string"!==typeof e.repoInfo.host||0===e.repoInfo.host.length||!oa(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!sa(n))throw new Error(Object(o["errorPrefix"])(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},_a=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Object(o["errorPrefix"])(t,e)+"must be a boolean.")},wa=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t}();function Ia(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Te(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ta(t,e,n){Ia(t,n),Sa(t,(function(t){return Te(t,e)}))}function Ea(t,e,n){Ia(t,n),Sa(t,(function(t){return Ee(t,e)||Ee(e,t)}))}function Sa(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i){var o=i.path;e(o)?(Oa(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Oa(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();w&&E("event: "+n.toString()),$(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ca="repo_interrupt",ka=25,Aa=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wa,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zn(),this.transactionQueueTree_=new Wo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Na(t,e,n){if(t.stats_=yt(t.repoInfo_),t.forceRestClient_||Q())t.server_=new Xn(t.repoInfo_,(function(e,n,r,i){Ra(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return ja(t,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o["stringify"])(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ve(t.repoInfo_,e,(function(e,n,r,i){Ra(t,e,n,r,i)}),(function(e){ja(t,e)}),(function(e){La(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=mt(t.repoInfo_,(function(){return new cr(t.stats_,t.server_)})),t.infoData_=new Jn,t.infoSyncTree_=new ao({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=lo(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Ma(t,"connected",!1),t.serverSyncTree_=new ao({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Ea(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function xa(t){var e=t.infoData_.getNode(new le(".info/serverTimeOffset")),n=e.val()||0;return(new Date).getTime()+n}function Pa(t){return Mo({timestamp:xa(t)})}function Ra(t,e,n,r,i){t.dataUpdateCount++;var a=new le(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(i)if(r){var u=Object(o["map"])(n,(function(t){return wn(t)}));s=yo(t.serverSyncTree_,a,u,i)}else{var c=wn(n);s=go(t.serverSyncTree_,a,c,i)}else if(r){var l=Object(o["map"])(n,(function(t){return wn(t)}));s=ho(t.serverSyncTree_,a,l)}else{var h=wn(n);s=lo(t.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=os(t,a)),Ea(t.eventQueue_,f,s)}function Da(t,e){t.interceptServerDataCallback_=e}function ja(t,e){Ma(t,"connected",e),!1===e&&Ba(t)}function La(t,e){U(e,(function(e,n){Ma(t,e,n)}))}function Ma(t,e,n){var r=new le("/.info/"+e),i=wn(n);t.infoData_.updateSnapshot(r,i);var o=lo(t.infoSyncTree_,r,i);Ea(t.eventQueue_,r,o)}function Fa(t){return t.nextWriteId_++}function Ua(t,e){var n=_o(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=wn(n).withIndex(e._queryParams.getIndex()),i=lo(t.serverSyncTree_,e._path,r);return Ta(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return Za(t,"get for query "+Object(o["stringify"])(e)+" failed: "+n),Promise.reject(new Error(n))}))}function qa(t,e,n,r,i){Za(t,"set",{path:e.toString(),value:n,priority:r});var o=Pa(t),a=wn(n,r),s=bo(t.serverSyncTree_,e),u=Bo(a,s,o),c=Fa(t),l=so(t.serverSyncTree_,e,u,c,!0);Ia(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||k("set at "+e+" failed: "+n);var a=co(t.serverSyncTree_,c,!o);Ea(t.eventQueue_,e,a),ts(t,i,n,r)}));var h=hs(t,e);os(t,h),Ea(t.eventQueue_,h,[])}function Va(t,e,n,r){Za(t,"update",{path:e.toString(),value:n});var i=!0,o=Pa(t),a={};if(U(n,(function(n,r){i=!1,a[n]=Vo(be(e,n),wn(r),t.serverSyncTree_,o)})),i)E("update() called with empty data.  Don't do anything."),ts(t,r,"ok",void 0);else{var s=Fa(t),u=uo(t.serverSyncTree_,e,a,s);Ia(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||k("update at "+e+" failed: "+n);var a=co(t.serverSyncTree_,s,!o),u=a.length>0?os(t,e):e;Ea(t.eventQueue_,u,a),ts(t,r,n,i)})),U(n,(function(n){var r=hs(t,be(e,n));os(t,r)})),Ea(t.eventQueue_,e,[])}}function Ba(t){Za(t,"onDisconnectEvents");var e=Pa(t),n=Zn();nr(t.onDisconnect_,he(),(function(r,i){var o=Vo(r,i,t.serverSyncTree_,e);tr(n,r,o)}));var r=[];nr(n,he(),(function(e,n){r=r.concat(lo(t.serverSyncTree_,e,n));var i=hs(t,e);os(t,i)})),t.onDisconnect_=Zn(),Ea(t.eventQueue_,he(),r)}function Ka(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&er(t.onDisconnect_,e),ts(t,n,r,i)}))}function Wa(t,e,n,r){var i=wn(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&tr(t.onDisconnect_,e,i),ts(t,r,n,o)}))}function Ha(t,e,n,r,i){var o=wn(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&tr(t.onDisconnect_,e,o),ts(t,i,n,r)}))}function Ga(t,e,n,r){if(Object(o["isEmpty"])(n))return E("onDisconnect().update() called with empty data.  Don't do anything."),void ts(t,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&U(n,(function(n,r){var i=wn(r);tr(t.onDisconnect_,be(e,n),i)})),ts(t,r,i,o)}))}function za(t,e,n){var r;r=".info"===fe(e._path)?mo(t.infoSyncTree_,e,n):mo(t.serverSyncTree_,e,n),Ta(t.eventQueue_,e._path,r)}function $a(t,e,n){var r;r=".info"===fe(e._path)?vo(t.infoSyncTree_,e,n):vo(t.serverSyncTree_,e,n),Ta(t.eventQueue_,e._path,r)}function Qa(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Ca)}function Ya(t){t.persistentConnection_&&t.persistentConnection_.resume(Ca)}function Xa(t,e){if(void 0===e&&(e=!1),"undefined"!==typeof console){var n;e?(t.statsListener_||(t.statsListener_=new or(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);U(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}function Ja(t,e){t.stats_.incrementCounter(e),lr(t.statsReporter_,e)}function Za(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),E.apply(void 0,Object(a["f"])([r],Object(a["e"])(e)))}function ts(t,e,n,r){e&&$((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function es(t,e,n,r,i,a){Za(t,"transaction on "+e);var s={path:e,update:n,onComplete:r,status:null,order:m(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=ns(t,e,void 0);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{la("transaction failed: Data returned ",c,s.path),s.status=0;var l=Ho(t.transactionQueueTree_,e),h=Go(l)||[];h.push(s),zo(l,h);var f=void 0;if("object"===typeof c&&null!==c&&Object(o["contains"])(c,".priority"))f=Object(o["safeGet"])(c,".priority"),Object(o["assert"])(ua(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var d=bo(t.serverSyncTree_,e)||yn.EMPTY_NODE;f=d.getPriority().val()}var p=Pa(t),v=wn(c,f),g=Bo(v,u,p);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=g,s.currentWriteId=Fa(t);var y=so(t.serverSyncTree_,e,g,s.currentWriteId,s.applyLocally);Ea(t.eventQueue_,e,y),rs(t,t.transactionQueueTree_)}}function ns(t,e,n){return bo(t.serverSyncTree_,e,n)||yn.EMPTY_NODE}function rs(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||ls(t,e),Go(e)){var n=us(t,e);Object(o["assert"])(n.length>0,"Sending zero length transaction queue");var r=n.every((function(t){return 0===t.status}));r&&is(t,Zo(e),n)}else $o(e)&&Yo(e,(function(e){rs(t,e)}))}function is(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=ns(t,e,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o["assert"])(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=we(e,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=e;t.server_.put(f.toString(),h,(function(r){Za(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(co(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},s=0;s<n.length;s++)a(s);ls(t,Ho(t.transactionQueueTree_,e)),rs(t,t.transactionQueueTree_),Ea(t.eventQueue_,e,i);for(s=0;s<o.length;s++)$(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{k("transaction at "+f.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}os(t,e)}}),s)}function os(t,e){var n=ss(t,e),r=Zo(n),i=us(t,n);return as(t,i,r),r}function as(t,e,n){if(0!==e.length){for(var r=[],i=[],a=e.filter((function(t){return 0===t.status})),s=a.map((function(t){return t.currentWriteId})),u=function(a){var u,c=e[a],l=we(n,c.path),h=!1;if(Object(o["assert"])(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(co(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=ka)h=!0,u="maxretry",i=i.concat(co(t.serverSyncTree_,c.currentWriteId,!0));else{var f=ns(t,c.path,s);c.currentInputSnapshot=f;var d=e[a].update(f.val());if(void 0!==d){la("transaction failed: Data returned ",d,c.path);var p=wn(d),v="object"===typeof d&&null!=d&&Object(o["contains"])(d,".priority");v||(p=p.updatePriority(f.getPriority()));var g=c.currentWriteId,y=Pa(t),m=Bo(p,f,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=Fa(t),s.splice(s.indexOf(g),1),i=i.concat(so(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally)),i=i.concat(co(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(co(t.serverSyncTree_,c.currentWriteId,!0))}Ea(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(t){setTimeout(t,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&("nodata"===u?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(u),!1,null)}))))},c=0;c<e.length;c++)u(c);ls(t,t.transactionQueueTree_);for(c=0;c<r.length;c++)$(r[c]);rs(t,t.transactionQueueTree_)}}function ss(t,e){var n,r=t.transactionQueueTree_;n=fe(e);while(null!==n&&void 0===Go(r))r=Ho(r,n),e=pe(e),n=fe(e);return r}function us(t,e){var n=[];return cs(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function cs(t,e,n){var r=Go(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Yo(e,(function(e){cs(t,e,n)}))}function ls(t,e){var n=Go(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,zo(e,n.length>0?n:void 0)}Yo(e,(function(e){ls(t,e)}))}function hs(t,e){var n=Zo(ss(t,e)),r=Ho(t.transactionQueueTree_,e);return Jo(r,(function(e){fs(t,e)})),fs(t,r),Xo(r,(function(e){fs(t,e)})),n}function fs(t,e){var n=Go(e);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(Object(o["assert"])(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):(Object(o["assert"])(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(co(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===a?zo(e,void 0):n.length=a+1,Ea(t.eventQueue_,Zo(e),i);for(s=0;s<r.length;s++)$(r[s])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}function ps(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(a["g"])(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):k("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}var vs=function(t,e){var n=gs(t),r=n.namespace;"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||A();var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ht(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new le(n.pathString)}},gs=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"===typeof t){var c=t.indexOf("//");c>=0&&(s=t.substring(0,c-1),t=t.substring(c+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=ds(t.substring(l,h)));var f=ps(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(c+1),10)):c=e.length;var d=e.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f["ns"])}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},ys=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o["stringify"])(this.snapshot.exportVal())},t}(),ms=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),bs=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(o["assert"])(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),_s=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o["Deferred"];return Ka(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){ma("OnDisconnect.remove",this._path);var t=new o["Deferred"];return Wa(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){ma("OnDisconnect.set",this._path),ca("OnDisconnect.set",t,this._path,!1);var e=new o["Deferred"];return Wa(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){ma("OnDisconnect.setWithPriority",this._path),ca("OnDisconnect.setWithPriority",t,this._path,!1),da("OnDisconnect.setWithPriority",e,!1);var n=new o["Deferred"];return Ha(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){ma("OnDisconnect.update",this._path),fa("OnDisconnect.update",t,this._path,!1);var e=new o["Deferred"];return Ga(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),ws=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return _e(this._path)?null:ve(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ss(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Yn(this._queryParams),e=M(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Yn(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(e=Object(o["getModularInstance"])(e),!(e instanceof t))return!1;var n=this._repo===e._repo,r=Te(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+ge(this._path)},t}();function Is(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ts(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===He){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){var a=t.getIndexStartName();if(a!==P)throw new Error(r);if("string"!==typeof e)throw new Error(i)}if(t.hasEnd()){var s=t.getIndexEndName();if(s!==R)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(t.getIndex()===hn){if(null!=e&&!ua(e)||null!=n&&!ua(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o["assert"])(t.getIndex()instanceof In||t.getIndex()===En,"unknown index type."),null!=e&&"object"===typeof e||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Es(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ss=function(t){function e(e,n){return t.call(this,e,n,new qn,!1)||this}return Object(a["c"])(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=me(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var t=this;while(null!==t.parent)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(ws),Os=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new le(e),r=As(this.ref,e);return new t(this._node.getChild(n),r,hn)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;if(this._node.isLeafNode())return!1;var r=this._node;return!!r.forEachChild(this._index,(function(r,i){return e(new t(i,As(n.ref,r),hn))}))},t.prototype.hasChild=function(t){var e=new le(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Cs(t,e){return t=Object(o["getModularInstance"])(t),t._checkNotDeleted("ref"),void 0!==e?As(t._root,e):t._root}function ks(t,e){t=Object(o["getModularInstance"])(t),t._checkNotDeleted("refFromURL");var n=vs(e,t._repo.repoInfo_.nodeAdmin);ba("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Cs(t,n.path.toString())}function As(t,e){return t=Object(o["getModularInstance"])(t),null===fe(t._path)?ya("child","path",e,!1):ga("child","path",e,!1),new Ss(t._repo,be(t._path,e))}function Ns(t,e){t=Object(o["getModularInstance"])(t),ma("push",t._path),ca("push",e,t._path,!0);var n,r=xa(t._repo),i=An(r),a=As(t,i),s=As(t,i);return n=null!=e?Ps(s,e).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function xs(t){return ma("remove",t._path),Ps(t,null)}function Ps(t,e){t=Object(o["getModularInstance"])(t),ma("set",t._path),ca("set",e,t._path,!1);var n=new o["Deferred"];return qa(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Rs(t,e){t=Object(o["getModularInstance"])(t),ma("setPriority",t._path),da("setPriority",e,!1);var n=new o["Deferred"];return qa(t._repo,be(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function Ds(t,e,n){if(ma("setWithPriority",t._path),ca("setWithPriority",e,t._path,!1),da("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o["Deferred"];return qa(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function js(t,e){fa("update",e,t._path,!1);var n=new o["Deferred"];return Va(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function Ls(t){return t=Object(o["getModularInstance"])(t),Ua(t._repo,t).then((function(e){return new Os(e,new Ss(t._repo,t._path),t._queryParams.getIndex())}))}var Ms=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new ys("value",this,new Os(t.snapshotNode,new Ss(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new ms(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Fs=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new ms(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o["assert"])(null!=t.childName,"Child events should have a childName.");var n=As(new Ss(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new ys(t.type,this,new Os(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Us(t,e,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){$a(t._repo,t,c),a(e,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new bs(n,o||void 0),c="value"===e?new Ms(u):new Fs(e,u);return za(t._repo,t,c),function(){return $a(t._repo,t,c)}}function qs(t,e,n,r){return Us(t,"value",e,n,r)}function Vs(t,e,n,r){return Us(t,"child_added",e,n,r)}function Bs(t,e,n,r){return Us(t,"child_changed",e,n,r)}function Ks(t,e,n,r){return Us(t,"child_moved",e,n,r)}function Ws(t,e,n,r){return Us(t,"child_removed",e,n,r)}function Hs(t,e,n){var r=null,i=n?new bs(n):null;"value"===e?r=new Ms(i):e&&(r=new Fs(e,i)),$a(t._repo,t,r)}var Gs=function(){function t(){}return t}(),zs=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a["c"])(e,t),e.prototype._apply=function(t){ca("endAt",this._value,t._path,!0);var e=Gn(t._queryParams,this._value,this._key);if(Es(e),Ts(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ws(t._repo,t._path,e,t._orderByCalled)},e}(Gs);function $s(t,e){return va("endAt","key",e,!0),new zs(t,e)}var Qs=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a["c"])(e,t),e.prototype._apply=function(t){ca("endBefore",this._value,t._path,!1);var e=zn(t._queryParams,this._value,this._key);if(Es(e),Ts(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ws(t._repo,t._path,e,t._orderByCalled)},e}(Gs);function Ys(t,e){return va("endBefore","key",e,!0),new Qs(t,e)}var Xs=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a["c"])(e,t),e.prototype._apply=function(t){ca("startAt",this._value,t._path,!0);var e=Wn(t._queryParams,this._value,this._key);if(Es(e),Ts(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ws(t._repo,t._path,e,t._orderByCalled)},e}(Gs);function Js(t,e){return void 0===t&&(t=null),va("startAt","key",e,!0),new Xs(t,e)}var Zs=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a["c"])(e,t),e.prototype._apply=function(t){ca("startAfter",this._value,t._path,!1);var e=Hn(t._queryParams,this._value,this._key);if(Es(e),Ts(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ws(t._repo,t._path,e,t._orderByCalled)},e}(Gs);function tu(t,e){return va("startAfter","key",e,!0),new Zs(t,e)}var eu=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(a["c"])(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ws(t._repo,t._path,Bn(t._queryParams,this._limit),t._orderByCalled)},e}(Gs);function nu(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new eu(t)}var ru=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(a["c"])(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ws(t._repo,t._path,Kn(t._queryParams,this._limit),t._orderByCalled)},e}(Gs);function iu(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ru(t)}var ou=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(a["c"])(e,t),e.prototype._apply=function(t){Is(t,"orderByChild");var e=new le(this._path);if(_e(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new In(e),r=$n(t._queryParams,n);return Ts(r),new ws(t._repo,t._path,r,!0)},e}(Gs);function au(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ga("orderByChild","path",t,!1),new ou(t)}var su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["c"])(e,t),e.prototype._apply=function(t){Is(t,"orderByKey");var e=$n(t._queryParams,He);return Ts(e),new ws(t._repo,t._path,e,!0)},e}(Gs);function uu(){return new su}var cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["c"])(e,t),e.prototype._apply=function(t){Is(t,"orderByPriority");var e=$n(t._queryParams,hn);return Ts(e),new ws(t._repo,t._path,e,!0)},e}(Gs);function lu(){return new cu}var hu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a["c"])(e,t),e.prototype._apply=function(t){Is(t,"orderByValue");var e=$n(t._queryParams,En);return Ts(e),new ws(t._repo,t._path,e,!0)},e}(Gs);function fu(){return new hu}var du=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a["c"])(e,t),e.prototype._apply=function(t){if(ca("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new zs(this._value,this._key)._apply(new Xs(this._value,this._key)._apply(t))},e}(Gs);function pu(t,e){return va("equalTo","key",e,!0),new du(t,e)}function vu(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=Object(o["getModularInstance"])(t);try{for(var u=Object(a["g"])(r),c=u.next();!c.done;c=u.next()){var l=c.value;s=l._apply(s)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s}Wi(Ss),ro(Ss);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gu="FIREBASE_DATABASE_EMULATOR_HOST",yu={},mu=!1;function bu(t,e,n,r){t.repoInfo_=new ht(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}function _u(e,n,r,i,o){var a=i||e.options.databaseURL;void 0===a&&(e.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),E("Using default host for project ",e.options.projectId),a=e.options.projectId+"-default-rtdb.firebaseio.com");var s,u=vs(a,o),c=u.repoInfo,l=void 0;"undefined"!==typeof t&&(l=Object({NODE_ENV:"production",BASE_URL:"/"})[gu]),l?(s=!0,a="http://"+l+"?ns="+c.namespace,u=vs(a,o),c=u.repoInfo):s=!u.repoInfo.secure;var h=o&&s?new Z(Z.OWNER):new J(e.name,e.options,n);ba("Invalid Firebase Database URL",u),_e(u.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");var f=Iu(c,e,h,new X(e.name,r));return new Eu(f,e)}function wu(t,e){var n=yu[e];n&&n[t.key]===t||C("Database "+e+"("+t.repoInfo_+") has already been deleted."),Qa(t),delete n[t.key]}function Iu(t,e,n,r){var i=yu[e.name];i||(i={},yu[e.name]=i);var o=i[t.toURLString()];return o&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Aa(t,mu,n,r),i[t.toURLString()]=o,o}function Tu(t){mu=t}var Eu=function(){function t(t,e){this._repoInternal=t,this.app=e,this["type"]="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(Na(this._repoInternal,this.app.options.appId,this.app.options["databaseAuthVariableOverride"]),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ss(this._repo,he())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){return this._checkNotDeleted("delete"),wu(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&C("Cannot call "+t+" on a deleted database.")},t}();function Su(t,e,n,r){void 0===r&&(r={}),t=Object(o["getModularInstance"])(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&C('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Z(Z.OWNER);else if(r.mockUserToken){var s=Object(o["createMockUserToken"])(r.mockUserToken,t.app.options.projectId);a=new Z(s)}bu(i,e,n,a)}function Ou(t){t=Object(o["getModularInstance"])(t),t._checkNotDeleted("goOffline"),Qa(t._repo)}function Cu(t){t=Object(o["getModularInstance"])(t),t._checkNotDeleted("goOnline"),Ya(t._repo)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ku={".sv":"timestamp"};function Au(){return ku}function Nu(t){return{".sv":{increment:t}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xu=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Pu(t,e,n){var r;if(t=Object(o["getModularInstance"])(t),ma("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new o["Deferred"],s=function(e,n,r){var i=null;e?a.reject(e):(i=new Os(r,new Ss(t._repo,t._path),hn),a.resolve(new xu(n,i)))},u=qs(t,(function(){}));return es(t._repo,t._path,e,s,u,i),a.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ru=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(o["validateArgCount"])("OnDisconnect.cancel",0,1,arguments.length),Object(o["validateCallback"])("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){Object(o["validateArgCount"])("OnDisconnect.remove",0,1,arguments.length),Object(o["validateCallback"])("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){Object(o["validateArgCount"])("OnDisconnect.set",1,2,arguments.length),Object(o["validateCallback"])("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){Object(o["validateArgCount"])("OnDisconnect.setWithPriority",2,3,arguments.length),Object(o["validateCallback"])("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(Object(o["validateArgCount"])("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(o["validateCallback"])("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Du=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o["validateArgCount"])("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),ju=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(o["validateArgCount"])("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(o["validateArgCount"])("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(o["validateArgCount"])("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(o["validateArgCount"])("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(o["validateArgCount"])("DataSnapshot.child",0,1,arguments.length),e=String(e),ga("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(o["validateArgCount"])("DataSnapshot.hasChild",1,1,arguments.length),ga("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(o["validateArgCount"])("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(o["validateArgCount"])("DataSnapshot.forEach",1,1,arguments.length),Object(o["validateCallback"])("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return Object(o["validateArgCount"])("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o["validateArgCount"])("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(o["validateArgCount"])("DataSnapshot.ref",0,0,arguments.length),new Mu(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Lu=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var a,s=this;Object(o["validateArgCount"])("Query.on",2,4,arguments.length),Object(o["validateCallback"])("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new ju(s.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return qs(this._delegate,c,l),n;case"child_added":return Vs(this._delegate,c,l),n;case"child_removed":return Ws(this._delegate,c,l),n;case"child_changed":return Bs(this._delegate,c,l),n;case"child_moved":return Ks(this._delegate,c,l),n;default:throw new Error(Object(o["errorPrefix"])("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(o["validateArgCount"])("Query.off",0,3,arguments.length),pa("Query.off",t,!0),Object(o["validateCallback"])("Query.off","callback",e,!0),Object(o["validateContextObject"])("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Hs(this._delegate,t,r)}else Hs(this._delegate,t)},t.prototype.get=function(){var t=this;return Ls(this._delegate).then((function(e){return new ju(t.database,e)}))},t.prototype.once=function(e,n,r,i){var a=this;Object(o["validateArgCount"])("Query.once",1,4,arguments.length),Object(o["validateCallback"])("Query.once","callback",n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),u=new o["Deferred"],c=function(t,e){var r=new ju(a.database,t);n&&n.call(s.context,r,e),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(t){s.cancel&&s.cancel.call(s.context,t),u.reject(t)};switch(e){case"value":qs(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Vs(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Ws(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Bs(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ks(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(o["errorPrefix"])("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(o["validateArgCount"])("Query.limitToFirst",1,1,arguments.length),new t(this.database,vu(this._delegate,nu(e)))},t.prototype.limitToLast=function(e){return Object(o["validateArgCount"])("Query.limitToLast",1,1,arguments.length),new t(this.database,vu(this._delegate,iu(e)))},t.prototype.orderByChild=function(e){return Object(o["validateArgCount"])("Query.orderByChild",1,1,arguments.length),new t(this.database,vu(this._delegate,au(e)))},t.prototype.orderByKey=function(){return Object(o["validateArgCount"])("Query.orderByKey",0,0,arguments.length),new t(this.database,vu(this._delegate,uu()))},t.prototype.orderByPriority=function(){return Object(o["validateArgCount"])("Query.orderByPriority",0,0,arguments.length),new t(this.database,vu(this._delegate,lu()))},t.prototype.orderByValue=function(){return Object(o["validateArgCount"])("Query.orderByValue",0,0,arguments.length),new t(this.database,vu(this._delegate,fu()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(o["validateArgCount"])("Query.startAt",0,2,arguments.length),new t(this.database,vu(this._delegate,Js(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(o["validateArgCount"])("Query.startAfter",0,2,arguments.length),new t(this.database,vu(this._delegate,tu(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(o["validateArgCount"])("Query.endAt",0,2,arguments.length),new t(this.database,vu(this._delegate,$s(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(o["validateArgCount"])("Query.endBefore",0,2,arguments.length),new t(this.database,vu(this._delegate,Ys(e,n)))},t.prototype.equalTo=function(e,n){return Object(o["validateArgCount"])("Query.equalTo",1,2,arguments.length),new t(this.database,vu(this._delegate,pu(e,n)))},t.prototype.toString=function(){return Object(o["validateArgCount"])("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(o["validateArgCount"])("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(o["validateArgCount"])("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(o["validateCallback"])(t,"cancel",r.cancel,!0),r.context=n,Object(o["validateContextObject"])(t,"context",r.context,!0);else if(e)if("object"===typeof e&&null!==e)r.context=e;else{if("function"!==typeof e)throw new Error(Object(o["errorPrefix"])(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Mu(this.database,new Ss(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Mu=function(t){function e(e,n){var r=t.call(this,e,new ws(n._repo,n._path,new qn,!1))||this;return r.database=e,r._delegate=n,r}return Object(a["c"])(e,t),e.prototype.getKey=function(){return Object(o["validateArgCount"])("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(o["validateArgCount"])("Reference.child",1,1,arguments.length),"number"===typeof t&&(t=String(t)),new e(this.database,As(this._delegate,t))},e.prototype.getParent=function(){Object(o["validateArgCount"])("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(o["validateArgCount"])("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(o["validateArgCount"])("Reference.set",1,2,arguments.length),Object(o["validateCallback"])("Reference.set","onComplete",e,!0);var n=Ps(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(Object(o["validateArgCount"])("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ma("Reference.update",this._delegate._path),Object(o["validateCallback"])("Reference.update","onComplete",e,!0);var i=js(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){Object(o["validateArgCount"])("Reference.setWithPriority",2,3,arguments.length),Object(o["validateCallback"])("Reference.setWithPriority","onComplete",n,!0);var r=Ds(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){Object(o["validateArgCount"])("Reference.remove",0,1,arguments.length),Object(o["validateCallback"])("Reference.remove","onComplete",t,!0);var e=xs(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;Object(o["validateArgCount"])("Reference.transaction",1,3,arguments.length),Object(o["validateCallback"])("Reference.transaction","transactionUpdate",t,!1),Object(o["validateCallback"])("Reference.transaction","onComplete",e,!0),_a("Reference.transaction","applyLocally",n,!0);var i=Pu(this._delegate,t,{applyLocally:n}).then((function(t){return new Du(t.committed,new ju(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){Object(o["validateArgCount"])("Reference.setPriority",1,2,arguments.length),Object(o["validateCallback"])("Reference.setPriority","onComplete",e,!0);var n=Rs(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;Object(o["validateArgCount"])("Reference.push",0,2,arguments.length),Object(o["validateCallback"])("Reference.push","onComplete",n,!0);var i=Ns(this._delegate,t),a=i.then((function(t){return new e(r.database,t)}));n&&a.then((function(){return n(null)}),(function(t){return n(t)}));var s=new e(this.database,i);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},e.prototype.onDisconnect=function(){return ma("Reference.onDisconnect",this._delegate._path),new Ru(new _s(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Lu),Fu=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),Su(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(o["validateArgCount"])("database.ref",0,1,arguments.length),t instanceof Mu){var e=ks(this._delegate,t.toString());return new Mu(this,e)}e=Cs(this._delegate,t);return new Mu(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(o["validateArgCount"])(e,1,1,arguments.length);var n=ks(this._delegate,t);return new Mu(this,n)},t.prototype.goOffline=function(){return Object(o["validateArgCount"])("database.goOffline",0,0,arguments.length),Ou(this._delegate)},t.prototype.goOnline=function(){return Object(o["validateArgCount"])("database.goOnline",0,0,arguments.length),Cu(this._delegate)},t.ServerValue={TIMESTAMP:Au(),increment:function(t){return Nu(t)}},t}(),Uu=function(){Bt.forceDisallow(),Mt.forceAllow()},qu=function(){Mt.forceDisallow()},Vu=function(){return Bt["isAvailable"]()},Bu=function(t,e){var n=t._delegate._repo.persistentConnection_;n.securityDebugCallback_=e},Ku=function(t,e){Xa(t._delegate._repo,e)},Wu=function(t,e){Ja(t._delegate._repo,e)},Hu=function(t){return t._delegate._repo.dataUpdateCount},Gu=function(t,e){return Da(t._delegate._repo,e)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){var e=t.app,n=t.url,r=t.version,o=t.customAuthImpl,a=t.namespace,s=t.nodeAdmin,u=void 0!==s&&s;h(r);var c=new i["Provider"]("auth-internal",new i["ComponentContainer"]("database-standalone"));return c.setComponent(new i["Component"]("auth-internal",(function(){return o}),"PRIVATE")),{instance:new Fu(_u(e,c,void 0,n,u),e),namespace:a}}var $u=Object.freeze({__proto__:null,forceLongPolling:Uu,forceWebSockets:qu,isWebSocketsAvailable:Vu,setSecurityDebugCallback:Bu,stats:Ku,statsIncrementCounter:Wu,dataUpdateCount:Hu,interceptServerData:Gu,initStandalone:zu}),Qu=Ve;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ve.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ve.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Yu=ie,Xu=function(t){var e=Ve.prototype.put;return Ve.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Ve.prototype.put=e}},Ju=ht,Zu=function(t){return t._delegate._queryIdentifier},tc=function(t){Tu(t)},ec=Object.freeze({__proto__:null,DataConnection:Qu,RealTimeConnection:Yu,hijackHash:Xu,ConnectionTarget:Ju,queryIdentifier:Zu,forceRestClient:tc}),nc=Fu.ServerValue;function rc(t){h(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new i["Component"]("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Fu(_u(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Mu,Query:Lu,Database:Fu,DataSnapshot:ju,enableLogging:T,INTERNAL:$u,ServerValue:nc,TEST_ACCESS:ec}).setMultipleInstances(!0));t.registerVersion(u,c),Object(o["isNodeSdk"])()&&(e.exports=n)}rc(r["default"])}).call(this,n("4362"),n("dd40")(t))},e95a:function(t,e,n){var r=n("b622"),i=n("3f8c"),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},f069:function(t,e,n){"use strict";var r=n("1c0b"),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},f5df:function(t,e,n){var r=n("00ee"),i=n("c6b6"),o=n("b622"),a=o("toStringTag"),s="Arguments"==i(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),a))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},f772:function(t,e,n){var r=n("5692"),i=n("90e3"),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},f9e3:function(t,e,n){},fbb0:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};Object.create;Object.create},fc6a:function(t,e,n){var r=n("44ad"),i=n("1d80");t.exports=function(t){return r(i(t))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var r=n("4930");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(t,e,n){var r=n("da84");t.exports=r.Promise},ffa6:function(t,e,n){"use strict";n.r(e),n.d(e,"Component",(function(){return l})),n.d(e,"ComponentContainer",(function(){return v})),n.d(e,"Provider",(function(){return f}));var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function i(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(e){return u([t,e])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}Object.create;function a(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function u(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create;var c=n("a8e9"),l=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),h="[DEFAULT]",f=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=h);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new c["Deferred"];if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r({identifier:h,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(a){if(i)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(p(t))try{this.getOrInitializeService({instanceIdentifier:h})}catch(d){}try{for(var r=a(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=s(i.value,2),u=o[0],c=o[1],l=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:l});c.resolve(f)}catch(d){}}}catch(v){e={error:v}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=h),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(u(u([],s(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),s(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=h),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.instanceIdentifier,i=void 0===r?h:r,o=t.options,u=void 0===o?{}:o,c=this.normalizeInstanceIdentifier(i);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:c,options:u});try{for(var f=a(this.instancesDeferred.entries()),d=f.next();!d.done;d=f.next()){var p=s(d.value,2),v=p[0],g=p[1],y=this.normalizeInstanceIdentifier(v);c===y&&g.resolve(l)}}catch(m){e={error:m}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(l,c),l},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r;try{for(var i=a(this.onInitCallbacks),o=i.next();!o.done;o=i.next()){var s=o.value;try{s(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:d(e),options:r}),this.instances.set(e,i),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(o){}return i||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:h:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();function d(t){return t===h?void 0:t}function p(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){var e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new f(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()}}]);
//# sourceMappingURL=chunk-vendors.2a500825.js.map